{
  "version": 3,
  "sources": [
    "../../node_modules/browser-pack/_prelude.js",
    "breaks.ts",
    "columns.ts",
    "counters.ts",
    "css.ts",
    "css/core-css.ts",
    "css/default-css.ts",
    "flow.ts",
    "fragments.ts",
    "gcpm.ts",
    "hypher.ts",
    "index.js",
    "layout.ts",
    "pages.ts",
    "postscriptum.ts",
    "precss.ts",
    "process.ts",
    "rows.ts",
    "shim.ts",
    "util.ts",
    "util/mutations.ts",
    "util/ranges.ts",
    "util/rects.ts",
    "util/walk.ts",
    "../../node_modules/base64-js/index.js",
    "../../node_modules/browser-resolve/empty.js",
    "../../node_modules/buffer/index.js",
    "../../node_modules/ieee754/index.js",
    "../../node_modules/path-browserify/index.js",
    "../../node_modules/postcss-safe-parser/lib/safe-parse.es6",
    "../../node_modules/postcss-safe-parser/lib/safe-parser.es6",
    "../../node_modules/postcss-value-parser/lib/index.js",
    "../../node_modules/postcss-value-parser/lib/parse.js",
    "../../node_modules/postcss-value-parser/lib/stringify.js",
    "../../node_modules/postcss-value-parser/lib/unit.js",
    "../../node_modules/postcss-value-parser/lib/walk.js",
    "../../node_modules/postcss/lib/at-rule.es6",
    "../../node_modules/postcss/lib/comment.es6",
    "../../node_modules/postcss/lib/container.es6",
    "../../node_modules/postcss/lib/css-syntax-error.es6",
    "../../node_modules/postcss/lib/declaration.es6",
    "../../node_modules/postcss/lib/input.es6",
    "../../node_modules/node_modules/postcss/lib/lazy-result.es6",
    "../../node_modules/postcss/lib/list.es6",
    "../../node_modules/node_modules/postcss/lib/map-generator.es6",
    "../../node_modules/node_modules/postcss/lib/node.es6",
    "../../node_modules/node_modules/postcss/lib/parse.es6",
    "../../node_modules/postcss/lib/parser.es6",
    "../../node_modules/postcss/lib/postcss.es6",
    "../../node_modules/node_modules/postcss/lib/previous-map.es6",
    "../../node_modules/node_modules/postcss/lib/processor.es6",
    "../../node_modules/postcss/lib/result.es6",
    "../../node_modules/postcss/lib/root.es6",
    "../../node_modules/postcss/lib/rule.es6",
    "../../node_modules/postcss/lib/stringifier.es6",
    "../../node_modules/postcss/lib/stringify.es6",
    "../../node_modules/postcss/lib/tokenize.es6",
    "../../node_modules/postcss/lib/vendor.es6",
    "../../node_modules/postcss/lib/warn-once.es6",
    "../../node_modules/postcss/lib/warning.es6",
    "../../node_modules/postcss/node_modules/source-map/lib/array-set.js",
    "../../node_modules/postcss/node_modules/source-map/lib/base64-vlq.js",
    "../../node_modules/postcss/node_modules/source-map/lib/base64.js",
    "../../node_modules/postcss/node_modules/source-map/lib/binary-search.js",
    "../../node_modules/postcss/node_modules/source-map/lib/mapping-list.js",
    "../../node_modules/postcss/node_modules/source-map/lib/quick-sort.js",
    "../../node_modules/postcss/node_modules/source-map/lib/source-map-consumer.js",
    "../../node_modules/postcss/node_modules/source-map/lib/source-map-generator.js",
    "../../node_modules/postcss/node_modules/source-map/lib/source-node.js",
    "../../node_modules/postcss/node_modules/source-map/lib/util.js",
    "../../node_modules/postcss/node_modules/source-map/source-map.js",
    "../../node_modules/process/browser.js"
  ],
  "names": [],
  "mappings": "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AAS,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;IACrE,yBAAoB,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;AAC/F,CAAC,EAnPS,IAAI,KAAJ,IAAI,QAmPb;AAED,kBAAe,IAAI,CAAC;;;ACrPpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtJA;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;ACjhBA,IAAI,KAAK,GAAG,OAAO,CAAC,mBAAD,CAAnB;;AAEA,IAAI,UAAU,GAAG,OAAO,CAAC,eAAD,CAAxB;;AAEA,MAAM,CAAC,OAAP,GAAiB,SAAS,SAAT,CAAoB,GAApB,EAAyB,IAAzB,EAA+B;AAC9C,MAAI,KAAK,GAAG,IAAI,KAAJ,CAAU,GAAV,EAAe,IAAf,CAAZ;AAEA,MAAI,MAAM,GAAG,IAAI,UAAJ,CAAe,KAAf,CAAb;AACA,EAAA,MAAM,CA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OAAL,CAAa,IAAb,CAAkB,SAAlB,GAA8B,KAAK,SAAnC;AACD;;AACD,SAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,GAA0B,CAAC,KAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,IAA2B,EAA5B,IAAkC,KAAK,MAAjE;;AAEA,WAAO,KAAK,OAAL,CAAa,MAApB,EAA4B;AAC1B,WAAK,OAAL,GAAe,KAAK,OAAL,CAAa,MAA5B;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB,KAAlB,GAA0B,EAA1B;AACD;AACF;;;EA7EsB;;AAgFzB,MAAM,CAAC,OAAP,GAAiB,UAAjB;;;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;;;;;;AAEA;;;;;;;;;;;;;;;;;;IAkBM;;;AACJ,kBAAa,QAAb,EAAuB;AAAA;;AACrB,kCAAM,QAAN;AACA,UAAK,IAAL,GAAY,QAAZ;AAFqB;AAGtB;;;;SAED,SAAA,kBAAqB;AAAA;;AACnB,QAAI,CAAC,KAAK,KAAV,EAAiB,KAAK,KAAL,GAAa,EAAb;;AADE,sCAAV,QAAU;AAAV,MAAA,QAAU;AAAA;;AAEnB,yDAAa,MAAb,kDAAuB,QAAvB;AACD;;SAED,UAAA,mBAAsB;AAAA;;AACpB,QAAI,CAAC,KAAK,KAAV,EAAiB,KAAK,KAAL,GAAa,EAAb;;AADG,uCAAV,QAAU;AAAV,MAAA,QAAU;AAAA;;AAEpB,0DAAa,OAAb,mDAAwB,QAAxB;AACD;AAED;;;;;;;;;;AAUA;;;;;;;;;;;;AAYA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAtCmB;;eAuEN;;;;;;;;;;;AC3Ff;;;;;;AAEA;;;;;;;;IAQM;;;AACJ,mBAAa,QAAb,EAAuB;AAAA;;AACrB,6BAAM,QAAN;AACA,UAAK,IAAL,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,GAAc,GAAG,CAAC,MAAlB;AACD;;AAED,SAAK,IAAI,GAAT,IAAgB,IAAhB;AAAsB,WAAK,GAAL,IAAY,IAAI,CAAC,GAAD,CAAhB;AAAtB;AACD;AAED;;;;;;;;;;;;SAQA,WAAA,oBAAY;AACV,QAAI,KAAK,IAAT,EAAe;AACb,aAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,KAAK,IAArB,EAA2B;AAChC,QAAA,MAAM,EAAE,KAAK,MADmB;AAEhC,QAAA,KAAK,EAAE,KAAK,KAFoB;AAGhC,QAAA,IAAI,EAAE,KAAK;AAHqB,OAA3B,EAIJ,OAJH;AAKD;;AAED,QAAI,KAAK,MAAT,EAAiB;AACf,aAAO,KAAK,MAAL,GAAc,IAAd,GAAqB,KAAK,IAAjC;AACD;;AAED,WAAO,KAAK,IAAZ;AACD;AAED;;;;;;;;;;AAUA;;;;;;;;;;;;eASa;;;;;;AC5Gf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACznCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7ZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "import {Point} from \"./util/ranges\";\nimport {walk} from \"./util\";\nimport * as counters from \"./counters\";\nimport {CountersStack} from \"./counters\";\nimport {getCustomProp, getCustomStyle} from \"./css\";\n\nexport type Position = \"before\" | \"after\";\nexport type Unbreakable =\n\t'float'\n\t| 'intrisicDimension'\n\t| 'horizontalLayout'\n\t| 'replacedElement'\n\t| 'subFragmentor'\n\t| false;\n\nconst REPLACED_ELEMENTS = ['img', 'object', 'video', 'audio', 'canvas', 'iframe', 'textarea', 'input', 'button'];\n\nexport function breakAtPoint<T extends HTMLElement>(source: T, breakPoint: Point, side: Position = 'after'): T {\n\tconst textBreak = breakPoint.container.nodeType == Node.TEXT_NODE;\n\tconst breaking = textBreak ? breakPoint.container.parentElement : breakPoint.container as Element;\n\tconst breakingOnSource = breaking == source;\n\n\t// An attribute is set to find the breaking element after the extraction of contents\n\tbreaking.setAttribute('ps-breaking', '');\n\n\tconst prevCounters = counters.parseCounters(source, breakPoint);\n\n\tconst contentsRange = source.ownerDocument.createRange();\n\tif (side == \"before\") {\n\t\tcontentsRange.setStartBefore(source);\n\t\tcontentsRange.setEnd(breakPoint.container, breakPoint.offset);\n\t} else {\n\t\tcontentsRange.setStart(breakPoint.container, breakPoint.offset);\n\t\tcontentsRange.setEndAfter(source);\n\t}\n\tconst contents = contentsRange.extractContents();\n\tconst dest = contents.firstElementChild as T;\n\n\tlet sourceBreaking = breakingOnSource ? source : source.querySelector('[' + 'ps-breaking' + ']') as HTMLElement;\n\tlet destBreaking = breakingOnSource ? dest : dest.querySelector('[' + 'ps-breaking' + ']') as HTMLElement;\n\n\tsourceBreaking.removeAttribute('ps-breaking');\n\tdestBreaking.removeAttribute('ps-breaking');\n\n\tlet firstAncestorBox = false;\n\twhile (destBreaking != dest.parentElement) {\n\t\tlet beforeElt, afterElt;\n\t\tif (side == \"after\") {\n\t\t\tbeforeElt = sourceBreaking;\n\t\t\tafterElt = destBreaking;\n\t\t} else {\n\t\t\tbeforeElt = destBreaking;\n\t\t\tafterElt = sourceBreaking;\n\t\t}\n\n\t\tbeforeElt.setAttribute('ps-breaked-after', '');\n\t\tafterElt.setAttribute('ps-breaked-before', '');\n\t\tif (prevCounters) writeCounters(prevCounters, beforeElt, afterElt);\n\n\t\tif (destBreaking.localName == \"ol\") breakOrderedList(beforeElt as HTMLOListElement, afterElt as HTMLOListElement);\n\t\telse if (destBreaking.localName == \"table\") breakTable(beforeElt as HTMLTableElement, afterElt as HTMLTableElement);\n\n\t\tif (textBreak) {\n\t\t\tconst textNode = breakPoint.container;\n\t\t\t/* Force an hyphen if the break is on one */\n\t\t\t// TODO check that the 'hyphens' property != none\n\t\t\tif (textNode.nodeValue.endsWith('\\u00AD')) {\n\t\t\t\tconst style = getComputedStyle(textNode.parentElement);\n\t\t\t\tif (style.getPropertyValue('--ps-hyphens').trim() == \"auto\") {\n\t\t\t\t\tconst hyphenChar = style.getPropertyValue(\"-webkit-hyphenate-character\")[1] || '\\u2010';\n\t\t\t\t\ttextNode.nodeValue = textNode.nodeValue.slice(0, -1) + hyphenChar;\n\t\t\t\t\ttextNode.parentElement.setAttribute('ps-hyphen-last', '');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!firstAncestorBox && walk.displayAsBlock(beforeElt)) {\n\t\t\t\tbeforeElt.style.textAlignLast = beforeElt.style.MozTextAlignLast = getComputedStyle(beforeElt).textAlign;\n\t\t\t\tfirstAncestorBox = true;\n\t\t\t}\n\t\t}\n\n\t\tsourceBreaking = sourceBreaking.parentElement;\n\t\tdestBreaking = destBreaking.parentElement;\n\t}\n\n\treturn dest;\n}\n\nexport function writeCounters(counters: CountersStack, prevElt: HTMLElement, nextElt: HTMLElement): void {\n\tlet counterReset = '';\n\tfor (const counterName in counters) {\n\t\tconst counterScopes = counters[counterName];\n\t\tfor (let i = counterScopes.length - 1; i >= 0; i--) {\n\t\t\tconst counterScope = counterScopes[i];\n\t\t\tif (prevElt.parentNode == counterScope.element.parentNode || nextElt.parentNode == counterScope.element.parentNode) {\n\t\t\t\tcounterReset += ' ' + counterName + ' ' + counterScope.value;\n\t\t\t\tcounterScopes.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif (counterReset) {\n\t\tnextElt.setAttribute('ps-counters', '');\n\t\tnextElt.style.counterReset = counterReset;\n\t}\n}\n\n// TODO removeBreakedAttr: keep track of the breaked element before / after in a symbol instead?\nexport function unbreak(before: HTMLElement, after: HTMLElement, position: Position = 'before'): void {\n\tbefore.removeAttribute('ps-breaked-after');\n\tafter.removeAttribute('ps-breaked-before');\n\n\tif (before.localName == \"table\") unbreakTable(before as HTMLTableElement, after as HTMLTableElement);\n\telse if (before.localName == \"ol\") unbreakOrderedList(before as HTMLOListElement, after as HTMLOListElement);\n\tif (before.style.textAlignLast) before.style.textAlignLast = before.style.MozTextAlignLast = '';\n\n\tif (after.hasAttribute('ps-counters')) {\n\t\tafter.style.counterReset = '';\n\t\tafter.removeAttribute('ps-counters');\n\t}\n\n\tlet childBefore: HTMLElement, childAfter: HTMLElement;\n\tif (walk.isHTMLElement(before.lastChild) && before.lastChild.hasAttribute('ps-breaked-after')) {\n\t\tchildBefore = before.lastChild;\n\t\tchildAfter = after.firstChild as HTMLElement;\n\t}\n\n\t// Maybe a text break\n\tif (!childBefore) {\n\t\tif (before.hasAttribute('ps-hyphen-last')) before.lastChild.nodeValue = before.lastChild.nodeValue.slice(0, -1) + '\\u00AD';\n\t}\n\n\tif (position == 'before') {\n\t\tif (after.hasAttribute('ps-breaked-after')) before.setAttribute('ps-breaked-after', '');\n\t\t//for (const attr of after.attributes) if (attr.name != 'style') before.setAttribute(attr.name, attr.value);\n\t\twhile (after.firstChild) before.appendChild(after.firstChild);\n\t\tafter.remove();\n\t\tbefore.normalize();\n\t} else {\n\t\t// Copy of the attributes of the before when the unbreak lands on the after\n\t\tif (before.hasAttribute('ps-breaked-before')) after.setAttribute('ps-breaked-before', '');\n\t\tif (before.hasAttribute('ps-counters')) {\n\t\t\tafter.setAttribute('ps-counters', '');\n\t\t\tafter.style.counterReset = before.style.counterReset;\n\t\t}\n\t\tif (before.hasAttribute('start')) after.setAttribute('start', before.getAttribute('start'));\n\t\t// TODO Should we copy all the attributes ?\n\t\t// for (const attr of before.attributes) if (attr.name != 'style') after.setAttribute(attr.name, attr.value);\n\t\twhile (before.lastChild) after.insertBefore(before.lastChild, after.firstChild);\n\t\tbefore.remove();\n\t\tafter.normalize();\n\t}\n\n\tif (childBefore && childAfter) unbreak(childBefore, childAfter, position);\n}\n\nfunction breakOrderedList(before: HTMLOListElement, after: HTMLOListElement): void {\n\tconst listItems = Array.prototype.filter.call(before.children, (child: Element) => {\n\t\treturn getComputedStyle(child).display == 'list-item';\n\t});\n\tlet beforeStart = before.hasAttribute('start') ? parseInt(before.getAttribute('start')) : 1;\n\t// Substract one if the first child is breaked\n\tif (after.firstElementChild && after.firstElementChild.hasAttribute('ps-breaked-before')) beforeStart--;\n\tafter.setAttribute('start', beforeStart + listItems.length);\n}\n\n\nexport type RowSpan = {\n\tcount: number;\n\tcolspan: number;\n\tbaseCell: HTMLTableCellElement;\n};\n\n// The width of the cells when the table is breaking between two containers of differents size is handled by the horizontalSubFragmentor\nexport function breakTable(before: HTMLTableElement, after: HTMLTableElement): void {\n\tconst colgroup = before.getElementsByTagName('colgroup').item(0);\n\tif (colgroup) after.insertBefore(colgroup.cloneNode(true), after.firstChild);\n\n\tconst customStyle = getCustomStyle(before);\n\tif (!after.tHead && before.tHead && getCustomProp(customStyle, 'repeat-thead') != 'no-repeat') {\n\t\tafter.tHead = before.tHead.cloneNode(true);\n\t\tafter.tHead.setAttribute('ps-repeated', '');\n\t}\n\t/* It is not possible to repeat a footer or the bottom caption:  the elements must be known before a page break can occur. */\n}\n\n\nfunction unbreakOrderedList(before: HTMLOListElement, after: HTMLOListElement): void {\n\tafter.removeAttribute('start');\n}\n\nfunction unbreakTable(before: HTMLTableElement, after: HTMLTableElement): void {\n\tconst afterColgroups = after.querySelectorAll('colgroup');\n\tfor (let i = 1; i < afterColgroups.length; i++) afterColgroups[i].remove();\n}\n\n// Only the intrinsic dimension specified in the element's style is taken into account.\nexport function unbreakableElement(element: HTMLElement | SVGElement): Unbreakable {\n\tif (element instanceof SVGElement) return 'replacedElement';\n\tconst style = getComputedStyle(element);\n\tif (style.float != 'none') return 'float';\n\tif (element.style.height || element.style.minHeight) return 'intrisicDimension';\n\tif (REPLACED_ELEMENTS.includes(element.localName) && walk.displayAsBlock(element)) return 'replacedElement';\n}\n",
    "import {Process} from \"./process\";\nimport {Areas, isSubFragmentor, LayoutContext, LayoutProcessResult, SubFragmentor, SubProcessor, SubProcessorContext} from \"./layout\";\nimport {events, logger, ranges, rects} from \"./util\";\nimport {Mutations} from \"./util\";\nimport {walk} from \"./util\";\nimport {createAreas, Fragment, Fragmentor, FragmentorEvents, FragmentorOptions} from \"./fragments\";\nimport {breakAtPoint, unbreak} from \"./breaks\";\nimport {computeLength, computeMinOrMaxLength, getCustomProp, getCustomStyle} from \"./css\";\nimport {FlowIterator, ForcedBreakType} from \"./flow\";\nimport {Point} from \"./util/ranges\";\n\nexport class Column extends Fragment {\n}\n\nexport class ColumnSpan extends Fragment {\n}\n\nclass ColumnsGroup {\n\tsequences: HTMLElement[] = [];\n\tcolumnParent: HTMLElement = null;\n\tspan: HTMLElement = null;\n\tcolumnsMut: Mutations = null;\n\tspanMut: Mutations = null;\n}\n\nexport interface ColumnizatorOptions extends FragmentorOptions {\n\tparentAreas?: Areas;\n\tcolumnCount?: number;\n}\n\nexport interface ColumnizatorEvents extends FragmentorEvents {\n\t'columnization-start': Record<string, never>;\n\t'columnization-end': Record<string, never>;\n}\n\nclass ColumnsLayoutContext extends LayoutContext {\n\tmaxHeightChanged = false;\n\n\tconstructor(source: HTMLElement, root: HTMLElement, areas: Areas, parentCtx?: LayoutContext) {\n\t\tsuper(root, root, areas, parentCtx);\n\n\t\tif (parentCtx) parentCtx.on('body-bottom-change', ({newBottom}) => {\n\t\t\tthis.maxHeightChanged = true;\n\t\t});\n\t}\n}\n\nexport class Columnizator extends Fragmentor<ColumnizatorOptions, ColumnizatorEvents> {\n\tstatic defaultOptions: ColumnizatorOptions = Object.assign({\n\t\tparentAreas: {},\n\t\tparentLayoutContext: null,\n\t}, Fragmentor.defaultOptions);\n\n\tavoidBreakTypes = ['avoid', 'avoid-column'];\n\tforcedBreakTypes: ForcedBreakType[] = ['always', 'column', '-ps-column-span'];\n\tlayoutContext: ColumnsLayoutContext;\n\n\tcolumnizationMut: Mutations = new Mutations();\n\tbreakPoint: Point | false | null = null;\n\n\tparentAvoidBreakTypes: string[];\n\n\tcolumnCount: number;\n\tfillProp: string;\n\n\tsourceBody: HTMLElement;\n\tdeportFloat: boolean;\n\tisLastGroup: boolean;\n\n\t_maxBottom: number;\n\n\tlogNoValidBreakPoint = false;\n\n\tconstructor(source: HTMLElement, options?: ColumnizatorOptions) {\n\t\tsuper(source, options);\n\t\tthis.addSubProcessor(columnsSubProcessor);\n\t\tthis._process = this.columnizationProcess();\n\t}\n\n\t/** Returns the max height defined on the element style or Infinity */\n\tcolumnsMaxHeight(top: number): number {\n\t\tif (!this._maxBottom) {\n\t\t\tconst style = getComputedStyle(this.source);\n\t\t\tlet maxHeight = computeMinOrMaxLength(style.maxHeight, this.source.parentElement.clientHeight, Infinity);\n\t\t\tif (isNaN(maxHeight)) maxHeight = Infinity;\n\t\t\tif (maxHeight == Infinity) this._maxBottom = Infinity;\n\t\t\telse {\n\t\t\t\tconst sourceTop = this.source.getBoundingClientRect().top;\n\t\t\t\tthis._maxBottom = sourceTop + maxHeight;\n\t\t\t}\n\t\t}\n\t\t// -0.001 to avoid some rounding error on Firefox (87)\n\t\treturn this._maxBottom - top - 0.001;\n\t}\n\n\t* columnizationProcess(): Process {\n\t\t// Does a column count exist?\n\t\tconst customStyle = getCustomStyle(this.source);\n\t\tthis.columnCount = this.options.columnCount || parseColumnCount(this.source, customStyle);\n\t\tif (!this.columnCount) throw new Error(\"No columns count defined on the source element.\");\n\n\t\t// Start of the column processes\n\t\tthis.columnizationMut.setAttr(this.source, 'ps-process', 'pending');\n\t\tif (this.listenerCount('start')) yield 'start';\n\t\tif (this.listenerCount('columnization-start')) yield 'columnization-start';\n\t\tthis.columnizationMut.setAttr(this.source, 'ps-columns', '');\n\n\n\t\t// Move of all the contents in an hidden body\n\t\tthis.sourceBody = document.createElement('ps-column-body');\n\t\tranges.appendNodeContents(this.source, this.sourceBody);\n\t\tthis.sourceBody.style.display = 'none';\n\t\tthis.source.appendChild(this.sourceBody);\n\n\t\tthis.columnizationMut.push({\n\t\t\tsource: this.source,\n\t\t\tsourceBody: this.sourceBody,\n\t\t\trevert(): void {\n\t\t\t\tranges.appendNodeContents(this.sourceBody, this.source);\n\t\t\t\tthis.sourceBody.remove();\n\t\t\t}\n\t\t});\n\n\t\t// Columns properties\n\t\tthis.fillProp = getCustomProp(customStyle, 'column-fill');\n\t\tlet gapProp = getCustomProp(customStyle, 'column-gap');\n\t\tif (gapProp == 'normal') gapProp = '1em';\n\t\tthis.columnizationMut.setStyle(this.source, { '--ps-gap': gapProp });\n\n\t\tlet ruleProp = getCustomProp(customStyle, 'column-rule');\n\t\tif (!ruleProp) {\n\t\t\tconst ruleStyle = getCustomProp(customStyle, 'column-rule-style') || 'none';\n\t\t\tconst ruleWidth = getCustomProp(customStyle, 'column-rule-width') || 'medium';\n\t\t\tconst ruleColor = getCustomProp(customStyle, 'column-rule-color') || getComputedStyle(this.source).color;\n\t\t\truleProp = ruleStyle + ' ' + ruleWidth + ' ' + ruleColor;\n\n\t\t}\n\t\t// The rule is created if the style is not \"none\"\n\t\tif (!ruleProp.match(/(^|\\s)none($|\\s)?/)) this.columnizationMut.setStyle(this.source, { '--ps-rule': ruleProp });\n\n\t\t// Iterate and extract over the group (pair columns + span)\n\t\tconst flowIterator = new FlowIterator(this.sourceBody, this.forcedBreakTypes);\n\t\tflowIterator.columnSpanBreak = getCustomProp(customStyle, 'column-span-break') as 'box' | 'element';\n\t\tthis.isLastGroup = false;\n\t\tlet flow = flowIterator.next();\n\t\tconst groups: Array<ColumnsGroup> = [];\n\t\tlet group: ColumnsGroup;\n\t\tlet maxSequencesReached: boolean;\n\t\tdo {\n\t\t\tgroup = new ColumnsGroup();\n\t\t\tgroups.push(group);\n\t\t\tmaxSequencesReached = false;\n\t\t\tdo {\n\t\t\t\tconst sequenceMut = new Mutations();\n\t\t\t\tconst sequence = sequenceMut.breaks(this.sourceBody, {\n\t\t\t\t\tcontainer: flow.range.endContainer as Element,\n\t\t\t\t\toffset: flow.range.endOffset\n\t\t\t\t}, 'before');\n\t\t\t\tsequence.setAttribute('ps-column-sequence', '');\n\t\t\t\tsequence.style.display = '';\n\n\t\t\t\t// The span should have an unique element (on box or element break)\n\t\t\t\tif (flow.breakType == '-ps-column-span') {\n\t\t\t\t\tif (group.span) {\n\t\t\t\t\t\tunbreak(group.span, sequence, 'before');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tgroup.spanMut = new Mutations();\n\t\t\t\t\t\tsequenceMut.commit(group.spanMut);\n\t\t\t\t\t\tgroup.span = sequence;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tgroup.columnsMut = new Mutations();\n\t\t\t\t\tsequenceMut.commit(group.columnsMut);\n\t\t\t\t\tgroup.sequences.push(sequence);\n\t\t\t\t}\n\n\t\t\t\tthis.isLastGroup = flowIterator.remaining.collapsed;\n\t\t\t\tflow = flowIterator.next();\n\n\t\t\t\t// The iteration is stopped if they are more sequences than columns (+1 to include a possible span)\n\t\t\t\tmaxSequencesReached = group.sequences.length >= this.columnCount + 1;\n\t\t\t} while (flow && !maxSequencesReached && (!group.span || flow.breakType == '-ps-column-span'));\n\n\t\t\t// Process the column group\n\t\t\t// this.breakPoint == false means that no valid break point is found on the last columns or last span.\n\t\t\tyield* this.columnsGroupProcess(group);\n\n\t\t} while (!this.isLastGroup && this.breakPoint === null && !maxSequencesReached);\n\n\t\tlet remainingBody: HTMLElement;\n\n\t\tconst boxes = groups.flatMap((group) => {\n\t\t\tconst b = [];\n\t\t\tif (group.columnParent) b.push({ element: group.columnParent, mutations: group.columnsMut});\n\t\t\tif (group.span && group.span.isConnected) b.push({ element: group.span, mutations: group.spanMut});\n\t\t\treturn b;\n\t\t});\n\n\t\t// Put back the remaining span and sequences in the source body\n\t\tif (group.span && !group.span.isConnected) unbreak(group.span, this.sourceBody, 'after');\n\t\tfor (let i = group.sequences.length - 1; i >= 0; i--) {\n\t\t\tif (!group.sequences[i].isConnected) unbreak(group.sequences[i], this.sourceBody, 'after');\n\t\t}\n\n\t\tif (this.breakPoint) {\n\t\t\tfor (let i=boxes.length - 1; i>=0; i--) boxes[i].mutations.commit(this.columnizationMut);\n\t\t\tremainingBody = breakAtPoint(this.currentFragment.body, this.breakPoint);\n\t\t\tthis.breakPoint = ranges.positionBefore(this.sourceBody);\n\t\t\tunbreak(remainingBody, this.sourceBody, 'before');\n\t\t\tthis.columnizationMut.push({\n\t\t\t\tremainingBody,\n\t\t\t\tfragmentBody: this.currentFragment.body,\n\t\t\t\trevert(): void {\n\t\t\t\t\tunbreak(this.fragmentBody, this.remainingBody, 'before');\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\n\t\t\tlet lastBoxIdx = boxes.length - 1;\n\t\t\tif (this.breakPoint === false) boxes[lastBoxIdx--].mutations.revert();\n\n\t\t\tlet validBoxIdx = -1;\n\t\t\tfor (let i=lastBoxIdx; i>=0; i--) {\n\t\t\t\tconst box = boxes[i];\n\t\t\t\tif (box.element.getAttribute('ps-break-after') !== 'avoid') {\n\t\t\t\t\tvalidBoxIdx = i;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tbox.mutations.revert();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (validBoxIdx == -1) {\n\t\t\t\tthis.breakPoint = false;\n\t\t\t} else {\n\t\t\t\tfor (let i=0; i<=validBoxIdx; i++) boxes[i].mutations.commit(this.columnizationMut);\n\t\t\t\tthis.breakPoint = this.sourceBody.firstChild ? ranges.positionBefore(this.sourceBody) : null;\n\t\t\t}\n\n\t\t\tremainingBody = this.sourceBody;\n\t\t\tremainingBody.remove();\n\t\t}\n\n\t\tthis.columnizationMut.appendNodeContents(remainingBody, this.source);\n\n\t\tthis.columnizationMut.setAttr(this.source, 'ps-process', 'ended');\n\t\tif (this.listenerCount('columnization-end')) yield 'columnization-end';\n\t\tif (this.listenerCount('end')) yield 'end';\n\t}\n\n\t/**\n\t * A the end of this process, the remaining bodies are replaced in the source body\n\t * @param group\n\t */\n\t* columnsGroupProcess(group: ColumnsGroup): Process {\n\t\tif (group.sequences.length) {\n\t\t\tconst columns: Column[] = [];\n\n\t\t\t// Creation of the columns parent element\n\t\t\tconst columnsParent = group.columnParent = this.doc.createElement('ps-columns');\n\t\t\tgroup.columnsMut.setAttr(columnsParent, 'ps-process', 'pending');\n\t\t\tthis.source.insertBefore(columnsParent, this.sourceBody);\n\n\t\t\t// Creation of the column elements\n\t\t\tfor (let i = 0; i < this.columnCount; i++) {\n\t\t\t\tconst column = createColumn(this.doc, i + 1);\n\t\t\t\tif (i != 0) {\n\t\t\t\t\tconst columnGap = document.createElement('ps-column-gap');\n\t\t\t\t\tif (this.source.style.getPropertyValue('--ps-rule')) columnGap.appendChild(document.createElement('ps-column-rule'));\n\t\t\t\t\tcolumnsParent.appendChild(columnGap);\n\t\t\t\t}\n\t\t\t\tcolumnsParent.appendChild(column.container);\n\t\t\t\tcreateAreas(column, getCustomProp(this.source, 'areas'));\n\t\t\t\tcolumns.push(column);\n\t\t\t\tthis.fragments.push(column);\n\t\t\t}\n\n\t\t\tgroup.columnsMut.push({\n\t\t\t\tcolumnsParent,\n\t\t\t\trevert(): void {\n\t\t\t\t\tcolumnsParent.remove();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst sourceStyle = getComputedStyle(this.source);\n\t\t\tconst lineHeightProp = sourceStyle.lineHeight;\n\t\t\tconst lineHeight = lineHeightProp == 'normal' ? parseInt(sourceStyle.fontSize) * 1.15 : parseInt(lineHeightProp);\n\n\t\t\tlet spanFirstPass = group.span != null;\n\t\t\tlet recolumnize = false;\n\n\t\t\tconst top = rects.boundingScrollRect(columnsParent).top;\n\t\t\tlet height = this.columnsMaxHeight(top);\n\n\t\t\tconst columnsContentMut = new Mutations();\n\n\t\t\tdo {\n\t\t\t\tconst firstColumn = columns[0];\n\t\t\t\tlet toBalance = spanFirstPass || this.isLastGroup && (height == Infinity || this.fillProp != 'auto');\n\t\t\t\tif (toBalance && !recolumnize) {\n\t\t\t\t\tlet balancedHeight = lineHeight;\n\t\t\t\t\tfor (let i = group.sequences.length - 1; i >= 0; i--) {\n\t\t\t\t\t\tconst columnBody = group.sequences[i];\n\t\t\t\t\t\tfirstColumn.body = firstColumn.container.insertBefore(columnBody, firstColumn.container.firstChild);\n\t\t\t\t\t\tconst columnMinHeight = columnBody.scrollHeight / (this.columnCount - group.sequences.length + 1);\n\t\t\t\t\t\tif (columnMinHeight > balancedHeight) balancedHeight = columnMinHeight;\n\t\t\t\t\t\tif (i != 0) columnBody.remove();\n\t\t\t\t\t}\n\t\t\t\t\tif (balancedHeight < height) height = balancedHeight;\n\t\t\t\t\telse toBalance = false;\n\t\t\t\t} else {\n\t\t\t\t\tfirstColumn.body = firstColumn.container.insertBefore(group.sequences[0], firstColumn.container.firstChild);\n\t\t\t\t}\n\n\t\t\t\tgroup.columnsMut.push({\n\t\t\t\t\tfirstColumn,\n\t\t\t\t\trevert(): void {\n\t\t\t\t\t\tthis.firstColumn.body.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tcolumnsContentMut.push({\n\t\t\t\t\tcolumns,\n\t\t\t\t\tgroup,\n\t\t\t\t\trevert(): void {\n\t\t\t\t\t\tfor (let i = this.columns.length - 1; i > 0; i--) {\n\t\t\t\t\t\t\tconst column = columns[i];\n\t\t\t\t\t\t\tif (column.body) {\n\t\t\t\t\t\t\t\tif (i > 0 && this.group.sequences.includes(column.body)) {\n\t\t\t\t\t\t\t\t\t// The column is a sequence start, presents in group.sequences\n\t\t\t\t\t\t\t\t\tcolumn.body.remove();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tunbreak(columns[i - 1].body, column.body);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcolumn.body = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// At this point, the content of the first sequence is in the first column\n\t\t\t\trecolumnize = false;\n\t\t\t\tlet stop = false;\n\t\t\t\tgroup.columnsMut.setStyle(columnsParent, {'height': height + 'px'});\n\n\t\t\t\tlet currentSequence = 0;\n\t\t\t\tlet currentColumn = 0;\n\t\t\t\tlet column = columns[currentColumn];\n\n\t\t\t\tdo {\n\t\t\t\t\tthis.currentFragment = column;\n\t\t\t\t\tthis.breakPoint = null;\n\t\t\t\t\tlogger.addScope(`column ${column.number}`);\n\t\t\t\t\tthis.onFragmentStart(column, false);\n\t\t\t\t\tconst columnAreas = Object.assign({}, this.options.parentAreas, column.areas);\n\t\t\t\t\tconst contentsEvent = yield* this.contentsProcess(column.body, columnAreas, isSubFragmentor(this) && this.parentFragmentor.layoutContext);\n\n\t\t\t\t\tconst newMaxHeight = this.columnsMaxHeight(top);\n\t\t\t\t\tif (this.layoutContext.maxHeightChanged && height > newMaxHeight) {\n\t\t\t\t\t\t// New max height\n\t\t\t\t\t\theight = newMaxHeight;\n\t\t\t\t\t\ttoBalance = false;\n\t\t\t\t\t\trecolumnize = true;\n\t\t\t\t\t\tlogger.removeScope();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (toBalance) {\n\t\t\t\t\t\tlet increaseHeight = contentsEvent == 'no-break-point';\n\t\t\t\t\t\tif (!increaseHeight) {\n\t\t\t\t\t\t\tconst lastColumnBody = columns[columns.length - 1].body;\n\t\t\t\t\t\t\tincreaseHeight = contentsEvent == \"valid-break-point\" && lastColumnBody && lastColumnBody.scrollHeight >= lastColumnBody.clientHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (increaseHeight) {\n\t\t\t\t\t\t\tif (height + lineHeight < newMaxHeight) {\n\t\t\t\t\t\t\t\theight += lineHeight;\n\t\t\t\t\t\t\t\trecolumnize = true;\n\t\t\t\t\t\t\t\tlogger.removeScope();\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (contentsEvent == \"valid-break-point\") this.breakPoint = this.layoutContext.breakPoint;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (contentsEvent == 'no-break-point') {\n\t\t\t\t\t\t\tthis.layoutContext.mutations.revert();\n\t\t\t\t\t\t\tthis.fragmentStartMut.revert();\n\t\t\t\t\t\t\tcolumnsContentMut.revert();\n\t\t\t\t\t\t\tthis.breakPoint = false;\n\t\t\t\t\t\t\tlogger.removeScope();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t} else if (contentsEvent == 'valid-break-point') {\n\t\t\t\t\t\t\tthis.breakPoint = this.layoutContext.breakPoint;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlogger.removeScope();\n\n\t\t\t\t\tcurrentColumn++;\n\t\t\t\t\t// All the column have contents\n\t\t\t\t\tif (currentColumn == columns.length) {\n\t\t\t\t\t\tstop = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.breakPoint) {\n\t\t\t\t\t\t\t// Not breaked in a mutation, the revert is handled by columnsContentMut\n\t\t\t\t\t\t\tconst remainingBody = breakAtPoint(column.body, this.breakPoint);\n\t\t\t\t\t\t\tthis.onFragmentBreak(column);\n\t\t\t\t\t\t\tcolumn = columns[currentColumn];\n\t\t\t\t\t\t\tcolumn.body = column.container.insertBefore(remainingBody, column.container.firstChild);\n\t\t\t\t\t\t\tthis.breakPoint = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurrentSequence++;\n\t\t\t\t\t\t\tif (currentSequence < group.sequences.length) {\n\t\t\t\t\t\t\t\tcolumn = columns[currentColumn];\n\t\t\t\t\t\t\t\tcolumn.body = column.container.insertBefore(group.sequences[currentSequence], column.container.firstChild);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// Forced height is changed to max-height to fit the content while avoiding overflow on the page\n\t\t\t\t\t\t\t\tcolumnsParent.style.height = '';\n\t\t\t\t\t\t\t\tgroup.columnsMut.setStyle(columnsParent, {'max-height': height + 'px'});\n\t\t\t\t\t\t\t\tstop = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} while (!stop);\n\n\t\t\t\tif (!recolumnize && spanFirstPass && this.breakPoint === null) {\n\t\t\t\t\tthis.fragmentStartMut.commit(columnsContentMut);\n\t\t\t\t\tthis.layoutContext.mutations.commit(columnsContentMut);\n\t\t\t\t\tcolumnsContentMut.commit(group.columnsMut);\n\t\t\t\t\tgroup.columnsMut.setAttr(columnsParent, 'ps-process', 'ended');\n\n\t\t\t\t\tconst contentsEvent = yield* this.columnSpanProcess(group);\n\t\t\t\t\tif (contentsEvent == 'no-break-point') {\n\t\t\t\t\t\t// TODO rcuprer la liste des floats\n\t\t\t\t\t\tthis.layoutContext.mutations.revert();\n\t\t\t\t\t\tthis.fragmentStartMut.revert();\n\t\t\t\t\t\tthis.breakPoint = false;\n\t\t\t\t\t} else if (contentsEvent == 'valid-break-point') {\n\t\t\t\t\t\tthis.fragmentStartMut.commit(columnsContentMut);\n\t\t\t\t\t\tthis.layoutContext.mutations.commit(group.spanMut);\n\t\t\t\t\t\tthis.breakPoint = this.layoutContext.breakPoint;\n\t\t\t\t\t}\n\t\t\t\t\tspanFirstPass = false;\n\n\t\t\t\t} else if (recolumnize) {\n\t\t\t\t\t// The content of the columns are merged in the first column\n\t\t\t\t\tthis.layoutContext.mutations.revert();\n\t\t\t\t\tthis.fragmentStartMut.revert();\n\t\t\t\t\tcolumnsContentMut.revert();\n\t\t\t\t\tthis.breakPoint = null;\n\t\t\t\t} else if (this.breakPoint !== false) {\n\t\t\t\t\tthis.fragmentStartMut.commit(columnsContentMut);\n\t\t\t\t\tthis.layoutContext.mutations.commit(columnsContentMut);\n\t\t\t\t}\n\t\t\t} while (recolumnize);\n\n\t\t\t// TODO Duplicated code when the group has a span\n\t\t\tcolumnsContentMut.commit(group.columnsMut);\n\t\t\tgroup.columnsMut.setAttr(columnsParent, 'ps-process', 'ended');\n\t\t\t//if (!this.breakPoint) columnsParent.style.height = '';\n\t\t} else {\n\t\t\tconst contentsEvent = yield* this.columnSpanProcess(group);\n\t\t\tif (contentsEvent == 'no-break-point') {\n\t\t\t\tthis.layoutContext.mutations.revert();\n\t\t\t\tthis.breakPoint = false;\n\t\t\t} else if (contentsEvent == 'valid-break-point') {\n\t\t\t\tthis.layoutContext.mutations.commit(group.spanMut);\n\t\t\t\tthis.breakPoint = this.layoutContext.breakPoint;\n\t\t\t}\n\t\t}\n\t}\n\n\t* columnSpanProcess(group: ColumnsGroup): Process {\n\t\tlogger.addScope(`column-span`);\n\t\tconst spanFragment = this.currentFragment = new ColumnSpan();\n\t\tspanFragment.body = group.span;\n\t\tthis.source.insertBefore(spanFragment.body, this.sourceBody);\n\t\tconst top = rects.boundingScrollRect(spanFragment.body).top;\n\t\tspanFragment.body.style.height = this.columnsMaxHeight(top) + 'px';\n\t\tconst contentsEvent = yield* this.contentsProcess(spanFragment.body, this.options.parentAreas, isSubFragmentor(this) && this.parentFragmentor.layoutContext);\n\t\tspanFragment.body.style.height = '';\n\t\t// TODO More robust and generic way to support page break rules inside columns\n\t\tif (this.parentAvoidBreakTypes) {\n\t\t\tlet lastChild: Node = spanFragment.body;\n\t\t\tdo {\n\t\t\t\tif (!walk.isElement(lastChild)) break;\n\t\t\t\tif (this.parentAvoidBreakTypes.includes(getCustomProp(lastChild, 'break-after'))) {\n\t\t\t\t\tgroup.spanMut.setAttr(spanFragment.body, 'ps-break-after', 'avoid');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlastChild = walk.lastChild(lastChild, walk.isStaticNode);\n\t\t\t} while (lastChild && walk.isElement(lastChild));\n\t\t}\n\t\tlogger.removeScope();\n\t\treturn contentsEvent;\n\t}\n\n\tcreateLayoutContext(root: HTMLElement, areas: Areas, parentCtx: LayoutContext): LayoutContext {\n\t\treturn new ColumnsLayoutContext(this.source, root, areas, parentCtx);\n\t}\n}\n\nexport function createColumn(doc: Document, number: number): Column {\n\tconst column = new Column;\n\tcolumn.container = doc.createElement('ps-column');\n\tcolumn.number = number;\n\treturn column;\n}\n\nexport const columnsSubProcessor: SubProcessor = function (this: Fragmentor, ctx: SubProcessorContext): false | Promise<false | LayoutProcessResult> {\n\t// TODO check that the source is not the same as the pagination (conflict on the ps-process attribute)\n\tconst columnCount = parseColumnCount(ctx.currentElement, ctx.currentCustomStyle);\n\tif (!columnCount) return false;\n\n\tclass SubColumnizator extends Columnizator implements SubFragmentor {\n\t\tconstructor(readonly parentFragmentor: Fragmentor<any>, source: HTMLElement, options?: ColumnizatorOptions) {\n\t\t\tsuper(source, options);\n\t\t\tthis.gcpmContext = parentFragmentor.gcpmContext;\n\t\t}\n\n\t\t/*** Returns the max height constrained by the parent fragment and the element style */\n\t\tcolumnsMaxHeight(top: number): number {\n\t\t\tconst bottomOffset = this.parentFragmentor.layoutContext.bottomOffsets.get(this.source).after;\n\t\t\tlet fragmentMaxHeight = this.parentFragmentor.layoutContext.bodyBottom - bottomOffset - top;\n\t\t\tif (ctx.currentStyle.boxSizing == 'content-box') fragmentMaxHeight = rects.contentSizingHeight(ctx.currentStyle, fragmentMaxHeight);\n\t\t\treturn Math.min(super.columnsMaxHeight(top), fragmentMaxHeight);\n\t\t}\n\n\t\temit<K extends keyof ColumnizatorEvents>(event: events.Event<K, ColumnizatorEvents> | K, target?: events.EventEmitter<ColumnizatorEvents>): any {\n\t\t\tsuper.emit(event, target);\n\t\t\tconst eventObj = (typeof event == 'string' ? {type: event} : event) as events.Event<K, ColumnizatorEvents>;\n\t\t\tif (eventObj.type != 'start' && eventObj.type != 'end') this.parentFragmentor.emit(event as events.Event<keyof FragmentorEvents, FragmentorEvents>);\n\t\t}\n\t}\n\n\tconst columnizator = new SubColumnizator(this, ctx.currentElement, Object.assign(Object.create(Fragmentor.defaultOptions), {\n\t\tparentAreas: ctx.areas,\n\t\tcolumnCount\n\t}));\n\n\tcolumnizator.parentAvoidBreakTypes = this.avoidBreakTypes;\n\n\treturn columnizator.start().ended.then(() => {\n\t\tcolumnizator.columnizationMut.commit(this.layoutContext.mutations);\n\t\tif (columnizator.breakPoint) return {breakPoint: columnizator.breakPoint};\n\t\telse if (columnizator.breakPoint === false) return false;\n\t\telse return;\n\t});\n};\n\nfunction parseColumnCount(element: HTMLElement, customStyle: CSSStyleDeclaration): number {\n\tlet count = 0;\n\tconst countProp = getCustomProp(customStyle, 'column-count');\n\tif (countProp != \"auto\") count = parseInt(countProp);\n\telse {\n\t\tconst widthProp = getCustomProp(customStyle, 'column-width');\n\t\tconst elemWidth = element.clientWidth;\n\t\tif (widthProp != 'auto') {\n\t\t\tconst width = computeLength(widthProp, elemWidth);\n\t\t\tlet gapProp = getCustomProp(customStyle, 'column-gap');\n\t\t\tif (gapProp == 'normal') gapProp = '1em';\n\t\t\tconst gap = computeLength(gapProp, elemWidth);\n\n\t\t\tcount = Math.floor(elemWidth / width);\n\t\t\tif (count > 1) while (count > 1 && count * width + (gap * (count - 1)) > elemWidth) count--;\n\t\t}\n\t}\n\tif (isNaN(count) || count == 1) return 0;\n\treturn count;\n}",
    "import {ranges, walk} from './util';\nimport {logger} from \"./util\";\nimport {Fragment} from './fragments';\nimport * as valueParser from 'postcss-value-parser';\nimport {Point} from \"./util/ranges\";\n\ntype CounterData = { value: number, scope: HTMLElement, pseudoScope?: boolean };\ntype CountersData = { [counterName: string]: CounterData };\n\nexport type Counters = Map<HTMLElement, CountersData>;\n\nexport type CountersStack = {\n\t[counterName: string]: { element: Element, value: number }[]\n};\n\n\nexport type CountersValue = {\n\t[counterName: string]: number\n};\n\nexport function parseCounterValue(value: string): CountersValue {\n\tconst counters: CountersValue = {};\n\tif (value == 'none') return counters;\n\tconst vals = valueParser(value);\n\n\tconst words = vals.nodes.filter((node) => node.type == 'word');\n\tfor (let i = 0; i < words.length; i++) {\n\t\tconst name = words[i].value;\n\t\tconst value = parseInt(words[i+1].value);\n\t\ti++;\n\t\tcounters[name] = value;\n\t}\n\treturn counters;\n}\n\n\n// TODO Possible problem if a counter-reset or counter-increment exists on the documentElement\nexport function getCounterValue(element: Element, counterName: string): number {\n\tconst doc = element.ownerDocument;\n\tconst elements = walk.createWalker(doc.documentElement, walk.isElement);\n\tlet counterValue = 0;\n\telements.currentNode = element;\n\twhile (elements.currentNode != doc.documentElement) {\n\t\tlet counterReseted = false;\n\t\tconst style = getComputedStyle(elements.currentNode);\n\t\tif (style.display != 'none') {\n\t\t\tconst resets = parseCounterValue(style.counterReset);\n\t\t\tif (counterName in resets) {\n\t\t\t\tcounterValue += resets[counterName];\n\t\t\t\tcounterReseted = true;\n\t\t\t}\n\n\t\t\tconst increments = parseCounterValue(style.counterIncrement);\n\t\t\tif (counterName in increments) counterValue += increments[counterName];\n\n\t\t\tif (counterReseted) return counterValue;\n\t\t}\n\t\telements.previousNode();\n\n\t}\n\tlogger.warn(`Counter '${counterName}' without a counter-reset.`);\n\treturn counterValue;\n}\n\nexport function getPageCounterValue(pages: Fragment[], element: Element): number {\n\tlet pageBox = element;\n\twhile (pageBox && pageBox.localName != 'ps-page') pageBox = pageBox.parentElement;\n\n\tfor (let i = 0; i < pages.length; i++) {\n\t\tif (pageBox == pages[i].container) return i + 1;\n\t}\n\n\tthrow \"Page not found\";\n}\n\n// TODO When a counter-increment of a counter without scope is set on a pseudo, the counter-reset scope does not include the brothers\nexport function parseCounters(root: Element, stop: Point): CountersStack {\n\tconst counters: CountersStack = {};\n\tconst stopNode = ranges.nodeAtPoint(stop);\n\tconst docElem = root.ownerDocument.documentElement;\n\n\t// Lookup the start node\n\tlet start = root;\n\twhile (start != docElem && !start.hasAttribute('ps-counters')) start = start.parentElement;\n\tconst elements = walk.createWalker(start, walk.isElement);\n\tdo {\n\t\tif (elements.currentNode == stopNode || elements.currentNode.compareDocumentPosition(stopNode || stop.container) & Node.DOCUMENT_POSITION_PRECEDING) break;\n\t\taddElementCounters(elements.currentNode, counters, elements.currentNode == root);\n\t\tif (!elements.firstChild()) {\n\t\t\twhile (!elements.nextSibling() && elements.currentNode != start) {\n\t\t\t\tif (!elements.currentNode.hasAttribute('ps-breaked-after')) {\n\t\t\t\t\tfor (const counterName in counters) {\n\t\t\t\t\t\tconst counter = counters[counterName];\n\t\t\t\t\t\tif (counter.length && counter[counter.length - 1].element.parentNode == elements.currentNode.parentNode) {\n\t\t\t\t\t\t\tcounter.pop();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telements.parentNode();\n\t\t\t}\n\t\t}\n\t} while (elements.currentNode != start);\n\treturn counters;\n}\n\nexport function resetFromCounters(counters: CountersStack): string {\n\tlet counterReset = '';\n\tfor (const counterName in counters) {\n\t\tconst counter = counters[counterName];\n\t\tif (counter.length) counterReset += ' ' + counterName + ' ' + counter[counter.length - 1].value;\n\t}\n\treturn counterReset;\n}\n\nexport function addElementCounters(element: Element, counters: CountersStack, forceDisplay: boolean): void {\n\tconst style = getComputedStyle(element);\n\tif (forceDisplay || style.display != 'none') {\n\t\tconst resets = parseCounterValue(style.counterReset);\n\t\tfor (const counterName in resets) {\n\t\t\tlet counter = counters[counterName];\n\t\t\tif (!counter) counter = counters[counterName] = [];\n\t\t\t// A scope on on following sibling replace the current\n\t\t\tif (counter.length && counter[counter.length - 1].element.parentNode == element.parentNode) counter.pop();\n\t\t\tcounter.push({\n\t\t\t\telement: element,\n\t\t\t\tvalue: resets[counterName]\n\t\t\t});\n\t\t}\n\n\t\tconst increments = parseCounterValue(style.counterIncrement);\n\t\tfor (const counterName in increments) {\n\t\t\tlet counter = counters[counterName];\n\t\t\tif (!counter) counter = counters[counterName] = [];\n\t\t\tif (!counter.length) {\n\t\t\t\tcounter.push({\n\t\t\t\t\telement: element,\n\t\t\t\t\tvalue: 0\n\t\t\t\t});\n\t\t\t}\n\t\t\tcounter[counter.length - 1].value += increments[counterName];\n\t\t}\n\t}\n}\n",
    "import * as postcss from 'postcss';\nimport * as safeParser from \"postcss-safe-parser\";\nimport * as valueParser from \"postcss-value-parser\";\nimport {FunctionNode} from \"postcss-value-parser\";\n\nimport precss, {importFold, importUnfold, Options as PrecssOptions} from './precss';\nimport {replaceMediaType} from \"./precss\";\n\nimport {Pseudo} from \"./gcpm\";\nimport {dom, io, logger, walk} from \"./util\";\nimport {Process} from \"./process\";\nimport coreCSS from \"./css/core-css\";\nimport defaultCSS from \"./css/default-css\";\nimport {Hypher} from \"./hypher\";\n\nexport interface CssContextOptions {\n\tauthorCSS: boolean;\n\tcoreCSS: boolean;\n\tdefaultCSS: boolean;\n\tpreprocessCSS: boolean;\n\tcss: string[];\n\tdefaultPageSize: [string, string];\n\tmediaType: string;\n\thyphUri: string;\n}\n\nexport class CssContext {\n\tpreparedSheets = new Set();\n\tcoreSheet: StyleSheet = null;\n\tdefaultSheet: StyleSheet = null;\n\thyphers: { [key: string]: Hypher | false } = {};\n\n\tconstructor(readonly doc: Document, readonly options: CssContextOptions) {\n\t}\n\n\t* process(): Process {\n\t\tif (!this.options.authorCSS) removeSheets(this.doc);\n\n\t\tconst headStart = this.doc.head.firstChild;\n\t\tconst defaultPageSize = this.options.defaultPageSize || [window.innerWidth + 'px', window.innerHeight + 'px'];\n\t\tif (this.options.coreCSS) {\n\t\t\tthis.coreSheet = insertStyleSheet(this.doc, coreCSS(defaultPageSize), true, 'core-sheet', headStart);\n\t\t}\n\t\tif (this.options.defaultCSS) {\n\t\t\tthis.defaultSheet = insertStyleSheet(this.doc, defaultCSS(), true, 'default-sheet', headStart);\n\t\t}\n\n\t\tconst stylesLoaded = [];\n\t\tfor (const cssPath of this.options.css) {\n\t\t\tstylesLoaded.push(insertLinkSheet(this.doc, new URL(cssPath, this.doc.baseURI)));\n\t\t}\n\n\t\tyield (async () => {\n\t\t\tawait registerPaintModule('mark', MarkPainter);\n\t\t\tawait dom.docComplete(this.doc);\n\t\t\tawait Promise.all(stylesLoaded);\n\t\t\tif (this.options.preprocessCSS) await this.prepareSheets({defaultPageSize, mediaType: this.options.mediaType});\n\t\t})();\n\n\t\t// Ensures that the fonts are loaded\n\t\tif ('fonts' in this.doc) {\n\t\t\tconst fontsLoaded = [];\n\t\t\tfor (const font of this.doc.fonts) {\n\t\t\t\tif (font.status == 'unloaded') fontsLoaded.push(font.load());\n\t\t\t\telse if (font.status == 'loading') fontsLoaded.push(font.loaded);\n\t\t\t}\n\t\t\tif (fontsLoaded.length) yield Promise.all(fontsLoaded).catch((e) => {\n\t\t\t\tlogger.warn('A font could not be loaded.');\n\t\t\t\tlogger.error(e);\n\t\t\t});\n\t\t}\n\t}\n\n\tasync prepareSheets(preprocOptions: PrecssOptions): Promise<any[]> {\n\t\tconst preparations = [];\n\n\t\tconst sheetsToPrepare: CSSStyleSheet[] = Array.prototype.filter.call(this.doc.styleSheets, (sheet: CSSStyleSheet) => {\n\t\t\tconst cssNode = sheet.ownerNode as Element;\n\t\t\treturn !cssNode.hasAttribute('ps-excluded') && !this.preparedSheets.has(cssNode);\n\t\t});\n\n\t\tfor (const sheet of sheetsToPrepare) {\n\t\t\tconst cssElem = sheet.ownerNode as HTMLLinkElement | HTMLStyleElement;\n\t\t\tlet linkElem: HTMLLinkElement;\n\t\t\tlet transformation: Promise<postcss.Result>;\n\n\t\t\tif (cssElem instanceof HTMLLinkElement) {\n\t\t\t\tlinkElem = cssElem.cloneNode(false);\n\t\t\t\tlinkElem.setAttribute('ps-href', cssElem.getAttribute('href'));\n\t\t\t\ttransformation = io.load(linkElem.href).then((content) => transform(content, cssElem.href, preprocOptions));\n\t\t\t} else {\n\t\t\t\tlinkElem = document.createElement('link');\n\t\t\t\tif (cssElem.id) linkElem.id = cssElem.id;\n\t\t\t\tif (cssElem.media) linkElem.media = cssElem.media;\n\t\t\t\tlinkElem.type = \"text/css\";\n\t\t\t\tlinkElem.rel = \"stylesheet\";\n\t\t\t\ttransformation = transform(cssElem.textContent, this.doc.baseURI, preprocOptions) as any as Promise<postcss.Result>;\n\t\t\t}\n\n\t\t\tpreparations.push(transformation.then((result) => {\n\t\t\t\tconst blob = new Blob([result.css], {type: 'text/css'});\n\t\t\t\tlinkElem.href = URL.createObjectURL(blob);\n\t\t\t\tif (this.options.mediaType && cssElem.media) linkElem.media = replaceMediaType(cssElem.media, this.options.mediaType);\n\t\t\t\tcssElem.parentNode.replaceChild(linkElem, cssElem);\n\t\t\t\tthis.preparedSheets.add(linkElem);\n\t\t\t\treturn new Promise<void>((resolve) => {\n\t\t\t\t\tlinkElem.addEventListener('load', resolve as any as EventListenerOrEventListenerObject);\n\t\t\t\t\tlinkElem.addEventListener('error', (e) => {\n\t\t\t\t\t\tlogger.warn(e.message || `An error occured while loading '${'href' in cssElem ? cssElem.href : linkElem.href}'`);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}));\n\t\t}\n\t\treturn Promise.all(preparations);\n\t}\n\n\ttestHyphens(element: HTMLElement, style: CSSStyleDeclaration): false | Hypher | Promise<void | Hypher> {\n\t\tif (style.getPropertyValue('--ps-hyphens').trim() != 'auto') return false;\n\n\t\tlet lang = '';\n\t\tfor (let parent = element.parentElement; parent; parent = parent.parentElement) {\n\t\t\tif ((lang = parent.lang)) break;\n\t\t}\n\n\t\tif (!lang) return false;\n\t\tconst locale = new Intl.Locale(lang);\n\t\tlang = locale.language;\n\t\tif (locale.language == \"en\") {\n\t\t\t// TODO better selection based on the region \"en-IN\" => \"en-gb\" ?\n\t\t\tif (locale.region == \"GB\") lang = \"en-gb\";\n\t\t\telse lang = \"en-us\";\n\t\t}\n\n\t\tconst hypher = this.hyphers[lang];\n\t\tif (hypher !== undefined) return hypher;\n\t\telse {\n\t\t\tif (!this.options.hyphUri) logger.warn(`Hyphenation dictionaries URL (hyphUri) not defined.`);\n\t\t\telse return io.load(`${this.options.hyphUri}/${lang}.json`)\n\t\t\t\t.then((json) => {\n\t\t\t\t\tconst hypher = new Hypher(JSON.parse(json));\n\t\t\t\t\tthis.hyphers[lang] = hypher;\n\t\t\t\t\treturn hypher;\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.hyphers[lang] = false;\n\t\t\t\t\tlogger.warn(`Failed to load the hyphenation patterns for language ${lang}.`);\n\t\t\t\t});\n\n\t\t}\n\t}\n\n\thyphenate(element: HTMLElement, hypher: Hypher): void {\n\t\tfor (const child of element.childNodes) {\n\t\t\tif (walk.isText(child)) {\n\t\t\t\tchild.nodeValue = hypher.hyphenateText(child.nodeValue);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport const cssContexts = new Map<Document, CssContext>();\n\nexport type Media = 'screen' | 'print' | 'projection';\n\nfunction transform(cssText: string, baseURI: string, preprocOptions: PrecssOptions): postcss.LazyResult {\n\tconst plugins = preprocOptions ? [precss(preprocOptions)] : [];\n\n\tconst options = {from: baseURI, parser: safeParser};\n\tconst processor = postcss().use(importUnfold(options));\n\tfor (const plugin of plugins) processor.use(plugin);\n\tif (preprocOptions) processor.use(importFold);\n\n\treturn processor.process(cssText, options);\n}\n\n\nexport function removeSheets(doc: Document): void {\n\tconst nodes = doc.querySelectorAll('style,link[rel=stylesheet]');\n\tfor (const node of nodes) node.remove();\n}\n\nexport function insertStyleSheet(doc: Document, sheet: string, excluded?: boolean, id?: string, before?: Node): StyleSheet {\n\tconst node = doc.createElement('style');\n\tnode.textContent = sheet;\n\n\tif (id) node.id = id;\n\tif (excluded) node.setAttribute('ps-excluded', '');\n\n\tdoc.head.insertBefore(node, before);\n\n\treturn node.sheet;\n}\n\nexport function insertLinkSheet(doc: Document, url: string | URL, excluded?: boolean, id?: string, before?: Node): Promise<StyleSheet> {\n\tconst node = doc.createElement('link');\n\tnode.rel = 'stylesheet';\n\tnode.type = 'text/css';\n\tnode.href = url.toString();\n\n\tif (id) node.id = id;\n\tif (excluded) node.setAttribute('ps-excluded', '');\n\n\treturn new Promise((resolve, reject) => {\n\t\tnode.addEventListener('load', () => {\n\t\t\tresolve(node.sheet);\n\t\t});\n\t\tnode.addEventListener('error', () => {\n\t\t\treject(node);\n\t\t});\n\t\tdoc.head.insertBefore(node, before);\n\t});\n}\n\nexport function getCustomStyle(element: Element, pseudo?: Pseudo): CSSStyleDeclaration {\n\treturn getComputedStyle(element, pseudo ? '::' + pseudo : '::backdrop');\n}\n\nexport function getCustomProp(eltOrStyle: Element | CSSStyleDeclaration, propName: string, pseudo?: Pseudo): string {\n\tif (dom.isElement(eltOrStyle)) eltOrStyle = getCustomStyle(eltOrStyle, pseudo);\n\treturn eltOrStyle.getPropertyValue(`--ps-${propName}`).trim();\n}\n\nexport function getCustomPluginProp(eltOrStyle: Element | CSSStyleDeclaration, propName: string, pseudo?: Pseudo): string {\n\tif (dom.isElement(eltOrStyle)) eltOrStyle = getCustomStyle(eltOrStyle, pseudo);\n\treturn eltOrStyle.getPropertyValue(`--psp-${propName}`).trim();\n}\n\nexport function computeLength(strLength: string, percentBase: number | (() => number)): number {\n\tlet value = 0;\n\ttry {\n\t\tvalue = parseFloat(strLength);\n\t\tif (!value) return 0;\n\t\tconst length = CSSUnitValue.parse(strLength);\n\t\tif (length.unit == 'percent') {\n\t\t\tif (typeof percentBase == 'function') percentBase = percentBase();\n\t\t\treturn percentBase * value / 100;\n\t\t} else return length.to('px').value;\n\t} catch (e) {\n\t\tconst length = strLength.trim().match(/([\\d.]+)(px|cm|mm|in|pt|pc|%)$/);\n\t\tif (length) {\n\t\t\tconst [, , unit] = length;\n\t\t\tif (unit == '%') {\n\t\t\t\tif (typeof percentBase == 'function') percentBase = percentBase();\n\t\t\t\treturn percentBase * value / 100;\n\t\t\t} else {\n\t\t\t\tif (unit == 'px') return value;\n\t\t\t\telse {\n\t\t\t\t\tconst inValue = value * 96;\n\t\t\t\t\tswitch (unit) {\n\t\t\t\t\tcase 'in':\n\t\t\t\t\t\treturn inValue;\n\t\t\t\t\tcase 'cm':\n\t\t\t\t\t\treturn inValue / 2.54;\n\t\t\t\t\tcase 'mm':\n\t\t\t\t\t\treturn inValue / 25.4;\n\t\t\t\t\tcase 'pt':\n\t\t\t\t\t\treturn inValue / 72.0;\n\t\t\t\t\tcase 'pc':\n\t\t\t\t\t\treturn inValue / 6;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tlogger.warn(`Unable to compute the length '${strLength}'.`);\n\t\t}\n\t}\n}\n\nexport function computeMinOrMaxLength(minMaxValue: string, percentBase: number, noneValue: number): number {\n\tif (minMaxValue == 'none') return noneValue;\n\telse if (minMaxValue.match(/^\\d/)) return computeLength(minMaxValue, percentBase);\n\telse return NaN;\n}\n\nexport function addStyleImagesToLoad(element: Element, set: Set<string>): void {\n\tconst bkgImageProp = getComputedStyle(element).backgroundImage;\n\tif (bkgImageProp != \"none\") {\n\t\tconst bkgImageValue = valueParser(bkgImageProp);\n\t\tfor (const bkgImageFn of bkgImageValue.nodes.filter((node) => node.type == \"function\") as FunctionNode[]) {\n\t\t\tif (bkgImageFn.value == \"url\") {\n\t\t\t\tconst bkgImageUrl = bkgImageFn.nodes[0].value;\n\t\t\t\tset.add(bkgImageUrl);\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass MarkPainter {\n\tstatic get inputProperties(): string[] {\n\t\treturn ['--ps-bleed-size', '--ps-marks'];\n\t}\n\n\t/* tslint:disable:variable-name */\n\tpaint(ctx: CanvasRenderingContext2D, {width, height}: { width: number, height: number }, styleMap: Map<string, string[]>): void {\n\t\tconst marksProp = styleMap.get('--ps-marks')[0];\n\t\tif (!marksProp || marksProp == 'none') return;\n\n\t\tconst bleedProp = styleMap.get('--ps-bleed-size')[0];\n\t\tlet bleedLength;\n\t\tif ('parse' in CSSUnitValue) bleedLength = CSSUnitValue.parse(bleedProp);\n\t\telse {\n\t\t\tconst length = bleedProp.match(/([\\d.]+)(px|cm|mm|in|pt|pc)$/);\n\t\t\tbleedLength = new (CSSUnitValue as { new(val: number, unit: string): CSSUnitValue })(parseFloat(length[1]), length[2]);\n\t\t}\n\n\t\tconst bleed = bleedLength.to('px').value;\n\n\t\tctx.lineWidth = .5;\n\t\tconst bleed_1_3 = bleed / 3;\n\n\t\tif (marksProp.includes('crop')) {\n\t\t\tconst bleed_2_3 = bleed * 2 / 3;\n\t\t\tctx.beginPath();\n\n\t\t\t/* top-left crop */\n\t\t\tctx.moveTo(bleed_1_3, bleed);\n\t\t\tctx.lineTo(bleed_2_3, bleed);\n\t\t\tctx.moveTo(bleed, bleed_1_3);\n\t\t\tctx.lineTo(bleed, bleed_2_3);\n\n\t\t\t/* top-right crop */\n\t\t\tctx.moveTo(width - bleed, bleed_1_3);\n\t\t\tctx.lineTo(width - bleed, bleed_2_3);\n\t\t\tctx.moveTo(width - bleed_2_3, bleed);\n\t\t\tctx.lineTo(width - bleed_1_3, bleed);\n\n\t\t\t/* bottom-right crop */\n\t\t\tctx.moveTo(width - bleed_1_3, height - bleed);\n\t\t\tctx.lineTo(width - bleed_2_3, height - bleed);\n\t\t\tctx.moveTo(width - bleed, height - bleed_1_3);\n\t\t\tctx.lineTo(width - bleed, height - bleed_2_3);\n\n\t\t\t/* bottom-left crop */\n\t\t\tctx.moveTo(bleed, height - bleed_1_3);\n\t\t\tctx.lineTo(bleed, height - bleed_2_3);\n\t\t\tctx.moveTo(bleed_1_3, height - bleed);\n\t\t\tctx.lineTo(bleed_2_3, height - bleed);\n\n\t\t\tctx.stroke();\n\t\t}\n\n\t\tif (marksProp.includes('cross')) {\n\t\t\tconst width_1_2 = width / 2;\n\t\t\tconst height_1_2 = height / 2;\n\t\t\tconst bleed_1_2 = bleed / 2;\n\t\t\tconst bleed_1_6 = bleed / 6;\n\n\t\t\t/* top circle */\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(width_1_2, bleed_1_2, bleed_1_6, 0, Math.PI * 2);\n\t\t\tctx.stroke();\n\n\t\t\t/* right circle */\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(width - bleed_1_2, height / 2, bleed_1_6, 0, Math.PI * 2);\n\t\t\tctx.stroke();\n\n\t\t\t/* bottom circle */\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(width / 2, height - bleed_1_2, bleed_1_6, 0, Math.PI * 2);\n\t\t\tctx.stroke();\n\n\t\t\t/* left circle */\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(bleed_1_2, height / 2, bleed_1_6, 0, Math.PI * 2);\n\t\t\tctx.stroke();\n\n\t\t\tctx.beginPath();\n\t\t\t/* top cross lines */\n\t\t\tctx.moveTo(width_1_2 - bleed_1_3, bleed_1_2);\n\t\t\tctx.lineTo(width_1_2 + bleed_1_3, bleed_1_2);\n\t\t\tctx.moveTo(width_1_2, bleed_1_2 - bleed_1_3);\n\t\t\tctx.lineTo(width_1_2, bleed_1_2 + bleed_1_3);\n\n\t\t\t/* right cross lines */\n\t\t\tctx.moveTo(width - bleed_1_2 - bleed_1_3, height_1_2);\n\t\t\tctx.lineTo(width - bleed_1_2 + bleed_1_3, height_1_2);\n\t\t\tctx.moveTo(width - bleed_1_2, height_1_2 - bleed_1_3);\n\t\t\tctx.lineTo(width - bleed_1_2, height_1_2 + bleed_1_3);\n\n\t\t\t/* bottom cross lines */\n\t\t\tctx.moveTo(width_1_2 - bleed_1_3, height - bleed_1_2);\n\t\t\tctx.lineTo(width_1_2 + bleed_1_3, height - bleed_1_2);\n\t\t\tctx.moveTo(width_1_2, height - bleed_1_2 - bleed_1_3);\n\t\t\tctx.lineTo(width_1_2, height - bleed_1_2 + bleed_1_3);\n\n\t\t\t/* left cross lines */\n\t\t\tctx.moveTo(bleed_1_2 - bleed_1_3, height_1_2);\n\t\t\tctx.lineTo(bleed_1_2 + bleed_1_3, height_1_2);\n\t\t\tctx.moveTo(bleed_1_2, height_1_2 - bleed_1_3);\n\t\t\tctx.lineTo(bleed_1_2, height_1_2 + bleed_1_3);\n\n\t\t\tctx.stroke();\n\t\t}\n\t}\n}\n\nfunction registerPaintModule(name: string, klass: { new(): any }): Promise<void> {\n\tif (!('paintWorklet' in CSS)) return;\n\tconst module = `registerPaint('${name}', ${klass.toString()})`;\n\tconst blob = new Blob([module], {type: 'application/javascript'});\n\treturn (CSS as any).paintWorklet.addModule(URL.createObjectURL(blob));\n}\n\n",
    "// noinspection CssUnresolvedCustomProperty,CssInvalidFunction,CssInvalidPropertyValue\n\nexport default (defaultPageSize: [string, string]): string => /* language=CSS */ `\n\t*::backdrop {\n\t\t--ps-size: auto;\n\t\t--ps-page: auto;\n\t\t--ps-break-before: auto;\n\t\t--ps-break-after: auto;\n\t\t--ps-break-inside: auto;\n\t\t--ps-float-display: block;\n\t\t--ps-float-policy: auto;\n\t\t--ps-bookmark-level: none;\n\t\t--ps-bookmark-label: content(text);\n\t\t--ps-bookmark-state: open;\n\t\t--ps-column-count: auto;\n\t\t--ps-column-width: auto;\n\t\t--ps-column-gap: normal;\n\t\t--ps-column-fill: balance;\n\t\t--ps-column-rule-style: none;\n\t\t--ps-column-rule-width: medium;\n\t\t--ps-column-rule-color: currentcolor;\n\t\t--ps-repeat-thead: repeat;\n\t\t--ps-box-decoration-break: slice;\n\t\t--ps-box-remaining-extent: auto;\n\t\t--ps-margin-break: auto;\n\t\t--ps-areas: auto;\n\t\t--ps-column-span-break: element;\n\t}\n\n\t:root {\n\t\t/* Firefox does not support orphans and widows, we use CSS variables for them */\n\t\t--ps-orphans: 2;\n\t\t--ps-widows: 2;\n\t\t/* The defaut hyphen character of Chrome is the hyphen-minus (U+002D). PS uses the hyphen (U+2010) to allow detection. */\n\t\t-webkit-hyphenate-character: '\\\\2010';\n\t\ttext-rendering: optimizeLegibility;\n\t}\n\n\tps-page {\n\t\tdisplay: block;\n\n\t\tcounter-increment: page;\n\t\tbox-sizing: border-box;\n\t\tpage-break-before: always;\n\n\t\tposition: relative;\n\t\toverflow: clip;\n\n\t\t--ps-page-width: ${defaultPageSize[0]};\n\t\t--ps-page-height: ${defaultPageSize[1]};\n\t\twidth: var(--ps-page-width);\n\t\theight: var(--ps-page-height);\n\t\t\n\t\t--ps-bleed: auto;\n\t\t--ps-marks: none;\n\t\tpadding-top: var(--ps-page-margin-top);\n\t\tpadding-right: var(--ps-page-margin-right);\n\t\tpadding-bottom: var(--ps-page-margin-bottom);\n\t\tpadding-left: var(--ps-page-margin-left);\n\t\tmargin-right: auto;\n\t}\n\n\tps-page[ps-bleed] {\n\t\tborder: solid var(--ps-bleed-size, 0) transparent;\n\t\toverflow-clip-margin: var(--ps-bleed-size);\n\t\twidth: calc(var(--ps-page-width) + var(--ps-bleed-size) + var(--ps-bleed-size));\n\t\theight: calc(var(--ps-page-height) + var(--ps-bleed-size) + var(--ps-bleed-size));\n\t}\n\n\tps-page[ps-bleed]:not([ps-bleed=\"none\"])::before {\n\t\tcontent: \"\";\n\t\tposition: absolute;\n\t\t--ps-bleed-inv: calc(var(--ps-bleed-size) * -1);\n\t\ttop: var(--ps-bleed-inv);\n\t\tright: var(--ps-bleed-inv);\n\t\tbottom: var(--ps-bleed-inv);\n\t\tleft: var(--ps-bleed-inv);\n\n\t\tbackground-image: paint(mark);\n\t\tbackground-repeat: no-repeat;\n\t}\n\n\t@page {\n\t\tmargin: 0;\n\t}\n\n\tps-page:first-of-type {\n\t\tpage-break-before: auto;\n\t\tcounter-reset: page 0 footnote 0;\n\t}\n\n\tps-page-area {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\theight: 100%;\n\t\tbox-sizing: border-box;\n\t}\n\n\tps-area {\n\t\toverflow: hidden;\n\t}\n\n\tps-area[ps-name=footnotes] {\n\t\toverflow: visible;\n\t}\n\n\tps-area:empty {\n\t\tdisplay: none;\n\t}\n\n\t[ps-page-body] {\n\t\tdisplay: block;\n\t\tflex: 1 1 0;\n\t\tposition: relative;\n\t\t/* TODO doubts about this margin, but consistent with PrinceXML */\n\t\tmargin: 0;\n\t\torder: 0;\n\t\tmin-height: 0;\n\t}\n\n\tps-page[ps-processing] > ps-margin {\n\t\tdisplay: none;\n\t}\n\n\tps-page[ps-processing] > ps-page-area > [ps-page-body] {\n\t\t/*overflow: hidden;*/\n\t}\n\n\tps-margin {\n\t\tdisplay: flex;\n\t\tposition: absolute;\n\t\tz-index: 1;\n\t\tbox-sizing: border-box;\n\t}\n\n\tps-margin-box {\n\t\tdisplay: flex;\n\t\tbox-sizing: border-box;\n\t\tflex: 1 1 auto;\n\t}\n\n\tps-margin-box::before {\n\t\tdisplay: block;\n\t}\n\n\tps-margin-box[ps-name=top-left-corner] {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: var(--ps-page-margin-left);\n\t\theight: var(--ps-page-margin-top);\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\ttext-align: right;\n\t}\n\n\tps-margin[ps-side=top] {\n\t\ttop: 0;\n\t\tleft: var(--ps-page-margin-left);\n\t\tright: var(--ps-page-margin-right);\n\t\theight: var(--ps-page-margin-top);\n\t}\n\n\tps-margin-box[ps-name=top-right-corner] {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tright: 0;\n\t\twidth: var(--ps-page-margin-right);\n\t\theight: var(--ps-page-margin-top);\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\ttext-align: left;\n\t}\n\n\tps-margin[ps-side=right] {\n\t\tright: 0;\n\t\ttop: var(--ps-page-margin-top);\n\t\tbottom: var(--ps-page-margin-bottom);\n\t\twidth: var(--ps-page-margin-right);\n\t\tflex-direction: column;\n\t}\n\n\tps-margin-box[ps-name=bottom-right-corner] {\n\t\tposition: absolute;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\theight: var(--ps-page-margin-bottom);\n\t\twidth: var(--ps-page-margin-right);\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\ttext-align: left;\n\t}\n\n\tps-margin[ps-side=bottom] {\n\t\tbottom: 0;\n\t\tright: var(--ps-page-margin-right);\n\t\tleft: var(--ps-page-margin-left);\n\t\theight: var(--ps-page-margin-bottom);\n\t}\n\n\tps-margin-box[ps-name=bottom-left-corner] {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\tbottom: 0;\n\t\theight: var(--ps-page-margin-bottom);\n\t\twidth: var(--ps-page-margin-left);\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\ttext-align: right;\n\t}\n\n\tps-margin[ps-side=left] {\n\t\tleft: 0;\n\t\ttop: var(--ps-page-margin-top);\n\t\tbottom: var(--ps-page-margin-bottom);\n\t\twidth: var(--ps-page-margin-left);\n\t\tflex-direction: column;\n\t}\n\n\t/* cf. http://www.w3.org/TR/css3-page/#margin-values */\n\tps-margin-box[ps-name=top-left],\n\tps-margin-box[ps-name=bottom-left] {\n\t\talign-items: center;\n\t\tjustify-content: flex-start;\n\t\ttext-align: left;\n\t}\n\n\tps-margin-box[ps-name=top-center],\n\tps-margin-box[ps-name=bottom-center] {\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\n\tps-margin-box[ps-name=top-right],\n\tps-margin-box[ps-name=bottom-right] {\n\t\talign-items: center;\n\t\tjustify-content: flex-end;\n\t\ttext-align: right;\n\t}\n\n\tps-margin-box[ps-name=right-top],\n\tps-margin-box[ps-name=left-top] {\n\t\talign-items: flex-start;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\n\tps-margin-box[ps-name=right-middle],\n\tps-margin-box[ps-name=left-middle] {\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\n\tps-margin-box[ps-name=right-bottom],\n\tps-margin-box[ps-name=left-bottom] {\n\t\talign-items: flex-end;\n\t\tjustify-content: center;\n\t\ttext-align: center;\n\t}\n\n\t[ps-float-base] {\n\t\tdisplay: none !important;\n\t}\n\n\t[ps-float-call] {\n\t\tcolor: inherit;\n\t\ttext-decoration: inherit;\n\t\tunicode-bidi: isolate;\n\t}\n\t\n\t/* cf https://drafts.csswg.org/css-gcpm/#float-call */\n\t[ps-float-display='block'] {\n\t\tdisplay: list-item;\n\t\tlist-style-position: inside;\n\t\tlist-style-type: none;\n\t}\n\n\t/* TODO */\n\t[ps-float-display='inline'] {\n\t}\n\n\t[ps-float-display='compact'] {\n\t\tdisplay: inline-flex;\n\t}\n\n  [ps-float-call], [ps-float-call]::before {\n\t  all: unset;\n  }\n\n  ps-bookmarks {\n\t\tdisplay: none;\n\t}\n\n\t[ps-running] {\n\t\tdisplay: none !important;\n\t}\n\n\t[ps-breaked-before] {\n\t\tcounter-increment: none !important;\n\t\ttext-indent: 0;\n\t}\n\n\t[ps-breaked-before]:not([ps-box-decoration-break=clone]) {\n\t\tpadding-top: 0 !important;\n\t\tborder-top: none !important;\n\t\tborder-top-left-radius: 0 !important;\n\t\tborder-top-right-radius: 0 !important;\n\t}\n\n\t[ps-breaked-after]:not([ps-box-decoration-break=clone]) {\n\t\tpadding-bottom: 0 !important;\n\t\tborder-bottom: none !important;\n\t\tborder-bottom-left-radius: 0 !important;\n\t\tborder-bottom-right-radius: 0 !important;\n\t}\n\n\t[ps-margin-break-before=discard] {\n\t\tmargin-top: 0 !important;\n\t}\n\n\t[ps-breaked-after]:not([ps-margin-break-after=keep]) {\n\t\tmargin-bottom: 0 !important;\n\t}\n\n\t/* TODO Is there some case where a counter-reset in not overridden ? */\n\t/*\n\t[ps-breaked-before]:not([ps-counters]) {\n\t  counter-reset: none !important;\n\t  counter-increment: none !important;\n\t}\n\t*/\n\n\tli[ps-breaked-before] {\n\t\tlist-style-type: none !important;\n\t\tlist-style-image: none !important;\n\t}\n\n\t[ps-breaked-before]::before {\n\t\tcontent: normal !important;\n\t}\n\n\t[ps-breaked-after]::after {\n\t\tcontent: normal !important;\n\t}\n\n\t[ps-row=table-row] > *[ps-breaked-before] {\n\t\tvertical-align: top;\n\t}\n\n\t[ps-row=table-row] > *[ps-breaked-after]:not([ps-empty-after]) {\n\t\tvertical-align: bottom;\n\t}\n\n\t[ps-row=table-row] > *[ps-breaked-after][ps-breaked-before] {\n\t\tvertical-align: middle;\n\t}\n\n\t/*\n\ttable::first-letter {\n\t  --ps-box-decoration-break: clone;\n\t}\n\ttd::first-letter, td *::first-letter  {\n\t  --ps-box-decoration-break: clone;\n\t  --ps-margin-break: keep;\n\t}*/\n\n\tps-leader {\n\t\t-moz-user-select: none;\n\t\t-ms-user-select: none;\n\t\t-webkit-user-select: none;\n\t\tdirection: rtl;\n\t\ttext-align: right;\n\t\twhite-space: pre;\n\t\tdisplay: inline-block;\n\t\tposition: relative;\n\t}\n\n\tps-leader[ps-direction=ltr] {\n\t\tdirection: ltr;\n\t\ttext-align: left;\n\t}\n\n\tps-leader-end {\n\t\tvisibility: hidden;\n\t}\n\n\t[ps-columns] {\n\t}\n\n\tps-columns {\n\t\tdisplay: flex;\n\t}\n\n\tps-column {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tflex: 1;\n\t\tmin-width: 0;\n\t}\n\n\tps-column-body {\n\t\tdisplay: block;\n\t}\n\n\tps-column > ps-column-body {\n\t\tflex: 1 1 0;\n\t\tmin-height: 0;\n\t}\n\n\tps-column-gap {\n\t\tmargin: 0 calc(var(--ps-gap) / 2);\n\t\tposition: relative;\n\t}\n\n\tps-column-rule {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tbottom: 0;\n\t\tborder-left: var(--ps-rule);\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, 0);\n\t}\n\n\n\tps-columns[ps-process=ended] > ps-column > ps-column-body {\n\t\tmin-height: auto;\n\t}\n\n\t/* TODO Chrome bug report? The display property of noscript tags is 'inline' */\n\tnoscript {\n\t\tdisplay: none;\n\t}\n\n\t/* Decoration are cloned by default on cells in the case of a repeated thead */\n\ttd::backdrop {\n\t\t--ps-box-decoration-break: clone;\n\t}\n`;\n",
    "// noinspection CssUnresolvedCustomProperty,CssInvalidFunction\n\n/*\n@page {\n\t-ps-areas: footnotes;\n\tmargin: 10%;\n}\n\n::-ps-call {\n\tvertical-align: super;\n\tfont-size: 60%;\n}\n\n::-ps-call::before {\n\tcontent: target-counter(attr(href), -ps-floats);\n\tcontent: \"\";\n}\n\n::-ps-marker::before {\n   content: counter(-ps-floats) \".\\A0\";\n}\n\nh1 { bookmark-level: 1 }\nh2 { bookmark-level: 2 }\nh3 { bookmark-level: 3 }\nh4 { bookmark-level: 4 }\nh5 { bookmark-level: 5 }\nh6 { bookmark-level: 6 }\n\nh1, h2, h3, h4, h5, h6 {\n\tbreak-after: avoid;\n}\n\nbody[ps-process] {\n\tmargin: 0;\n}\n\n[ps-break-before='avoid'] {\n\tbreak-after: avoid;\n}\n\n[ps-break-after='avoid'] {\n\tbreak-after: avoid;\n}\n\n[ps-break-before='always'] {\n\tbreak-after: always;\n}\n\n[ps-break-after='always'] {\n\tbreak-after: always;\n}\n\n[ps-break-inside='avoid'] {\n\tbreak-inside: avoid;\n}\n */\nexport default (): string => /* language=CSS */ `\n\tps-page {\n\t  --ps-page-margin-top: calc(var(--ps-page-width) * 10 / 100);\n\t\t--ps-page-margin-right: calc(var(--ps-page-width) * 10 / 100);\n\t\t--ps-page-margin-bottom: calc(var(--ps-page-width) * 10 / 100);\n\t\t--ps-page-margin-left: calc(var(--ps-page-width) * 10 / 100);\n\t}\n\t\n\tps-page::backdrop {\n\t\t--ps-areas: footnotes;\n\t}\n\n\t[ps-float-call][ps-float-area=footnotes] {\n\t\tvertical-align: super;\n\t\tfont-size: 60%;\n\t}\n\n\t[ps-float-call][ps-float-area=footnotes]::before {\n\t\tcontent: var(--ps-before-val-0, \"\");\n\t\t--ps-before-vals: target-counter(attr(href), footnote);\n\t}\n\n  ps-area[ps-name='footnotes'] > [ps-float] {\n  \tcounter-increment: footnote;\n  }\n  \n  [ps-float=footnotes][ps-float-display=block]::marker, [ps-float=footnotes]:not([ps-float-display=block])::before {\n\t\tcontent: counter(footnote) \".\\\\A0\";\n\t}\n\n\th1::backdrop { --ps-bookmark-level: 1 }\n\th2::backdrop { --ps-bookmark-level: 2 }\n\th3::backdrop { --ps-bookmark-level: 3 }\n\th4::backdrop { --ps-bookmark-level: 4 }\n\th5::backdrop { --ps-bookmark-level: 5 }\n\th6::backdrop { --ps-bookmark-level: 6 }\n\n\th1::backdrop, h2::backdrop, h3::backdrop, h4::backdrop, h5::backdrop, h6::backdrop {\n\t\t--ps-break-after: avoid }\n\n\tbody[ps-process] {\n\t\tmargin: 0;\n\t}\n\n\t[ps-break-before='avoid']::backdrop {\n\t\t--ps-break-after: avoid }\n\t\t\n\t[ps-break-after='avoid']::backdrop {\n\t\t--ps-break-after: avoid }\n\t\t\n\t[ps-break-before='always']::backdrop {\n\t\t--ps-break-after: always }\n\n\t[ps-break-after='always']::backdrop {\n\t\t--ps-break-after: always }\n\n\t[ps-break-inside='avoid'] {\n\t\t-ps-break-inside: avoid;\n\t}\n`;\n",
    "import {ranges, walk} from \"./util\";\nimport {getCustomProp, getCustomStyle} from \"./css\";\n\nexport type ForcedBreakType = 'always' | 'page' | 'column' | 'left' | 'right' | 'recto' | 'verso' | '-ps-column-span';\n\nexport interface Flow {\n\trange: Range;\n\tpageName: string;\n\tpageGroupStart: boolean;\n\tbreakType: ForcedBreakType;\n\tmaxTextLength: boolean;\n}\n\n/** Iterate over block elements except inner SVG elements */\nexport const flowPredicate = walk.predicate(walk.isElement, walk.isStatic, walk.displayAsBlock, (node) => {\n\treturn (node as SVGElement).ownerSVGElement == null;\n});\n\n/**\n * Iterator of continuous flow\n *\n * A continuous flow is a range of contents not interrupted by forced page breaks.\n */\nexport class FlowIterator implements Iterable<Flow> {\n\telements: walk.TypedTreeWalker<Element>;\n\n\tremaining: Range;\n\n\tforcedBreakTypes: ForcedBreakType[];\n\n\tnextBreakType: ForcedBreakType;\n\n\tnextPageGroupStart: boolean;\n\n\tmaxTextLength: number;\n\n\tresetOnNext = false;\n\n\tcolumnSpanBreak: 'box' | 'element' = 'element';\n\n\tpageNames: string[];\n\n\t/**\n\t * ContinuousFlowIterator constructor\n\t * @param root              The root element to parse\n\t * @param forcedBreakTypes  List of values to use as forced break\n\t * @param maxTextLength\n\t * @param firstBreakType    Type of the break, usefull on repagination\n\t */\n\tconstructor(root: Element, forcedBreakTypes: ForcedBreakType[], maxTextLength = 0, firstBreakType?: ForcedBreakType) {\n\t\tthis.elements = walk.createWalker(root, flowPredicate);\n\t\tthis.remaining = root.ownerDocument.createRange();\n\t\tthis.forcedBreakTypes = forcedBreakTypes;\n\t\tthis.nextBreakType = firstBreakType;\n\t\tthis.nextPageGroupStart = false;\n\t\tthis.maxTextLength = maxTextLength;\n\t\tthis.reset();\n\t}\n\n\n\n\t// Used by for..of\n\t[Symbol.iterator](): Iterator<Flow> {\n\t\tconst self = this;\n\t\treturn {\n\t\t\tnext: function (): IteratorResult<Flow> {\n\t\t\t\tconst flow = self.next();\n\t\t\t\treturn {done: !flow, value: flow};\n\t\t\t}\n\t\t};\n\t}\n\n\treset(): void {\n\t\tthis.elements.currentNode = this.elements.root;\n\t\tthis.elements.nextNode();\n\t\tthis.remaining.selectNodeContents(this.elements.root);\n\t\tthis.pageNames = [ '' ];\n\t}\n\n\n\t/**\n\t * Iterate to the next page break start\n\t */\n\tnext(): Flow {\n\t\tif (this.resetOnNext) {\n\t\t\tthis.reset();\n\t\t\tthis.resetOnNext = false;\n\t\t}\n\t\tlet textLength = 0;\n\t\tif (this.remaining.collapsed) return null;\n\n\t\tlet forcedBreakAfter: ForcedBreakType = null;\n\n\t\tconst flow: Flow = {\n\t\t\trange: null,\n\t\t\tpageName: null,\n\t\t\tpageGroupStart: this.nextPageGroupStart,\n\t\t\tbreakType: this.nextBreakType,\n\t\t\tmaxTextLength: false\n\t\t};\n\t\tthis.nextBreakType = null;\n\t\tthis.nextPageGroupStart = false;\n\n\t\tconst startNode = this.elements.currentNode;\n\t\tlet boxRoot = startNode;\n\t\tlet inTable = false;\n\n\t\twhile (!flow.range) {\n\t\t\tconst currentElement = this.elements.currentNode as HTMLElement;\n\t\t\tconst customStyle = getCustomStyle(currentElement);\n\t\t\tconst stylePageName = getCustomProp(customStyle, 'page');\n\t\t\tlet newPageName = false;\n\t\t\tlet elementPageName = stylePageName;\n\t\t\tif (elementPageName == 'auto') elementPageName = this.pageNames[this.pageNames.length - 1];\n\t\t\telse newPageName = elementPageName != flow.pageName;\n\t\t\tthis.pageNames.push(elementPageName);\n\n\t\t\tif (currentElement instanceof HTMLTableElement) inTable = true;\n\n\t\t\tconst columnSpan = getCustomProp(customStyle, 'column-span') == 'all';\n\t\t\tconst breakBefore = columnSpan ? '-ps-column-span' : getCustomProp(currentElement, 'break-before') as ForcedBreakType;\n\n\t\t\tif (currentElement == startNode || (boxRoot == startNode && !walk.previousSibling(currentElement, walk.isStaticNode))) {\n\t\t\t\t// First static descendants\n\t\t\t\tflow.pageName = elementPageName;\n\t\t\t\tif (breakBefore && this.forcedBreakTypes.includes(breakBefore)) flow.breakType = breakBefore;\n\t\t\t\tif (!flow.pageGroupStart && newPageName && stylePageName != \"auto\") flow.pageGroupStart = true;\n\t\t\t} else {\n\t\t\t\tconst forcedBreakBefore = this.forcedBreakTypes.includes(breakBefore) && breakBefore;\n\n\t\t\t\tconst breakOnElement = columnSpan && this.columnSpanBreak == 'element';\n\t\t\t\tif (forcedBreakBefore || forcedBreakAfter || newPageName) {\n\t\t\t\t\tthis.nextBreakType = forcedBreakBefore || forcedBreakAfter;\n\t\t\t\t\tthis.nextPageGroupStart = newPageName || ((forcedBreakBefore || forcedBreakAfter) && stylePageName != \"auto\");\n\t\t\t\t\tflow.range = ranges.breakRangeBefore(this.remaining, breakOnElement ? currentElement : boxRoot);\n\t\t\t\t\tforcedBreakAfter = null;\n\t\t\t\t\tthis.pageNames.pop();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!this.elements.firstChild()) {\n\t\t\t\tthis.pageNames.pop();\n\n\t\t\t\tif (this.maxTextLength && currentElement instanceof HTMLElement) {\n\t\t\t\t\ttextLength += currentElement.innerText.length;\n\n\t\t\t\t\t// Avoid a cut inside a table to preserve his integrity\n\t\t\t\t\tif (textLength > this.maxTextLength && !inTable) {\n\t\t\t\t\t\tflow.range = ranges.breakRangeAfter(this.remaining, this.elements.currentNode);\n\t\t\t\t\t\tflow.maxTextLength = true;\n\t\t\t\t\t\tthis.resetOnNext = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!flow.range) {\n\t\t\t\t\tconst breakAfter = this._checkBreakAfter(currentElement, flow, customStyle);\n\t\t\t\t\tif (!flow.range && breakAfter) forcedBreakAfter = breakAfter;\n\t\t\t\t}\n\n\t\t\t\tif (!flow.range) while (!this.elements.nextSibling()) {\n\t\t\t\t\tthis.pageNames.pop();\n\n\t\t\t\t\tif (this.elements.currentNode.parentNode instanceof HTMLTableElement) inTable = false;\n\t\t\t\t\t// parentNode can be null if the root has display: none\n\t\t\t\t\tif (!this.elements.parentNode() || this.elements.currentNode == this.elements.root) {\n\t\t\t\t\t\tflow.range = ranges.breakRangeAfter(this.remaining, this.elements.root.lastChild);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (!forcedBreakAfter) {\n\t\t\t\t\t\t// Checks the break-after on ancestors\n\t\t\t\t\t\tconst breakAfter = this._checkBreakAfter(this.elements.currentNode as HTMLElement, flow);\n\t\t\t\t\t\tif (flow.range) break;\n\t\t\t\t\t\telse if (breakAfter) forcedBreakAfter = breakAfter;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tboxRoot = this.elements.currentNode;\n\t\t\t}\n\t\t}\n\n\t\treturn flow;\n\t}\n\n\t_checkBreakAfter(currentElement: HTMLElement, flow: Flow, customStyle?: CSSStyleDeclaration): ForcedBreakType | null {\n\t\tif (!customStyle) customStyle = getCustomStyle(currentElement);\n\t\tconst columnSpan = getCustomProp(customStyle, 'column-span') == 'all';\n\t\tconst breakAfter = columnSpan ? 'column' : getCustomProp(customStyle, 'break-after') as ForcedBreakType;\n\t\tif (this.forcedBreakTypes.includes(breakAfter) || (this.forcedBreakTypes.includes('column') && columnSpan)) {\n\t\t\t// Special case where a forced break-after is followed by an inline\n\t\t\tconst nextStatic = walk.nextSibling(currentElement, walk.isStaticNode);\n\t\t\tif (nextStatic && !walk.displayAsBlock(nextStatic)) {\n\t\t\t\tflow.range = ranges.breakRangeAfter(this.remaining, currentElement);\n\t\t\t\tthis.resetOnNext = true;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn breakAfter;\n\t\t}\n\t\treturn null;\n\t}\n}\n",
    "import {rects, walk} from \"./util\";\nimport {CssContextOptions, getCustomProp, addStyleImagesToLoad, Media} from \"./css\";\nimport {Point} from \"./util/ranges\";\nimport {rowSubFragmentor, trWithRowSpanSubFragmentor} from \"./rows\";\nimport {Areas, Box, Float, LayoutProcessor, LayoutProcessorEvents, LayoutProcessorOptions} from \"./layout\";\nimport {Mutations} from \"./util\";\n\nexport class Fragment {\n\tcontainer: HTMLElement;\n\tbody: HTMLElement;\n\tarea: HTMLElement;\n\tareas: Areas;\n\tnumber: number;\n}\n\nexport interface FragmentorOptions extends LayoutProcessorOptions, CssContextOptions {\n\tdest?: HTMLElement;\n}\n\nexport interface FragmentorEvents extends LayoutProcessorEvents {\n}\n\nexport type LayoutProcessResult = { boxes: Box[], floats: Float[], overflowPoint: Point } | { breakPoint: Point };\n\nexport abstract class Fragmentor<Options extends FragmentorOptions = FragmentorOptions, Events extends FragmentorEvents = FragmentorEvents> extends LayoutProcessor<Options, Events> {\n\tstatic defaultOptions: FragmentorOptions = Object.assign(Object.create(LayoutProcessor.defaultOptions), {\n\t\tdest: null,\n\t\tauthorCSS: true,\n\t\tcoreCSS: true,\n\t\tdefaultCSS: true,\n\t\tpreprocessCSS: true,\n\t\tcss: [],\n\t\tdefaultPageSize: ['21cm', '29.7cm'],\n\t\tmediaType: 'print'\n\t});\n\tdest: HTMLElement;\n\tfragments: Fragment[] = [];\n\tcurrentFragment: Fragment = null;\n\n\tfragmentStartMut: Mutations = new Mutations();\n\timagesToLoad = new Set<string>();\n\n\t// TODO Better way to handle this flag\n\tlogNoValidBreakPoint = true;\n\n\tprotected constructor(source: HTMLElement, options?: Partial<Options>) {\n\t\t// TODO Typescript\n\t\tsuper(source, options);\n\n\t\tthis.dest = this.options.dest;\n\t\tif (!this.dest) this.dest = source.parentElement;\n\n\t\tif (this.options.plugins) this.options.plugins.forEach((plugin) => this.use(plugin));\n\t\tthis.addSubProcessor(trWithRowSpanSubFragmentor);\n\t\tthis.addSubProcessor(rowSubFragmentor);\n\t}\n\n\tonFragmentStart(fragment: Fragment, forcedBreak: boolean): void {\n\t\tdiscardMarginBreakBefore(fragment.body, forcedBreak, this.fragmentStartMut);\n\t\tthis.addImagesToLoad(fragment);\n\t}\n\n\tonFragmentBreak(fragment: Fragment): void {\n\t\tthis.setLastBreakedHeight(fragment.body);\n\t}\n\n\tsetLastBreakedHeight(container: HTMLElement): void {\n\t\tlet lastStatic = container;\n\t\tlet lastToFill: HTMLElement = null;\n\t\tconst isStaticBreakedAfterHtmlBlock = walk.predicate(walk.isHTMLElement, walk.isStatic, walk.displayAsBlock, walk.isBreakedAfter);\n\t\twhile (lastStatic && lastStatic.hasAttribute('ps-breaked-after')) {\n\t\t\tif (getCustomProp(lastStatic, 'box-remaining-extent') == 'fill') lastToFill = lastStatic;\n\t\t\t// TODO Set the height of the first breaked child of the row\n\t\t\t// TODO The bottomOffset can be null if the cell is empty\n\t\t\tif (walk.isRow(getComputedStyle(lastStatic))) {\n\t\t\t\tlastStatic = walk.firstChild(lastStatic, isStaticBreakedAfterHtmlBlock);\n\t\t\t} else {\n\t\t\t\tlastStatic = walk.lastChild(lastStatic, walk.isStaticHtmlBlock);\n\t\t\t}\n\t\t}\n\t\tif (lastToFill && lastToFill != container) {\n\t\t\tconst bottomOffset = this.layoutContext.bottomOffsets.get(lastToFill);\n\n\t\t\tif (bottomOffset) {\n\t\t\t\tconst maxBreakedBottom = this.layoutContext.bodyBottom - bottomOffset.after - bottomOffset.currentMargin;\n\t\t\t\tconst lastBreakedBottom = rects.boundingScrollRect(lastToFill).bottom;\n\t\t\t\tconst newHeight = parseFloat(getComputedStyle(lastToFill).height) + (maxBreakedBottom - lastBreakedBottom) + 'px';\n\t\t\t\tthis.layoutContext.mutations.setStyle(lastToFill, {height: newHeight + 'px'});\n\t\t\t}\n\t\t}\n\n\t}\n\n\taddImagesToLoad(fragment: Fragment): void {\n\t\taddStyleImagesToLoad(fragment.container, this.imagesToLoad);\n\t\tif (fragment.area) addStyleImagesToLoad(fragment.area, this.imagesToLoad);\n\t\tfor (const areaName in fragment.areas) {\n\t\t\taddStyleImagesToLoad(fragment.areas[areaName], this.imagesToLoad);\n\t\t}\n\t}\n\n}\n\nexport function createAreas(fragment: Fragment, areasProp?: string): void {\n\tconst doc = fragment.container.ownerDocument;\n\tfragment.areas = {};\n\tif (!areasProp) areasProp = getCustomProp(fragment.container, 'areas');\n\tif (areasProp == 'auto') return;\n\tconst areaNames = areasProp.split(' ');\n\tfor (const areaName of areaNames) {\n\t\tconst area = doc.createElement('ps-area');\n\t\tarea.setAttribute('ps-name', areaName);\n\t\tfragment.areas[areaName] = (fragment.area || fragment.container).appendChild(area) as HTMLElement;\n\t}\n}\n\nexport function cleanupAreas(fragment: Fragment): void {\n\tfor (const areaName in fragment.areas) {\n\t\tconst area = fragment.areas[areaName];\n\t\tif (!area.firstChild) area.remove();\n\t}\n}\n\nfunction discardMarginBreakBefore(elem: HTMLElement, keepByDefault: boolean, mut: Mutations): void {\n\tconst marginBreak = getCustomProp(elem, 'margin-break');\n\tif (marginBreak.startsWith('discard') || (marginBreak.startsWith('auto') && !keepByDefault)) {\n\t\tmut.setAttr(elem, 'ps-margin-break-before', 'discard');\n\t}\n\tconst style = getComputedStyle(elem);\n\tif (parseFloat(style.borderTop) || parseFloat(style.paddingTop)) return;\n\n\tif (walk.isRow(style)) {\n\t\tfor (let child = walk.firstChild(elem, walk.isStaticHtmlElement); child; child = walk.nextSibling(child, walk.isStaticHtmlElement)) {\n\t\t\tdiscardMarginBreakBefore(child, keepByDefault, mut);\n\t\t}\n\t} else {\n\t\tconst firstStatic = walk.firstChild(elem, walk.isStaticNode);\n\t\tif (walk.isHTMLElement(firstStatic)) discardMarginBreakBefore(firstStatic, keepByDefault, mut);\n\t}\n}\n",
    "import * as valueParser from 'postcss-value-parser';\nimport {FunctionNode, Node} from 'postcss-value-parser';\n\nimport {Fragment} from \"./fragments\";\nimport {Page} from \"./pages\";\nimport {dom, logger, rects, walk} from \"./util\";\nimport {getCustomProp, getCustomStyle} from \"./css\";\nimport {getCounterValue, getPageCounterValue} from \"./counters\";\nimport {Float, FloatPlacementPolicy} from \"./layout\";\n\nexport const SIDES = ['top', 'right', 'bottom', 'left'];\nexport const CORNERS = ['top-left-corner', 'top-right-corner', 'bottom-right-corner', 'bottom-left-corner'];\nexport const HORIZONTAL_MARGIN_BOXES = ['left', 'center', 'right'];\nexport const VERTICAL_MARGIN_BOXES = ['top', 'middle', 'bottom'];\n\n\nexport type Pseudo = \"before\" | \"after\" | \"marker\";\nexport const PSEUDOS: Pseudo[] = ['before', 'after', 'marker'];\n\n\ninterface ValueFnContext {\n\telement: HTMLElement;\n\tsrcElement: HTMLElement;\n\tctx: GCPMContext;\n\tpseudo?: Pseudo;\n\tdestElt?: Element;\n\tvarName?: string;\n}\n\ntype ValueFn = (args: Node[], context: ValueFnContext) => string | Node | Node[];\n\nclass InvalidArgCountError extends TypeError {\n\tconstructor(fnName: string, args: Node[], argsRequired: number) {\n\t\tsuper(`Failed to parse '${fnName}(${valueParser.stringify(args)}): ${argsRequired} argument${argsRequired > 1 ? 's' : ''} required.`);\n\t}\n}\n\ntype MarginContent<C> = { [key: string]: C };\n\nexport class PageMarginContent<C> {\n\treadonly start: MarginContent<C> = {};\n\tfirst: MarginContent<C> = {};\n\tlast: MarginContent<C> = {};\n}\n\ninterface Leader {\n\tpseudo: string;\n\telement: HTMLElement;\n\tpattern: string;\n}\n\ninterface TargetCounter {\n\telement: HTMLElement;\n\tvarName: string;\n}\n\nexport class GCPMContext {\n\t/**\n\t * Map of floats by float-call\n\t */\n\tfloats = new Map<HTMLElement, Float>();\n\n\t/**\n\t * Map of floats by float-call\n\t */\n\tpendingFloats: Float[] = [];\n\n\t/**\n\t * Map of leaders.\n\t */\n\tleaders = new Map<HTMLElement, Leader>();\n\n\t/**\n\t * The global string sets of the pagination.\n\t */\n\tstringSets: MarginContent<string> = {};\n\n\t/**\n\t * The string sets of the current page.\n\t */\n\tpageStringSets = new PageMarginContent<string>();\n\n\t/**\n\t * The global running elements of the pagination.\n\t */\n\trunnings: MarginContent<HTMLElement> = {};\n\n\t/**\n\t * The running elements of the current page.\n\t */\n\tpageRunnings = new PageMarginContent<HTMLElement>();\n\n\tbookmarks: Set<HTMLElement> = new Set();\n\n\n\ttargetCounters: { [id: string]: { [counterName: string]: TargetCounter[] } } = {};\n\n}\n\nexport function prepareGcpm(element: HTMLElement, customStyle: CSSStyleDeclaration, ctx: GCPMContext): void {\n\tconst boxDecorationBreak = getCustomProp(customStyle, \"box-decoration-break\");\n\tif (boxDecorationBreak == 'clone') {\n\t\telement.setAttribute('ps-box-decoration-break', 'clone');\n\t}\n\n\tconst marginBreak = getCustomProp(customStyle, \"margin-break\");\n\tif (marginBreak.endsWith('keep')) {\n\t\telement.setAttribute('ps-margin-break-after', 'keep');\n\t}\n\n\n\tconst bookmarkLevel = getCustomProp(customStyle, \"bookmark-level\");\n\tif (bookmarkLevel != 'none') {\n\t\tif (bookmarkLevel) ctx.bookmarks.add(element);\n\t}\n\n\tconst position = getCustomProp(customStyle, \"position\");\n\tif (position) {\n\t\tconst positionVal = valueParser(position).nodes[0];\n\t\tif (positionVal.type == 'function' && positionVal.value == 'running') {\n\t\t\telement.setAttribute('ps-running', positionVal.nodes[0].value);\n\t\t}\n\t}\n\n\tconst float = getCustomProp(customStyle, 'float');\n\tif (float) {\n\t\tconst floatVal = valueParser(float).nodes[0];\n\t\tif (floatVal.type == 'function' && floatVal.value == \"-ps-area\") {\n\t\t\tconst doc = element.ownerDocument;\n\t\t\tconst areaName = floatVal.nodes[0].value;\n\t\t\tconst call = doc.createElement('a');\n\t\t\tcall.setAttribute('ps-float-call', '');\n\t\t\tconst body = element.cloneNode(true);\n\t\t\tbody.setAttribute('ps-float', areaName);\n\t\t\tbody.setAttribute('ps-float-display', getCustomProp(customStyle, 'float-display'));\n\t\t\telement.removeAttribute('id');\n\t\t\telement.setAttribute('ps-float-base', '');\n\t\t\telement.parentNode.insertBefore(call, element.nextSibling);\n\n\t\t\tcall.setAttribute('href', '#' + dom.id(body));\n\t\t\tcall.setAttribute('ps-float-area', areaName);\n\n\t\t\tconst placement = (floatVal.nodes.length > 2 ? floatVal.nodes[2].value : \"baseline\") as FloatPlacementPolicy;\n\t\t\tctx.floats.set(element, {\n\t\t\t\tbase: element,\n\t\t\t\tbody,\n\t\t\t\tcall,\n\t\t\t\tareaName,\n\t\t\t\tplacement\n\t\t\t});\n\n\t\t}\n\t}\n\n\tfor (const pseudo of PSEUDOS) parsePseudosVals(element, pseudo, ctx);\n}\n\nexport function parsePseudosVals(element: HTMLElement, pseudo: Pseudo, ctx: GCPMContext): void {\n\tconst vals = getComputedStyle(element, '::' + pseudo).getPropertyValue(`--ps-${pseudo}-vals`).trim();\n\tif (vals) {\n\t\tconst pseudoValues = valueParser(vals).nodes.filter((val) => val.type == 'function');\n\t\tfor (let i = 0; i < pseudoValues.length; i++) {\n\t\t\tconst varName = `--ps-${pseudo}-val-${i}`;\n\t\t\t// In some case (leaders), the value can be already parsed\n\t\t\tif (!element.style.getPropertyValue(varName)) {\n\t\t\t\tconst vals = [pseudoValues[i]];\n\t\t\t\tparseContentVals(vals, {element, pseudo, varName, srcElement: element, ctx});\n\t\t\t\telement.style.setProperty(varName, valueParser.stringify(vals));\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction parseContentVals(vals: Node[], valFnCtx: ValueFnContext): void {\n\tvalueParser.walk(vals, (val: Node, index: number, vals: Node[]) => {\n\t\tif (val.type == 'function') {\n\t\t\tlet valFn: ValueFn;\n\t\t\tconst args = val.nodes.filter((val) => val.type != 'div');\n\t\t\tif (val.value == 'attr') valFn = fnAttr;\n\t\t\telse if (val.value == 'url') valFn = fnUrl;\n\t\t\telse if (val.value == 'string') valFn = fnString;\n\t\t\telse if (val.value == 'element') valFn = fnElement;\n\t\t\telse if (val.value == 'leader') valFn = fnLeader;\n\t\t\telse if (val.value == 'target-content' || val.value == 'target-text') valFn = fnTargetContent;\n\t\t\telse if (val.value == 'target-counter') valFn = fnTargetCounter;\n\t\t\tif (valFn) {\n\t\t\t\tconst value = valFn(args, valFnCtx);\n\t\t\t\tif (typeof value == 'string') vals[index] = {type: 'string', value, quote: '\"'} as Node;\n\t\t\t\telse if (Array.isArray(value)) vals[index] = {nodes: value} as Node;\n\t\t\t\telse vals[index] = value;\n\t\t\t}\n\t\t}\n\t}, true);\n}\n\nfunction parseStringSetVals(vals: Node[], valFnCtx: ValueFnContext): void {\n\tvalueParser.walk(vals, (val: Node, index: number, vals: Node[]) => {\n\t\tif (val.type == 'function') {\n\t\t\tlet valFn: ValueFn;\n\t\t\tconst args = val.nodes.filter((val) => val.type != 'div');\n\t\t\tif (val.value == 'attr') valFn = fnAttr;\n\t\t\telse if (val.value == 'url') valFn = fnUrl;\n\t\t\telse if (val.value == 'counter' || val.value == 'content') {\n\t\t\t\tval.value = `target-${val.value}`;\n\t\t\t\tval.nodes.unshift({type: \"string\", value: '#' + dom.id(valFnCtx.element), quote: '\"'} as Node, {\n\t\t\t\t\ttype: \"div\",\n\t\t\t\t\tvalue: ','\n\t\t\t\t} as Node);\n\t\t\t}\n\t\t\tif (valFn) {\n\t\t\t\tconst value = valFn(args, valFnCtx);\n\t\t\t\tif (typeof value == 'string') vals[index] = {type: 'string', value, quote: '\"'} as Node;\n\t\t\t\telse if (Array.isArray(value)) vals[index] = {nodes: value} as Node;\n\t\t\t}\n\t\t}\n\t}, true);\n}\n\nfunction fnAttr(args: Node[], {srcElement}: ValueFnContext): string {\n\tif (args.length < 1) throw new InvalidArgCountError('attr', args, 1);\n\tconst attrName = args[0].value;\n\tif (!srcElement.hasAttribute(attrName)) {\n\t\tlogger.warn(`Invalid attr() content function call : the attribute '${attrName}' does not exist.`);\n\t\treturn '';\n\t}\n\treturn srcElement.getAttribute(attrName);\n}\n\nfunction fnUrl(args: Node[]): string {\n\tif (args.length < 1) throw new InvalidArgCountError('url', args, 1);\n\treturn args[0].value;\n}\n\nfunction fnString(args: Node[], {srcElement, ctx}: ValueFnContext): string | Node[] {\n\tif (args.length < 1) throw new InvalidArgCountError('string', args, 1);\n\tconst name = args[0].value;\n\tconst position = args.length > 1 ? args[1].value : 'first';\n\tlet stringContent = '';\n\n\tif (position == 'first') stringContent = ctx.pageStringSets.first[name] || ctx.stringSets[name] || '';\n\telse if (position == \"start\") stringContent = ctx.pageStringSets.start[name] || ctx.stringSets[name] || '';\n\telse if (position == 'last') stringContent = ctx.pageStringSets.last[name] || ctx.stringSets[name] || '';\n\telse if (position == \"first-except\") stringContent = ctx.pageStringSets.first[name] ? '' : ctx.stringSets[name] || '';\n\n\tconst stringVals = valueParser(stringContent).nodes;\n\tparseContentVals(stringVals, {element: srcElement, srcElement, ctx});\n\treturn stringVals;\n}\n\nfunction fnElement(args: Node[], {srcElement, ctx}: ValueFnContext): string {\n\tif (args.length < 1) throw new InvalidArgCountError('element', args, 1);\n\tconst name = args[0].value;\n\tconst position = args.length > 1 ? args[1].value : 'first';\n\n\tlet running: Element;\n\tif (position == 'first') running = ctx.pageRunnings.first[name] || ctx.runnings[name];\n\telse if (position == \"start\") running = ctx.pageRunnings.start[name] || ctx.runnings[name];\n\telse if (position == 'last') running = ctx.pageRunnings.last[name] || ctx.runnings[name];\n\telse if (position == \"first-except\") running = ctx.pageRunnings.first[name] ? null : ctx.runnings[name];\n\n\tif (running) {\n\t\tconst clone = srcElement.appendChild(running.cloneNode(true)) as Element;\n\t\tclone.removeAttribute('ps-running');\n\t}\n\treturn '';\n}\n\nfunction fnLeader(args: Node[], {element, pseudo, ctx}: ValueFnContext): string {\n\tif (args.length < 1) throw new InvalidArgCountError('leader', args, 1);\n\tconst patternVal = args[0];\n\tlet pattern: string;\n\tif (patternVal.type == 'word') {\n\t\tif (patternVal.value == 'dotted') pattern = '. ';\n\t\telse if (patternVal.value == 'solid') pattern = '_';\n\t\telse if (patternVal.value == 'space') pattern = ' ';\n\t} else if (patternVal.type == 'string') {\n\t\tpattern = patternVal.value;\n\t}\n\n\tconst leader: Leader = {\n\t\tpseudo,\n\t\tpattern,\n\t\telement: element.ownerDocument.createElement('ps-leader')\n\t};\n\tif (pseudo == 'after') element.appendChild(leader.element);\n\telse element.insertBefore(leader.element, element.firstChild);\n\n\tleader.element.textContent = leader.pattern;\n\tleader.element.setAttribute('ps-position', pseudo);\n\tleader.element.setAttribute('ps-direction', getComputedStyle(element).direction == 'ltr' ? 'rtl' : 'ltr');\n\n\tctx.leaders.set(element, leader);\n\treturn '';\n}\n\nfunction fnTargetCounter(args: Node[], {element, srcElement, ctx, varName}: ValueFnContext): string | Node {\n\tif (args.length < 2) throw new InvalidArgCountError('target-counter', args, 2);\n\tconst targetId = checkTarget(args[0].value, false);\n\tif (!targetId) return '';\n\tconst counterName = args[1].value;\n\n\tlet targetCounters = ctx.targetCounters[targetId];\n\tif (!targetCounters) targetCounters = ctx.targetCounters[targetId] = {};\n\n\t// If the parsing comes from a variable  (@see parsePseudosVals), it is used for future replacement\n\tlet targetVarName = varName;\n\tif (!targetVarName) {\n\t\tconst style = getComputedStyle(element);\n\t\tlet i = 0;\n\t\ttargetVarName = `--ps-target-counter-${i}`;\n\t\twhile (style.getPropertyValue(targetVarName)) targetVarName = `--ps-target-counter-${++i}`;\n\t}\n\n\tlet targetCounter = targetCounters[counterName];\n\tif (!targetCounter) targetCounter = targetCounters[counterName] = [];\n\n\ttargetCounter.push({element, varName: targetVarName});\n\n\treturn varName ? \"000\" : valueParser(`var(${targetVarName}, \"000\")`).nodes[0];\n}\n\n// TODO Does not match the spec: pseudo-elements of descendants are not included\nfunction fnTargetContent(args: Node[], {srcElement, ctx }: ValueFnContext): string | Node[] {\n\tif (args.length < 1) throw new InvalidArgCountError('target-content', args, 1);\n\tconst targetId = checkTarget(args[0].value);\n\tif (!targetId) return '';\n\tconst targetElement = srcElement.ownerDocument.getElementById(targetId);\n\n\tif (!targetElement) return '';\n\n\tconst type = args.length > 1 ? args[1].value : 'text';\n\n\tif (type == 'text') {\n\t\treturn targetElement.textContent.trim();\n\t} else if (type == \"first-letter\") {\n\t\t// TODO Punctuation (i.e, characters defined in Unicode in the \"open\" (Ps), \"close\" (Pe), \"initial\" (Pi),\n\t\t// \"final\" (Pf) and \"other\" (Po) punctuation classes),that precedes or follows the first letter should be included.\n\t\treturn targetElement.textContent.trim().substr(0, 1);\n\t} else if (type == 'before' || type == 'after' || type == 'marker') {\n\t\tconst pseudoContent = getComputedStyle(targetElement, type).content;\n\t\tconst vals = valueParser(pseudoContent).nodes;\n\t\tparseStringSetVals(vals, {element: targetElement, srcElement: targetElement, ctx});\n\t\tparseContentVals(vals, { element: srcElement, srcElement: targetElement, ctx});\n\t\treturn vals;\n\t}\n}\n\nexport function createBookmarks(doc: Document, ctx: GCPMContext): Element {\n\tconst root = doc.createElement('ps-bookmarks');\n\tconst rootList = doc.createElement('ol');\n\tconst stack = [rootList];\n\n\tfor (const target of ctx.bookmarks) {\n\t\tconst customStyle = getCustomStyle(target);\n\n\t\tconst level = parseInt(getCustomProp(customStyle, 'bookmark-level'));\n\t\tif (!isNaN(level) && walk.hasSize(target)) {\n\t\t\tconst label = getCustomProp(customStyle, 'bookmark-label');\n\t\t\tconst labelVals = valueParser(label).nodes;\n\n\t\t\tconst item = doc.createElement('li');\n\t\t\tconst link = item.appendChild(doc.createElement('a'));\n\t\t\tlink.href = '#' + dom.id(target);\n\n\t\t\tparseStringSetVals(labelVals, {element: target, srcElement: target, ctx});\n\t\t\tparseContentVals(labelVals, {element: link, srcElement: target, ctx});\n\t\t\tconst labelValue = valueParser.stringify(labelVals);\n\t\t\tlink.style.setProperty('--ps-label', labelValue);\n\n\t\t\tconst list = doc.createElement('ol');\n\t\t\tlist.setAttribute('ps-state', getCustomProp(customStyle, 'bookmark-state'));\n\t\t\titem.appendChild(list);\n\n\t\t\tlet parentList;\n\t\t\tfor (let l = 0; l < level; l++) {\n\t\t\t\tif (stack[l]) parentList = stack[l];\n\t\t\t\telse stack.push(undefined);\n\t\t\t}\n\t\t\tparentList.appendChild(item);\n\n\t\t\tfor (let l = level; l < stack.length; l++) {\n\t\t\t\tconst list = stack[l];\n\t\t\t\tif (list && !list.firstChild) list.remove();\n\t\t\t}\n\t\t\tstack.length = level;\n\t\t\tstack.push(list);\n\t\t}\n\t}\n\n\tfor (const list of stack) {\n\t\tif (list && !list.firstChild) list.remove();\n\t}\n\n\n\tif (rootList.firstChild) root.appendChild(rootList);\n\n\treturn root;\n}\n\nexport function setBookmarkLabels(bookmarksRoot: Element): void {\n\tconst linkIterator = walk.createIterator(bookmarksRoot, walk.isConstructedBy(HTMLAnchorElement), walk.isElement);\n\tlet link;\n\twhile ((link = linkIterator.nextNode())) {\n\t\tconst labelVals = valueParser(getComputedStyle(link).getPropertyValue('--ps-label')).nodes;\n\t\tlink.textContent = labelVals.filter((val) => val.type == 'string').map((val) => val.value).join('');\n\t\tlink.removeAttribute('style');\n\t}\n}\n\n/**\n * Sets the content of the margins of a page\n * @param page\n * @param context\n */\nexport function setMarginContents(page: Page, ctx: GCPMContext): void {\n\tconst elements = walk.createWalker(page.body, walk.isHTMLElement);\n\n\tconst pageStringSets = new Map<HTMLElement, string>();\n\tconst pageRunnings = new Map<HTMLElement, string>();\n\tdo  {\n\t\tconst style = getCustomStyle(elements.currentNode);\n\t\tconst stringSet = getCustomProp(style, 'string-set').trim();\n\t\tif (stringSet) pageStringSets.set(elements.currentNode, stringSet);\n\t\tconst position = getCustomProp(style, 'position');\n\t\tif (position.startsWith('running(')) pageRunnings.set(elements.currentNode, position);\n\t} while (elements.nextNode());\n\n\tctx.pageStringSets = {\n\t\tstart: {},\n\t\tfirst: {},\n\t\tlast: {}\n\t};\n\n\tfor (const [stringSetElt, stringSetValue] of pageStringSets) {\n\t\tconst parts = valueParser(stringSetValue).nodes;\n\t\tlet i = 0;\n\t\twhile (i < parts.length) {\n\t\t\tconst name = parts[i++].value;\n\t\t\tconst valStart = i;\n\t\t\twhile (i < parts.length && parts[i].type != 'div' && parts[i].value != ',') i++;\n\t\t\tconst partVals = parts.slice(valStart, i);\n\t\t\tparseStringSetVals(partVals, {\n\t\t\t\telement: stringSetElt as HTMLElement,\n\t\t\t\tsrcElement: stringSetElt as HTMLElement,\n\t\t\t\tctx\n\t\t\t});\n\t\t\tconst value = valueParser.stringify(partVals);\n\n\t\t\telements.currentNode = stringSetElt;\n\t\t\t// start: \"If the element is the first element on the page, the value of the first assignment is used\"\n\t\t\tconst previousElt = elements.previousNode();\n\t\t\tif (!previousElt || previousElt == page.body) ctx.pageStringSets.start[name] = value;\n\t\t\tif (ctx.pageStringSets.first[name] === undefined) ctx.pageStringSets.first[name] = value;\n\t\t\t// last : always rewritten\n\t\t\tctx.pageStringSets.last[name] = value;\n\t\t\ti++;\n\t\t}\n\t}\n\n\tctx.pageRunnings = {\n\t\tstart: {},\n\t\tfirst: {},\n\t\tlast: {}\n\t};\n\n\t// running: same algorithm than the string-set\n\tfor (const [runningElt, runningValue] of pageRunnings) {\n\t\tconst call = valueParser(runningValue).nodes[0] as FunctionNode;\n\t\tconst name = call.nodes[0].value;\n\n\t\telements.currentNode = runningElt;\n\t\tconst previousElt = elements.previousNode();\n\t\tif (!previousElt || previousElt == page.body) ctx.pageRunnings.start[name] = runningElt;\n\t\tif (ctx.pageRunnings.first[name] === undefined) ctx.pageRunnings.first[name] = runningElt;\n\t\tctx.pageRunnings.last[name] = runningElt;\n\t}\n\n\tconst marginsContent: { [marginName: string]: boolean } = {};\n\tfor (const position in page.marginBoxes) {\n\t\tconst marginBox = page.marginBoxes[position];\n\t\tconst content = getComputedStyle(marginBox, '::before').content;\n\t\tif (content != \"none\") {\n\t\t\tparsePseudosVals(marginBox, 'before', ctx);\n\t\t\tmarginsContent[position] = true;\n\t\t}\n\t}\n\n\t// Keep output values for the next page\n\tfor (const stringName in ctx.pageStringSets.last) {\n\t\tctx.stringSets[stringName] = ctx.pageStringSets.last[stringName];\n\t}\n\n\tfor (const runningName in ctx.pageRunnings.last) {\n\t\tctx.runnings[runningName] = ctx.pageRunnings.last[runningName];\n\t}\n\n\tfunction removeMarginBox(position: string): void {\n\t\tpage.marginBoxes[position].remove();\n\t\tpage.marginBoxes[position] = null;\n\t}\n\n\t// Margin sides are removed if empty\n\tfor (let side, i = 0; i < SIDES.length, side = SIDES[i]; i++) {\n\t\tif (!marginsContent[CORNERS[i]]) removeMarginBox(CORNERS[i]);\n\n\t\tif (i % 2 == 0) {\n\t\t\tconst leftPos = side + '-left';\n\t\t\tconst rightPos = side + '-right';\n\t\t\tif (!marginsContent[leftPos] && !marginsContent[rightPos]) {\n\t\t\t\tremoveMarginBox(leftPos);\n\t\t\t\tremoveMarginBox(rightPos);\n\t\t\t}\n\t\t} else {\n\t\t\tconst topPos = side + '-top';\n\t\t\tconst bottomPos = side + '-bottom';\n\t\t\tif (!marginsContent[topPos] && !marginsContent[bottomPos]) {\n\t\t\t\tremoveMarginBox(topPos);\n\t\t\t\tremoveMarginBox(bottomPos);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Centered margin are removed if empty\n\tfor (let side, i = 0; i < SIDES.length, side = SIDES[i]; i++) {\n\t\tif (i % 2 == 0) {\n\t\t\tconst centerPos = side + '-center';\n\t\t\tconst leftPos = side + '-left';\n\t\t\tconst rightPos = side + '-right';\n\t\t\tif (!marginsContent[centerPos]) {\n\t\t\t\tremoveMarginBox(centerPos);\n\t\t\t\tif (page.marginBoxes[leftPos] && !marginsContent[leftPos]) removeMarginBox(leftPos);\n\t\t\t\tif (page.marginBoxes[rightPos] && !marginsContent[rightPos]) removeMarginBox(rightPos);\n\t\t\t}\n\t\t} else {\n\t\t\tconst middlePos = side + '-middle';\n\t\t\tif (!marginsContent[middlePos]) {\n\t\t\t\tremoveMarginBox(middlePos);\n\t\t\t\tconst topPos = side + '-top';\n\t\t\t\tconst bottomPos = side + '-bottom';\n\t\t\t\tif (page.marginBoxes[topPos] && !marginsContent[topPos]) removeMarginBox(topPos);\n\t\t\t\tif (page.marginBoxes[bottomPos] && !marginsContent[bottomPos]) removeMarginBox(bottomPos);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove margin if all boxes empty\n\tfor (let side: string, i = 0; i < SIDES.length, side = SIDES[i]; i++) {\n\t\tconst marginBoxes = i % 2 == 0 ? HORIZONTAL_MARGIN_BOXES : VERTICAL_MARGIN_BOXES;\n\t\tconst noMarginBoxes = marginBoxes.every((position) => !page.marginBoxes[side + '-' + position]);\n\t\tif (noMarginBoxes) page.container.querySelector(`ps-margin[ps-side=${side}]`).remove();\n\t}\n\n\t// Balancing of sided margins\n\tfor (let side, i = 0; i < SIDES.length, side = SIDES[i]; i++) {\n\t\tif (i % 2 == 0) {\n\t\t\tconst marginCenter = page.marginBoxes[side + '-center'];\n\t\t\tif (marginCenter) {\n\t\t\t\tconst marginLeft = page.marginBoxes[side + '-left'];\n\t\t\t\tconst marginRight = page.marginBoxes[side + '-right'];\n\t\t\t\tif (marginLeft && marginRight) {\n\t\t\t\t\tconst leftWidth = marginLeft.clientWidth;\n\t\t\t\t\tconst rightWidth = marginRight.clientWidth;\n\t\t\t\t\tif (leftWidth != rightWidth) {\n\t\t\t\t\t\tmarginCenter.style.maxWidth = marginCenter.clientWidth + 'px';\n\t\t\t\t\t\tmarginLeft.style.flexBasis = marginRight.style.flexBasis = '0';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tconst marginMiddle = page.marginBoxes[side + '-middle'];\n\t\t\tif (marginMiddle) {\n\t\t\t\tconst marginTop = page.marginBoxes[side + '-top'];\n\t\t\t\tconst marginBottom = page.marginBoxes[side + '-bottom'];\n\t\t\t\tif (marginTop && marginBottom) {\n\t\t\t\t\tconst topHeight = marginTop.clientHeight;\n\t\t\t\t\tconst bottomHeight = marginBottom.clientHeight;\n\t\t\t\t\tif (topHeight != bottomHeight) {\n\t\t\t\t\t\tmarginMiddle.style.maxHeight = marginMiddle.clientHeight + 'px';\n\t\t\t\t\t\tmarginTop.style.flexBasis = marginBottom.style.flexBasis = '0';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function setPageTargetCounters(page: Fragment, dest: HTMLElement, ctx: GCPMContext): void {\n\tfor (const id in ctx.targetCounters) {\n\t\tconst target = page.body.querySelector('#' + id);\n\t\tif (target) {\n\t\t\tconst targetCounters = ctx.targetCounters[id];\n\t\t\tfor (const counterName in targetCounters) {\n\t\t\t\tif (counterName == 'page') {\n\t\t\t\t\tconst varValue = valueParser.stringify({type: 'string', value: page.number.toString(), quote: '\"'} as Node);\n\t\t\t\t\tfor (const targetCounter of targetCounters[counterName]) {\n\t\t\t\t\t\ttargetCounter.element.style.setProperty(targetCounter.varName, varValue);\n\t\t\t\t\t}\n\t\t\t\t\tdelete targetCounters[counterName];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!Object.keys(targetCounters).length) delete ctx.targetCounters[id];\n\t\t}\n\t}\n}\n\nexport function setTargetCounters(pages: Fragment[], ctx: GCPMContext): void {\n\tfor (const id in ctx.targetCounters) {\n\t\tconst target = document.getElementById(id);\n\t\tconst targetCounters = ctx.targetCounters[id as string];\n\t\tfor (const counterName in targetCounters) {\n\t\t\tlet counterValue: string | number;\n\t\t\tif (!target) counterValue = '';\n\t\t\t// TODO Add an option for the optimization on page counters value\n\t\t\telse if (counterName == 'pages') counterValue = pages.length;\n\t\t\telse if (counterName == 'page') counterValue = getPageCounterValue(pages, target);\n\t\t\telse counterValue = getCounterValue(target, counterName);\n\n\t\t\tconst varValue = valueParser.stringify({type: 'string', value: counterValue.toString(), quote: '\"'} as Node);\n\t\t\tfor (const targetCounter of targetCounters[counterName]) {\n\t\t\t\ttargetCounter.element.style.setProperty(targetCounter.varName, varValue);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function setLeaders(ctx: GCPMContext): void {\n\tif (!ctx.leaders || !ctx.leaders.size) return;\n\tfor (const [element, leader] of ctx.leaders.entries()) {\n\t\t// If the element is displayed\n\t\tif (element.offsetHeight) {\n\t\t\tlet block = element;\n\t\t\tlet blockStyle = getComputedStyle(block);\n\t\t\twhile (!walk.displayAsBlockStyle(blockStyle)) {\n\t\t\t\tblock = block.parentNode as HTMLElement;\n\t\t\t\tblockStyle = getComputedStyle(block);\n\t\t\t}\n\n\t\t\tconst blockRect = rects.boundingScrollRect(block);\n\n\t\t\t// We force an alignement when the text is justified in order to have an available space\n\t\t\tconst initialTextAlign = blockStyle.textAlign;\n\t\t\tlet textAlign = initialTextAlign;\n\t\t\tif (initialTextAlign == 'justify') {\n\t\t\t\tblock.style.textAlign = 'start';\n\t\t\t\ttextAlign = block.style.textAlign;\n\t\t\t}\n\n\t\t\tlet leaderRect = rects.boundingScrollRect(leader.element);\n\t\t\tconst patternWidth = leaderRect.width;\n\t\t\tleader.element.textContent = '';\n\t\t\tleaderRect = rects.boundingScrollRect(leader.element);\n\n\t\t\tconst ltr = blockStyle.direction == 'ltr';\n\t\t\tlet [start, end] = getLeaderStartEnd(block, blockRect, leader, leaderRect, ltr, textAlign);\n\t\t\tlet endWidth = end - parseFloat(ltr ? blockStyle.paddingRight : blockStyle.paddingLeft);\n\t\t\tif (endWidth < 0.1) {\n\t\t\t\tleader.element.parentNode.insertBefore(document.createElement('br'), leader.element);\n\t\t\t\tleaderRect = rects.boundingScrollRect(leader.element);\n\t\t\t\tconst [newStart, newEnd] = getLeaderStartEnd(block, blockRect, leader, leaderRect, ltr, textAlign);\n\t\t\t\tconst newEndWidth = newEnd - parseFloat(ltr ? blockStyle.paddingRight : blockStyle.paddingLeft);\n\t\t\t\tif (newEndWidth < 0.1) {\n\t\t\t\t\tleader.element.previousElementSibling.remove();\n\t\t\t\t\tleaderRect = rects.boundingScrollRect(leader.element);\n\t\t\t\t} else {\n\t\t\t\t\tstart = newStart;\n\t\t\t\t\tend = newEnd;\n\t\t\t\t\tendWidth = newEndWidth;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst space = blockRect.width - end - start;\n\t\t\tleader.element.style.width = Math.floor(space * 10) / 10 - 1 + 'px';\n\n\t\t\tconst leaderEnd = leader.element.appendChild(document.createElement('ps-leader-end'));\n\t\t\tif (blockStyle.direction == 'ltr') leaderEnd.style.marginRight = -(endWidth) + 'px';\n\t\t\telse leaderEnd.style.marginLeft = -(endWidth) + 'px';\n\t\t\tlet endText = '';\n\t\t\tlet endPatternCount = endWidth / patternWidth;\n\t\t\tif (endPatternCount / Math.floor(endPatternCount) < 1.01) endPatternCount--;\n\t\t\tfor (let i = 0; i < endPatternCount; i++) endText += leader.pattern;\n\t\t\tleaderEnd.textContent = endText;\n\n\t\t\tlet leaderText = '';\n\t\t\tconst patternCount = Math.floor(space / patternWidth);\n\t\t\tfor (let i = 0; i < patternCount; i++) leaderText += leader.pattern;\n\t\t\tleader.element.appendChild(document.createTextNode(leaderText));\n\t\t\tif (leader.element.scrollWidth > leader.element.clientWidth) {\n\t\t\t\tleader.element.lastChild.nodeValue = leaderText.slice(0, -1);\n\t\t\t}\n\n\t\t\t// Restoration of the initial alignement\n\t\t\tif (initialTextAlign == 'justify') {\n\t\t\t\tblock.style.textAlign = '';\n\t\t\t}\n\n\t\t}\n\t}\n}\n\nfunction getLeaderStartEnd(block: HTMLElement, blockRect: ClientRect, leader: Leader, leaderRect: ClientRect, ltr: boolean, textAlign: string): [number, number] {\n\tconst start = ltr ? leaderRect.left - blockRect.left : blockRect.right - leaderRect.right;\n\tif (textAlign == 'start') block.style.textAlign = 'end';\n\telse if (textAlign == 'end') block.style.textAlign = 'start';\n\telse if (textAlign == 'left') block.style.textAlign = 'right';\n\telse if (textAlign) block.style.textAlign = 'left';\n\tconst leaderRectInverse = rects.boundingScrollRect(leader.element);\n\tconst end = ltr ? blockRect.right - leaderRectInverse.right : leaderRectInverse.left - blockRect.left;\n\tblock.style.textAlign = textAlign;\n\treturn [start, end];\n}\n\n\nfunction checkTarget(hrefAttr: string, mustExists = true): string {\n\tconst targetId = hrefAttr[0] == '#' && hrefAttr.substr(1);\n\tif (!targetId) {\n\t\tlogger.warn(`Invalid target-counter() content function call : the url fragment is empty.`);\n\t\treturn null;\n\t}\n\tif (mustExists && !document.getElementById(targetId)) {\n\t\tlogger.warn(`Invalid target-counter() content function call : the target does not exist.`);\n\t\treturn null;\n\t}\n\treturn targetId;\n}\n\n\nexport function isFloatCall(elem: Element): boolean {\n\treturn elem.localName == 'a' && elem.hasAttribute('ps-float-call');\n}\n",
    "/**\n* @file This file is an Typescript adaptation of the Hypher library\n* @see {@link https://github.com/bramstein/hypher|Hypher GitHub project page}\n* @license\n* Copyright (c) 2011, Bram Stein\n* All rights reserved.\n\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n\n *  1. Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n *  2. Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n *  3. The name of the author may not be used to endorse or promote products\n *     derived from this software without specific prior written permission.\n\n * THIS SOFTWARE IS PROVIDED BY THE AUTHOR \"AS IS\" AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF\n * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO\n * EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,\n * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,\n * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\ntype Pattern = { [key: number]: string };\n\ninterface Language {\n\tleftmin: number;\n\trightmin: number;\n\tpatterns: Pattern;\n\texceptions?: string;\n}\n\ninterface TrieNode {\n\t_points?: number[];\n\t[key: number]: TrieNode;\n}\n\n// eslint-disable-next-line no-misleading-character-class\nconst wordSplitRE = /([a-zA-Z0-9_\\u0027\\u00AD\\u00DF-\\u00EA\\u00EB\\u00EC-\\u00EF\\u00F1-\\u00F6\\u00F8-\\u00FD\\u0101\\u0103\\u0105\\u0107\\u0109\\u010D\\u010F\\u0111\\u0113\\u0117\\u0119\\u011B\\u011D\\u011F\\u0123\\u0125\\u012B\\u012F\\u0131\\u0135\\u0137\\u013C\\u013E\\u0142\\u0144\\u0146\\u0148\\u0151\\u0153\\u0155\\u0159\\u015B\\u015D\\u015F\\u0161\\u0165\\u016B\\u016D\\u016F\\u0171\\u0173\\u017A\\u017C\\u017E\\u017F\\u0219\\u021B\\u02BC\\u0390\\u03AC-\\u03CE\\u03F2\\u0401\\u0410-\\u044F\\u0451\\u0454\\u0456\\u0457\\u045E\\u0491\\u0531-\\u0556\\u0561-\\u0587\\u0902\\u0903\\u0905-\\u090B\\u090E-\\u0910\\u0912\\u0914-\\u0928\\u092A-\\u0939\\u093E-\\u0943\\u0946-\\u0948\\u094A-\\u094D\\u0982\\u0983\\u0985-\\u098B\\u098F\\u0990\\u0994-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BE-\\u09C3\\u09C7\\u09C8\\u09CB-\\u09CD\\u09D7\\u0A02\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A14-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A82\\u0A83\\u0A85-\\u0A8B\\u0A8F\\u0A90\\u0A94-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABE-\\u0AC3\\u0AC7\\u0AC8\\u0ACB-\\u0ACD\\u0B02\\u0B03\\u0B05-\\u0B0B\\u0B0F\\u0B10\\u0B14-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3E-\\u0B43\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B57\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB5\\u0BB7-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD7\\u0C02\\u0C03\\u0C05-\\u0C0B\\u0C0E-\\u0C10\\u0C12\\u0C14-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C3E-\\u0C43\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C82\\u0C83\\u0C85-\\u0C8B\\u0C8E-\\u0C90\\u0C92\\u0C94-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBE-\\u0CC3\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0D02\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D3E-\\u0D43\\u0D46-\\u0D48\\u0D4A-\\u0D4D\\u0D57\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u1F00-\\u1F07\\u1F10-\\u1F15\\u1F20-\\u1F27\\u1F30-\\u1F37\\u1F40-\\u1F45\\u1F50-\\u1F57\\u1F60-\\u1F67\\u1F70-\\u1F7D\\u1F80-\\u1F87\\u1F90-\\u1F97\\u1FA0-\\u1FA7\\u1FB2-\\u1FB4\\u1FB6\\u1FB7\\u1FBD\\u1FBF\\u1FC2-\\u1FC4\\u1FC6\\u1FC7\\u1FD2\\u1FD3\\u1FD6\\u1FD7\\u1FE2-\\u1FE7\\u1FF2-\\u1FF4\\u1FF6\\u1FF7\\u200D\\u2019]+)/gi;\nconst slashSpaceRE = /\\s+\\/|\\/\\s+/;\n\n/**\n * @constructor\n * @param {!{patterns: !Object, leftmin: !number, rightmin: !number}} language The language pattern file. Compatible with Hyphenator.js.\n */\nexport class Hypher {\n\ttrie: TrieNode;\n\n\tleftMin: number;\n\n\trightMin: number;\n\n\texceptions: { [key: string]: RegExp } = {};\n\n\tconstructor(language: Language) {\n\t\tthis.trie = this._createTrie(language.patterns);\n\t\tthis.leftMin = language.leftmin;\n\t\tthis.rightMin = language.rightmin;\n\t\tif (language.exceptions) {\n\t\t\tconst exceptions = language.exceptions.split(/,\\s?/g);\n\n\t\t\tfor (const except of exceptions) {\n\t\t\t\tthis.exceptions[except.replace(/\\u2027/g, '').toLowerCase()] = new RegExp('(' + except.split('\\u2027').join(')(') + ')', 'i');\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Creates a trie from a language pattern.\n\t * @private\n\t * @param patternObject An object with language patterns.\n\t * @return An object trie.\n\t */\n\tprotected _createTrie(patternObject: Pattern): TrieNode {\n\t\tconst tree: TrieNode = {};\n\n\t\tfor (const size in patternObject) {\n\t\t\tif (patternObject.hasOwnProperty(size)) {\n\t\t\t\tconst patterns = patternObject[size].match(new RegExp('.{1,' + (+size) + '}', 'g'));\n\n\t\t\t\tfor (const pattern of patterns) {\n\t\t\t\t\tconst chars = pattern.replace(/[0-9]/g, '').split('');\n\t\t\t\t\tconst points = pattern.split(/\\D/);\n\t\t\t\t\tlet t = tree;\n\n\t\t\t\t\tfor (const c of chars) {\n\t\t\t\t\t\tconst codePoint = c.charCodeAt(0);\n\n\t\t\t\t\t\tif (!t[codePoint]) {\n\t\t\t\t\t\t\tt[codePoint] = {};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tt = t[codePoint];\n\t\t\t\t\t}\n\n\t\t\t\t\tt._points = [];\n\n\t\t\t\t\tfor (let p = 0; p < points.length; p++) {\n\t\t\t\t\t\tt._points[p] = parseInt(points[p]) || 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn tree;\n\t}\n\n\t/**\n\t * Hyphenates a text.\n\t *\n\t * @param str The text to hyphenate.\n\t * @param minLength Minimum length of the text to hyphenate\n\t * @return The same text with soft hyphens inserted in the right positions.\n\t */\n\thyphenateText(str: string, minLength = 4): string {\n\t\t// Regexp(\"\\b\", \"g\") splits on word boundaries,\n\t\t// compound separators and ZWNJ so we don't need\n\t\t// any special cases for those characters. Unfortunately\n\t\t// it does not support unicode word boundaries, so\n\t\t// we implement it manually.\n\t\tconst words = str.split(wordSplitRE);\n\n\t\tfor (let i = 0; i < words.length; i++) {\n\t\t\tif (words[i].includes('/')) {\n\t\t\t\t// Don't insert a zero width space if the slash is at the beginning or end\n\t\t\t\t// of the text, or right after or before a space.\n\t\t\t\tif (i !== 0 && i !== words.length - 1 && !(slashSpaceRE.test(words[i]))) {\n\t\t\t\t\twords[i] += '\\u200B';\n\t\t\t\t}\n\t\t\t} else if (words[i].length > minLength) {\n\t\t\t\twords[i] = this.hyphenate(words[i]).join('\\u00AD');\n\t\t\t}\n\t\t}\n\t\treturn words.join('');\n\t}\n\n\t/**\n\t * Hyphenates a word.\n\t *\n\t * @param word The word to hyphenate\n\t * @return An array of word fragments indicating valid hyphenation points.\n\t */\n\thyphenate(word: string): string[] {\n\t\tconst lowerCaseWord = word.toLowerCase();\n\t\tif (this.exceptions.hasOwnProperty(lowerCaseWord)) {\n\t\t\treturn word.match(this.exceptions[lowerCaseWord]).slice(1);\n\t\t}\n\n\t\tif (word.includes('\\u00AD')) {\n\t\t\treturn [word];\n\t\t}\n\n\t\tword = '_' + word + '_';\n\n\t\tconst characters = word.toLowerCase().split('');\n\t\tconst originalCharacters = word.split('');\n\t\tconst wordLength = characters.length;\n\n\t\tconst points: number[] = [];\n\t\tconst characterPoints: number[] = [];\n\t\tfor (let i = 0; i < wordLength; i++) {\n\t\t\tpoints[i] = 0;\n\t\t\tcharacterPoints[i] = characters[i].charCodeAt(0);\n\t\t}\n\n\t\tfor (let i = 0; i < wordLength; i++) {\n\t\t\tlet node = this.trie;\n\t\t\tfor (let j = i; j < wordLength; j++) {\n\t\t\t\tnode = node[characterPoints[j]];\n\n\t\t\t\tif (node) {\n\t\t\t\t\tconst nodePoints = node._points;\n\t\t\t\t\tif (nodePoints) {\n\t\t\t\t\t\tfor (let k = 0, nodePointsLength = nodePoints.length; k < nodePointsLength; k++) {\n\t\t\t\t\t\t\tpoints[i + k] = Math.max(points[i + k], nodePoints[k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst result: string[] = [''];\n\t\tfor (let i = 1; i < wordLength - 1; i++) {\n\t\t\tif (i > this.leftMin && i < (wordLength - this.rightMin) && points[i] % 2) {\n\t\t\t\tresult.push(originalCharacters[i]);\n\t\t\t} else {\n\t\t\t\tresult[result.length - 1] += originalCharacters[i];\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n",
    "//eslint-disable-next-line\nmodule.exports = require(\"./postscriptum\").default;",
    "import {GCPMContext, isFloatCall} from \"./gcpm\";\nimport {Process, Processor, ProcessorEvents, ProcessorOptions} from \"./process\";\nimport {events, logger, Mutations, ranges, rects, walk} from \"./util\";\nimport {Point} from \"./util/ranges\";\nimport {Unbreakable, unbreakableElement} from \"./breaks\";\nimport shim from \"./shim\";\nimport {Fragmentor} from \"./fragments\";\nimport {computeLength, getCustomProp, getCustomStyle} from \"./css\";\nimport * as valueParser from \"postcss-value-parser\";\n\nexport class Box {\n\trange: Range = new Range();\n\tinlinesRange?: Range;\n\tunbreakable?: Unbreakable;\n\tavoidBreakBefore = false;\n\tavoidBreakAfter = false;\n\tmainBlock?: HTMLElement;\n\tfloats?: Float[];\n\tbottomOffset?: BottomOffset;\n\tstartBlock: HTMLElement;\n\tendBlock: HTMLElement;\n\tbottom?: number;\n\ttop?: number;\n\tinlinesRangeRect?: ClientRect;\n\tinlinesStartBoundary?: boolean;\n\tinlineStart: number;\n\thasInlineBlocks = false;\n\tisRepeated?: boolean;\n}\n\nexport interface LayoutContextEvents extends ProcessorEvents {\n\t'float-move': { float: Float, area: HTMLElement, areaBody: HTMLElement, areaBodyRect: ClientRect, newAreaBodyRect: ClientRect };\n\t'body-bottom-change': { oldBottom: number, newBottom: number };\n}\n\nexport class LayoutContext extends events.EventEmitter<LayoutContextEvents> {\n\troot: HTMLElement;\n\tbody: HTMLElement;\n\tareas: Areas;\n\tparentCtx?: LayoutContext;\n\tboxes: Box[] = [];\n\tfloats: Float[] = [];\n\toverflowPoint: Point = null;\n\toverflowBox: Box = null;\n\tbreakPoint?: Point;\n\tbreakedBox?: Box;\n\tbottomOffsets: Map<HTMLElement, BottomOffset>;\n\tmutations: Mutations = new Mutations();\n\t_bodyBottom: number;\n\n\tconstructor(root: HTMLElement, body: HTMLElement, areas: Areas, parentCtx?: LayoutContext) {\n\t\tsuper();\n\t\tthis.root = root;\n\t\tthis.body = body;\n\t\tthis.areas = areas;\n\t\tthis.parentCtx = parentCtx;\n\t\tthis.bottomOffsets = this.parentCtx ? this.parentCtx.bottomOffsets : new Map();\n\t}\n\n\tget bodyBottom(): number {\n\t\tif (!this._bodyBottom) this._bodyBottom = rects.boundingScrollRect(this.body).bottom;\n\t\treturn this._bodyBottom;\n\t}\n\n\tset bodyBottom(val: number) {\n\t\tif (val != this._bodyBottom) {\n\t\t\tconst oldBottom = this._bodyBottom;\n\t\t\tthis._bodyBottom = val;\n\t\t\tthis.emit({type: \"body-bottom-change\", oldBottom, newBottom: this._bodyBottom});\n\t\t}\n\t}\n}\n\n\nexport type FloatPlacementPolicy = \"baseline\" | \"same-page\" | \"same-spread\" | \"fill\" | \"top-edge\" | \"bottom-edge\";\n\nexport type Areas = { [areaName: string]: HTMLElement };\n\nexport interface Float {\n\tbase: HTMLElement;\n\tcall: HTMLElement;\n\tbody: HTMLElement;\n\tareaName: string;\n\tplacement: FloatPlacementPolicy;\n}\n\nexport interface LayoutProcessorOptions extends ProcessorOptions {\n}\n\nexport interface LayoutProcessorEvents extends ProcessorEvents {\n\t'contents-start': Record<string, never>;\n\t'contents-end': Record<string, never>;\n\t'overflow-detected': { layoutContext: LayoutContext };\n\t'no-overflow': { layoutContext: LayoutContext };\n\t'no-break-point': { layoutContext: LayoutContext };\n\t'valid-break-point': { layoutContext: LayoutContext };\n\t'new-break-point-to-valid': { layoutContext: LayoutContext };\n\n}\n\nexport type LayoutProcessResult =\n\t{ boxes: Box[], floats: Float[], overflowPoint: Point, overflowBox?: Box }\n\t| { breakPoint: Point };\n\nexport interface BottomOffset {\n\tafter: number;\n\tinside: number;\n\tcurrentMargin: number;\n}\n\nexport abstract class LayoutProcessor<Options extends LayoutProcessorOptions = LayoutProcessorOptions, Events extends LayoutProcessorEvents = LayoutProcessorEvents> extends Processor<Options, Events> {\n\tstatic defaultOptions = Processor.defaultOptions as LayoutProcessorOptions;\n\n\tsource: HTMLElement;\n\tdoc: HTMLDocument;\n\n\tsubProcessors: SubProcessor[] = [];\n\tgcpmContext: GCPMContext = new GCPMContext();\n\tlayoutContext: LayoutContext = null;\n\tavoidBreakTypes = ['avoid'];\n\tlogNoValidBreakPoint = false;\n\n\tget mutations(): Mutations {\n\t\tlogger.debug(\"LayoutProcessor.mutations deprecated. Please use LayoutContext.mutations\");\n\t\treturn this.layoutContext && this.layoutContext.mutations;\n\t}\n\n\tprotected constructor(source: HTMLElement, options?: Partial<Options>) {\n\t\tsuper(options);\n\t\tthis.source = source;\n\t\tthis.doc = this.source.ownerDocument;\n\n\t\tshim(this.source.ownerDocument.defaultView);\n\t}\n\n\taddSubProcessor(subProcessor: SubProcessor): this {\n\t\tthis.subProcessors.push(subProcessor);\n\t\treturn this;\n\t}\n\n\t* contentsProcess(root: HTMLElement, areas: Areas, parentCtx?: LayoutContext): Process {\n\t\tif (this.listenerCount('contents-start')) yield {type: 'contents-start'};\n\t\tlet step = 'detect-overflow';\n\t\tlet event: keyof LayoutProcessorEvents, defaultNextStep;\n\n\t\tlet ctx: LayoutContext = null;\n\n\t\tdo {\n\t\t\tif (step == 'detect-overflow') {\n\t\t\t\tctx = this.layoutContext = this.createLayoutContext(root, areas, parentCtx);\n\t\t\t\tif (this.gcpmContext.pendingFloats.length) {\n\t\t\t\t\tconst pendingFloats = this.gcpmContext.pendingFloats.splice(0);\n\t\t\t\t\tfor (const float of pendingFloats) moveFloat(float, this.layoutContext, this.gcpmContext);\n\t\t\t\t}\n\t\t\t\tyield* this.boxesProcess(root);\n\n\t\t\t\t// A subfragmentor (ie columns) can return a break point at this stage\n\t\t\t\tif ('breakPoint' in ctx) {\n\t\t\t\t\tevent = 'valid-break-point';\n\t\t\t\t\tdefaultNextStep = 'break-point-found';\n\t\t\t\t} else {\n\t\t\t\t\tif (ctx.overflowPoint) {\n\t\t\t\t\t\tctx.breakPoint = ranges.clonePoint(ctx.overflowPoint);\n\t\t\t\t\t\tctx.breakedBox = ctx.overflowBox;\n\t\t\t\t\t\tdefaultNextStep = 'validate-break-point';\n\t\t\t\t\t\tevent = 'overflow-detected';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.breakPoint = ranges.positionAfter(root.lastChild);\n\t\t\t\t\t\tctx.breakedBox = null;\n\t\t\t\t\t\tevent = 'no-overflow';\n\t\t\t\t\t\tdefaultNextStep = 'break-point-found';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (step == 'validate-break-point') {\n\t\t\t\tconst future = validBreakPoint(ctx, this.avoidBreakTypes);\n\t\t\t\tif (typeof future != 'boolean' && ranges.pointEquals(future.breakPoint, ctx.breakPoint)) throw new Error(\"Loop on break point validation\");\n\t\t\t\tif (!future) {\n\t\t\t\t\tdefaultNextStep = 'no-break-point';\n\t\t\t\t\tevent = 'no-break-point';\n\t\t\t\t\tconst lastBox = ctx.boxes[ctx.boxes.length - 1];\n\t\t\t\t\tconst firstBoxIdx = ctx.boxes.findIndex((box) => !box.isRepeated);\n\t\t\t\t\tif (ctx.boxes.length - 1 > firstBoxIdx) {\n\t\t\t\t\t\tctx.breakPoint = ranges.rangeStart(lastBox.range);\n\t\t\t\t\t\tctx.breakedBox = lastBox;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tctx.breakPoint = ranges.rangeEnd(lastBox.range);\n\t\t\t\t\t\tctx.breakedBox = null;\n\t\t\t\t\t}\n\t\t\t\t} else if (future === true) {\n\t\t\t\t\tdefaultNextStep = 'break-point-found';\n\t\t\t\t\tevent = 'valid-break-point';\n\t\t\t\t} else {\n\t\t\t\t\tctx.breakPoint = future.breakPoint;\n\t\t\t\t\tctx.breakedBox = future.breakedBox;\n\t\t\t\t\tremoveFloats(ctx.floats, ctx.breakPoint);\n\t\t\t\t\tevent = 'new-break-point-to-valid';\n\t\t\t\t\tdefaultNextStep = 'validate-break-point';\n\t\t\t\t}\n\t\t\t} else if (step == 'no-break-point') {\n\t\t\t\tif (this.logNoValidBreakPoint) logger.warn('No valid break point found.');\n\t\t\t\tdefaultNextStep = 'break-point-found';\n\t\t\t}\n\t\t\tstep = event && this.listenerCount(event) ? yield {type: event, layoutContext: ctx} : null;\n\t\t\tif (!step) step = defaultNextStep;\n\t\t} while (step != 'break-point-found');\n\n\t\tif (this.listenerCount('contents-end')) yield {type: 'contents-end'};\n\t\treturn event;\n\t}\n\n\n\t* boxesProcess(root: HTMLElement): Process {\n\t\tconst doc = root.ownerDocument;\n\n\t\tconst ctx = this.layoutContext;\n\n\t\tconst bottomOffsetsStack = ctx.bottomOffsets.has(root.parentElement) ? [ctx.bottomOffsets.get(root.parentElement)] : [];\n\t\tconst bottomOffset = updateBottomOffsets(bottomOffsetsStack, getComputedStyle(root), getCustomStyle(root));\n\t\tctx.bottomOffsets.set(root, bottomOffset);\n\n\t\t// TODO DisplayedOrderTreeWalker to handle flex box and table captions?\n\t\tconst nodes = walk.createWalker(root, walk.isStaticNode);\n\t\tnodes.nextNode();\n\n\t\tlet box = new Box();\n\t\tbox.range.setStartBefore(root.firstChild);\n\n\t\tconst filledAreas = new Set<string>();\n\n\t\tconst subFragmentorCtx: SubProcessorContext = {\n\t\t\tlayoutContext: ctx,\n\t\t\tnodes,\n\t\t\tareas: ctx.areas,\n\t\t\tcurrentElement: null,\n\t\t\tcurrentCustomStyle: null,\n\t\t\tcurrentStyle: null,\n\t\t\tcurrentBox: box\n\t\t};\n\n\t\tconst onBoxEnd = (box: Box, isBlock: boolean): Point => {\n\t\t\tctx.boxes.push(box);\n\t\t\tbox.bottomOffset = isBlock ? bottomOffsetsStack.pop() : bottomOffsetsStack[bottomOffsetsStack.length - 1];\n\t\t\tctx.overflowPoint = testBoxOverflow(box, ctx.bodyBottom);\n\t\t\tif (box.floats && box.floats.length) {\n\t\t\t\tfor (const float of box.floats) {\n\t\t\t\t\tif (float && !filledAreas.has(float.areaName)) {\n\t\t\t\t\t\tconst filled = !moveFloat(float, ctx, this.gcpmContext, box);\n\t\t\t\t\t\tif (filled) filledAreas.add(float.areaName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (ctx.overflowPoint) ctx.overflowBox = box;\n\t\t\treturn ctx.overflowPoint;\n\t\t};\n\n\t\tfunction newBox(nextIsBlock: boolean): void {\n\t\t\tbox = new Box();\n\t\t\tsubFragmentorCtx.currentBox = box;\n\t\t\tbox.range.setStartBefore(nodes.currentNode);\n\t\t\tif (nextIsBlock) box.startBlock = nodes.currentNode as HTMLElement;\n\t\t}\n\n\t\twhile (true) {\n\t\t\tlet isBlock = false;\n\t\t\tif (nodes.currentNode.nodeType == Node.ELEMENT_NODE) {\n\t\t\t\tlet currentElt = nodes.currentNode as HTMLElement;\n\t\t\t\tsubFragmentorCtx.currentElement = currentElt;\n\t\t\t\tif (currentElt.localName == 'ps-debugger') debugger;\n\n\t\t\t\tif (isFloatCall(currentElt)) {\n\t\t\t\t\tconst float = this.gcpmContext.floats.get(currentElt.previousElementSibling as HTMLElement);\n\t\t\t\t\tif (!box.floats) box.floats = [];\n\t\t\t\t\tbox.floats.push(float);\n\t\t\t\t\tctx.floats.push(float);\n\t\t\t\t}\n\n\t\t\t\tlet style = subFragmentorCtx.currentStyle = getComputedStyle(currentElt);\n\t\t\t\tlet customStyle = subFragmentorCtx.currentCustomStyle = getCustomStyle(currentElt);\n\t\t\t\tisBlock = walk.displayAsBlockStyle(style);\n\n\t\t\t\tif (isBlock) {\n\t\t\t\t\tif (!box.startBlock) box.startBlock = currentElt;\n\t\t\t\t\tbox.endBlock = currentElt;\n\t\t\t\t\tbox.mainBlock = currentElt;\n\t\t\t\t\tconst bottomOffset = updateBottomOffsets(bottomOffsetsStack, style, customStyle);\n\t\t\t\t\tctx.bottomOffsets.set(currentElt, bottomOffset);\n\n\t\t\t\t\tif (!box.avoidBreakBefore) box.avoidBreakBefore = this.avoidBreakTypes.includes(getCustomProp(customStyle, 'break-before'));\n\t\t\t\t\tif (!box.unbreakable) box.unbreakable = unbreakableElement(currentElt);\n\t\t\t\t\tif (!box.isRepeated) box.isRepeated = currentElt.hasAttribute('ps-repeated');\n\n\t\t\t\t\tif (!this.avoidBreakTypes.includes(getCustomProp(customStyle, 'break-inside'))) this.fixWidth(currentElt, style, ctx);\n\t\t\t\t\tfor (const subFragmentor of this.subProcessors) {\n\t\t\t\t\t\tlet subResult = subFragmentor.call(this, subFragmentorCtx);\n\t\t\t\t\t\tif (subResult) {\n\t\t\t\t\t\t\tif (subResult instanceof Promise) subResult = yield subResult;\n\t\t\t\t\t\t\tbox.unbreakable = 'subFragmentor';\n\t\t\t\t\t\t\tif (subResult) {\n\t\t\t\t\t\t\t\t// TODO The last box can be invalid due to the interruption\n\t\t\t\t\t\t\t\tif (subResult.breakPoint) {\n\t\t\t\t\t\t\t\t\tctx.breakPoint = subResult.breakPoint;\n\t\t\t\t\t\t\t\t\tctx.breakedBox = box;\n\t\t\t\t\t\t\t\t\treturn ctx;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (subResult.floats) ctx.floats.push(...subResult.floats);\n\t\t\t\t\t\t\t\t\tif (subResult.overflowPoint) {\n\t\t\t\t\t\t\t\t\t\tctx.overflowPoint = subResult.overflowPoint;\n\t\t\t\t\t\t\t\t\t\tctx.overflowBox = box;\n\t\t\t\t\t\t\t\t\t\treturn ctx;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newCurrentElt = nodes.currentNode as HTMLElement;\n\t\t\t\t\tif (newCurrentElt != currentElt) {\n\t\t\t\t\t\tcurrentElt = newCurrentElt;\n\t\t\t\t\t\tcustomStyle = getCustomStyle(currentElt);\n\t\t\t\t\t\tstyle = getComputedStyle(currentElt);\n\t\t\t\t\t\tisBlock = walk.displayAsBlockStyle(style);\n\t\t\t\t\t\tif (isBlock) box.endBlock = currentElt;\n\t\t\t\t\t}\n\t\t\t\t\tif (!box.avoidBreakAfter) box.avoidBreakAfter = box.isRepeated || this.avoidBreakTypes.includes(getCustomProp(customStyle, 'break-after'));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet isInlineBlock = false;\n\t\t\tif (!isBlock) {\n\t\t\t\t// Not a block : creation of the inline range\n\t\t\t\tif (!box.inlinesRange) {\n\t\t\t\t\tbox.inlinesRange = doc.createRange();\n\t\t\t\t\tbox.inlinesRange.setStartBefore(nodes.currentNode);\n\t\t\t\t\tbox.inlinesStartBoundary = true;\n\t\t\t\t}\n\t\t\t\t// The inline end boundary is updated at each node\n\t\t\t\tbox.inlinesRange.setEndAfter(nodes.currentNode);\n\t\t\t\tif (walk.isInlineBlockElement(nodes.currentNode)) {\n\t\t\t\t\tisInlineBlock = true;\n\t\t\t\t\tbox.hasInlineBlocks = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst replaced = box.unbreakable == 'replacedElement' || box.unbreakable == 'subFragmentor';\n\t\t\tif (replaced || isInlineBlock || !nodes.firstChild()) {\n\t\t\t\twhile (!nodes.nextSibling()) {\n\t\t\t\t\tconst parentElement = nodes.parentNode() as HTMLElement;\n\n\t\t\t\t\tisBlock = !parentElement || walk.displayAsBlock(parentElement);\n\t\t\t\t\tif (parentElement && !box.avoidBreakAfter) box.avoidBreakAfter = this.avoidBreakTypes.includes(getCustomProp(parentElement, 'break-after'));\n\n\t\t\t\t\tif (nodes.currentNode == root) {\n\t\t\t\t\t\tbox.range.setEndAfter(root.lastChild);\n\t\t\t\t\t\tonBoxEnd(box, isBlock);\n\t\t\t\t\t\treturn ctx;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbox.endBlock = parentElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (box.inlinesRange) box.inlinesStartBoundary = false;\n\t\t\t\tconst nextIsBlock = walk.displayAsBlock(nodes.currentNode);\n\t\t\t\tif (!isBlock && nextIsBlock) {\n\t\t\t\t\tbox.mainBlock = null;\n\t\t\t\t}\n\t\t\t\tif (isBlock || nextIsBlock) {\n\t\t\t\t\tbox.range.setEndBefore(nodes.currentNode);\n\t\t\t\t\tif (onBoxEnd(box, isBlock)) return ctx;\n\t\t\t\t\tnewBox(nextIsBlock);\n\t\t\t\t}\n\t\t\t} else if (!isBlock && !box.inlinesStartBoundary && walk.displayAsBlock(nodes.currentNode)) {\n\t\t\t\t// Case where the first descendant of an inline is a block\n\t\t\t\tbox.mainBlock = box.endBlock = null;\n\t\t\t\tbox.range.setEndBefore(nodes.currentNode);\n\t\t\t\tbox.inlinesRange.setEndBefore(nodes.currentNode);\n\t\t\t\tif (onBoxEnd(box, isBlock)) return ctx;\n\t\t\t\tnewBox(true);\n\t\t\t}\n\t\t}\n\t\treturn ctx;\n\t}\n\n\tcreateLayoutContext(root: HTMLElement, areas: Areas, parentCtx: LayoutContext): LayoutContext {\n\t\treturn new LayoutContext(root, root, areas, parentCtx);\n\t}\n\n\tfixWidth(elem: HTMLElement, style: CSSStyleDeclaration, ctx: LayoutContext): void {\n\t\tif (elem.hasAttribute('ps-fixed-width')) return;\n\t\tlet fixed = false;\n\n\t\t// On tables, the width is fixed by setting the colgroup/col widths and and a min width\n\t\tif (elem instanceof HTMLTableElement) {\n\t\t\tconst caption = elem.caption == elem.firstElementChild && elem.caption;\n\t\t\tlet colgroup = caption ? caption.nextElementSibling : elem.firstElementChild;\n\n\t\t\tconst firstRowCells = Array.from(elem.rows[0].cells);\n\t\t\tconst colCount = firstRowCells.reduce((count: number, cell: HTMLTableCellElement) => count + cell.colSpan, 0);\n\n\t\t\tconst widths = new Map<number, number>();\n\t\t\tif (colgroup.localName == 'colgroup') {\n\t\t\t\tif (colCount != colgroup.children.length) {\n\t\t\t\t\tlogger.warn(\"Invalid colgroup/col count. The width of the table cannot be fixed.\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfor (let i = 0; i < colCount; i++) {\n\t\t\t\t\tconst col = colgroup.children.item(i) as HTMLTableColElement;\n\t\t\t\t\tconst width = col.style.width;\n\t\t\t\t\tif (!width || width.endsWith('%')) widths.set(i, -1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Creation of the colgroup if he does not exist\n\t\t\t\tcolgroup = this.doc.createElement('colgroup');\n\t\t\t\telem.insertBefore(colgroup, caption.nextElementSibling || elem.firstElementChild);\n\n\t\t\t\tfor (let i = 0; i < colCount; i++) {\n\t\t\t\t\tcolgroup.appendChild(this.doc.createElement('col'));\n\t\t\t\t\twidths.set(i, -1);\n\t\t\t\t}\n\t\t\t\tctx.mutations.push({\n\t\t\t\t\tcolgroup,\n\t\t\t\t\trevert(): void {\n\t\t\t\t\t\tthis.colgroup.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet widthCount = widths.size;\n\t\t\tif (widthCount) {\n\t\t\t\tfor (const row of elem.rows) {\n\t\t\t\t\tfor (let i = 0, iCol = 0; i < row.cells.length && widthCount; i++) {\n\t\t\t\t\t\tconst cell = row.cells[i];\n\t\t\t\t\t\tif (cell.colSpan == 1 && widths.get(iCol) == -1) {\n\t\t\t\t\t\t\twidths.set(iCol, cell.getBoundingClientRect().width);\n\t\t\t\t\t\t\twidthCount--;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tiCol += cell.colSpan;\n\t\t\t\t\t}\n\t\t\t\t\tif (!widthCount) break;\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0; i < colCount; i++) {\n\t\t\t\t\tconst width = widths.get(i);\n\t\t\t\t\tif (width != -1) {\n\t\t\t\t\t\tconst col = colgroup.children.item(i) as HTMLElement;\n\t\t\t\t\t\tctx.mutations.setStyle(col, {width: width + 'px'});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.mutations.setStyle(elem, {'min-width': style.width});\n\t\t\tfixed = true;\n\t\t} else if (elem.localName != 'tr' && walk.isRow(style)) {\n\t\t\tconst widths = new Map();\n\t\t\tfor (const cell of elem.children) {\n\t\t\t\tif (walk.isStatic(cell)) widths.set(cell, getComputedStyle(cell).width);\n\t\t\t}\n\t\t\tfor (const [cell, width] of widths) ctx.mutations.setStyle(cell, {width});\n\t\t\tfixed = true;\n\t\t}\n\t\tif (fixed) ctx.mutations.setAttr(elem, 'ps-fixed-width');\n\t}\n}\n\nexport function updateBottomOffsets(bottomOffsets: BottomOffset[], style: CSSStyleDeclaration, customStyle: CSSStyleDeclaration): BottomOffset {\n\tconst lastBottomOffset = bottomOffsets[bottomOffsets.length - 1];\n\tconst boxDecorationBreak = getCustomProp(customStyle, 'box-decoration-break');\n\tconst {inside: lastInside, currentMargin: lastCurrentMargin} = lastBottomOffset || {inside: 0, currentMargin: 0};\n\tlet bottomOffset: BottomOffset = {\n\t\tafter: lastInside,\n\t\tinside: lastInside,\n\t\tcurrentMargin: 0\n\t};\n\tconst marginBreak = getCustomProp(customStyle, 'margin-break');\n\tif (marginBreak == 'keep') bottomOffset.currentMargin = Math.max(parseFloat(style.marginBottom), lastCurrentMargin);\n\tlet decoration = 0;\n\tif (boxDecorationBreak == 'clone') {\n\t\tdecoration += parseFloat(style.paddingBottom);\n\t\tif (style.borderBottomStyle != 'none') {\n\t\t\tdecoration += parseFloat(style.borderBottomWidth);\n\t\t\tif (style.display == 'table' && style.borderCollapse == 'separate') {\n\t\t\t\tconst spacing = parseFloat(style.borderSpacing.split(' ')[1]);\n\t\t\t\tif (spacing) decoration += spacing;\n\t\t\t}\n\t\t}\n\t}\n\tif (decoration) {\n\t\tbottomOffset.after += bottomOffset.currentMargin;\n\t\tbottomOffset.inside += decoration + bottomOffset.currentMargin;\n\t\tbottomOffset.currentMargin = 0;\n\t}\n\n\tif (lastBottomOffset && Object.keys(bottomOffset).every((key: keyof BottomOffset) => bottomOffset[key] == lastBottomOffset[key])) bottomOffset = lastBottomOffset;\n\telse Object.freeze(bottomOffset);\n\tbottomOffsets.push(bottomOffset);\n\treturn bottomOffset;\n}\n\n// TODO Should we handle by custom prop les orphans/widows? Some special values (inherit, initial, unset) are not computable and the native values can be useful for native columns.\n// TODO Do not cut between an element and a preceding float\nfunction validBreakPoint(ctx: LayoutContext, avoidBreakValues: string[]): boolean | { breakPoint: Point, breakedBox: Box } {\n\tconst doc = ctx.body.ownerDocument;\n\tconst view = ctx.body.ownerDocument.defaultView;\n\n\tconst boxIndex = ranges.findPointInRanges(ctx.boxes.map((box) => box.range), ctx.breakPoint, true);\n\tif (boxIndex == -1) throw new Error(\"Box of the break point not found.\");\n\tlet box = ctx.boxes[boxIndex];\n\n\tfunction boxStartBreak(box: Box): { breakPoint: Point, breakedBox: Box } {\n\t\treturn {breakPoint: ranges.rangeStart(box.range), breakedBox: box};\n\t}\n\n\t// Test of the break-inside\n\tconst avoidedBreakInside = testAvoidBreakInside(ctx.breakPoint.container, ctx, avoidBreakValues, ctx.breakPoint);\n\tif (avoidedBreakInside) {\n\t\tconst beforeAvoidBreakInside = ranges.positionBefore(avoidedBreakInside);\n\t\tconst rootPoint = ranges.positionBefore(ctx.root);\n\t\tif (ranges.pointEquals(beforeAvoidBreakInside, rootPoint) || ranges.isPrecedingPoint(rootPoint, beforeAvoidBreakInside)) return false;\n\t\tconst avoidedBreakBoxIndex = ranges.findPointInRanges(ctx.boxes.map((box) => box.range), beforeAvoidBreakInside, true);\n\t\treturn boxStartBreak(ctx.boxes[avoidedBreakBoxIndex]);\n\t}\n\n\t// Point at the beginning of the box: we test the pages-break-before / avoid of the previous one\n\tif (ctx.breakPoint.container == box.range.startContainer && ctx.breakPoint.offset == box.range.startOffset) {\n\t\tconst previousBox = boxIndex > 0 && ctx.boxes[boxIndex - 1];\n\t\tif (!previousBox) return false;\n\n\t\tif (box.avoidBreakBefore || previousBox.avoidBreakAfter) {\n\t\t\t// If the previous box has an inline we continue the treatment on this box\n\t\t\tif (previousBox.inlinesRange) {\n\t\t\t\tbox = previousBox;\n\t\t\t\tctx.breakPoint = ranges.rangeEnd(previousBox.inlinesRange);\n\t\t\t} else {\n\t\t\t\treturn boxStartBreak(previousBox);\n\t\t\t}\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tif (box.unbreakable) return boxStartBreak(box);\n\n\tconst textBreak = box.inlinesRange && box.inlinesRange.isPointInRange(ctx.breakPoint.container, ctx.breakPoint.offset);\n\tif (textBreak) {\n\t\tif (ctx.breakPoint.offset == 0 && walk.firstChild(box.inlinesRange.startContainer, walk.isStaticNode) == ctx.breakPoint.container) return boxStartBreak(box);\n\t\t// Break in a text node\n\t\tconst startRange = doc.createRange();\n\t\tstartRange.setStart(box.inlinesRange.startContainer, box.inlinesRange.startOffset);\n\t\tstartRange.setEnd(ctx.breakPoint.container, ctx.breakPoint.offset);\n\t\tconst style = getComputedStyle(box.inlinesRange.commonAncestorContainer as Element);\n\n\t\tconst startLines = rects.rectsLines(startRange.getClientRects(), view);\n\t\tif (!startLines.length) return boxStartBreak(box);\n\t\t// Firefox does not support orphans and widows, we use CSS variables for them\n\t\tconst orphans = parseInt(style.getPropertyValue('--ps-orphans'));\n\t\tif (startLines.length < orphans) return boxStartBreak(box);\n\n\t\tconst widows = parseInt(style.getPropertyValue('--ps-widows'));\n\t\tif (widows > 0) {\n\t\t\tconst endRange = doc.createRange();\n\t\t\tendRange.setStart(ctx.breakPoint.container, ctx.breakPoint.offset);\n\t\t\tendRange.setEnd(box.inlinesRange.endContainer, box.inlinesRange.endOffset);\n\n\t\t\tconst endLines = rects.rectsLines(endRange.getClientRects(), view);\n\t\t\t// TODO If there is a pseudo-element immediately before the break point and on the same line, startLines incorrectly includes this line.\n\t\t\t// TODO So, we cannot use startLines to identify the missing line for widows: we works on all the lines of the inlines range.: we works on all the lines of the inlines range.\n\t\t\tconst lines = rects.rectsLines(box.inlinesRange.getClientRects(), view);\n\n\t\t\tconst missingLineCount = widows - endLines.length;\n\t\t\tif (missingLineCount > 0) {\n\t\t\t\tconst missingLineIndex = lines.length - endLines.length - missingLineCount;\n\t\t\t\tif (missingLineIndex < orphans) return boxStartBreak(box);\n\t\t\t\telse {\n\t\t\t\t\tconst line = lines[missingLineIndex - 1];\n\t\t\t\t\tconst direction = getComputedStyle(box.mainBlock || walk.ancestorOrSelf(box.range.commonAncestorContainer, walk.isElement)).direction;\n\t\t\t\t\tbox.inlineStart = direction == 'ltr' ? Math.ceil(line.left) : Math.floor(line.right);\n\t\t\t\t\tconst linePoint = testLinesOverflow(box, startLines, Math.ceil(line.bottom));\n\t\t\t\t\treturn {breakPoint: linePoint, breakedBox: box};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// TODO Should not happen, warning?\n\t\treturn boxStartBreak(box);\n\t}\n\n\treturn true;\n}\n\n// TODO Should we handle the textPosition in unbreakable inline elements?\nexport function testBoxOverflow(box: Box, bodyBottom: number): Point {\n\tif (box.mainBlock || !box.inlinesRange) {\n\t\tconst startBlockRect = rects.boundingScrollRect(box.startBlock);\n\t\tbox.top = startBlockRect.top;\n\t\tif (box.startBlock == box.endBlock) box.bottom = startBlockRect.bottom;\n\t\telse {\n\t\t\tbox.bottom = rects.boundingScrollRect(box.endBlock).bottom;\n\t\t\t// In some case (negative margins), the start block bottom can be bigger than the end block bottom\n\t\t\t// TODO The intermediate block bottoms between the end and the start are not handled\n\t\t\tif (box.endBlock.contains(box.startBlock) && startBlockRect.bottom > box.bottom) box.bottom = startBlockRect.bottom;\n\t\t}\n\t} else {\n\t\tbox.inlinesRangeRect = rects.boundingScrollRect(box.inlinesRange);\n\t\tbox.bottom = box.inlinesRangeRect.bottom;\n\t\tbox.top = box.inlinesRangeRect.top;\n\t}\n\n\tconst maxBottom = bodyBottom - box.bottomOffset.after - box.bottomOffset.currentMargin;\n\n\tif (box.bottom > maxBottom) {\n\t\tlet overflowPoint = ranges.rangeStart(box.range);\n\t\t// In some case (arabic with ltr direction...), the text position may be invalid if the top of the box is too close to the bottom of the body.\n\t\t// Inlines are not tested if there is less than 4px between the top of the box and the maxBottom\n\t\t// TODO Arbitrary, 1px is not enough, should be based on the fontSize but avoided for performances (getComputedStyle)\n\t\tif (!box.unbreakable && box.inlinesRange && maxBottom - box.top >= 4) overflowPoint = testInlineOverflow(box, maxBottom);\n\t\treturn overflowPoint;\n\t}\n\treturn null;\n}\n\nexport function testInlineOverflow(box: Box, bodyBottom: number, maxBottom?: number): Point {\n\tif (!maxBottom) maxBottom = bodyBottom - box.bottomOffset.inside - box.bottomOffset.currentMargin;\n\tif (!box.inlinesRangeRect) box.inlinesRangeRect = rects.boundingScrollRect(box.inlinesRange);\n\t// The maxBottom can occur between the box bottom and the inline range even if there is no padding\n\tif (box.inlinesRangeRect.bottom < maxBottom) return ranges.rangeEnd(box.inlinesRange);\n\tif (!box.inlineStart) {\n\t\tconst direction = getComputedStyle(box.mainBlock || walk.ancestorOrSelf(box.range.commonAncestorContainer, walk.isElement)).direction;\n\t\tbox.inlineStart = direction == 'ltr' ? Math.ceil(box.inlinesRangeRect.left) : Math.floor(box.inlinesRangeRect.right);\n\t}\n\n\t/*\n\t * TODO Chrome 97 returns the start of the text node if the test is done for the integer matching line.top.\n\t * In other words, it rounds up the start of the line.top and fail to return the previous line if less than that round.\n\t * Therefore, we are obliged to run through all the line to not fail in this case.\n\t */\n\tconst lines = rects.rectsLines(box.inlinesRange.getClientRects(), box.inlinesRange.startContainer.ownerDocument.defaultView);\n\tif (lines.length <= 1) return ranges.rangeStart(box.range);\n\n\treturn testLinesOverflow(box, lines, maxBottom);\n}\n\nexport function testLinesOverflow(box: Box, lines: rects.Rect[], maxBottom: number): Point {\n\tconst doc = box.range.commonAncestorContainer.ownerDocument;\n\t/*\n\t * TODO Chrome 97 returns the start of the text node if the test is done for the integer matching line.top.\n\t * In other words, it rounds up the start of the line.top and fail to return the previous line if less than that round.\n\t * Therefore, we are obliged to run through all the line to not fail in this case.\n\t */\n\tfor (let i = 0; i <= lines.length; i++) {\n\t\tconst line = lines[i];\n\t\tlet overflowLine;\n\t\t// Overflow between the last line and the end of the box\n\t\tif (i == lines.length) overflowLine = lines[i - 1];\n\t\telse if (line.bottom > Math.ceil(maxBottom)) {\n\t\t\tif (i === lines.length - 1 || lines[i + 1].top > Math.ceil(maxBottom)) overflowLine = line;\n\t\t}\n\n\t\tif (overflowLine) {\n\t\t\tlet overflowPoint = ranges.textPositionFromPoint(doc, box.inlineStart, Math.ceil(overflowLine.top) + 2);\n\t\t\tif (!overflowPoint) return ranges.rangeStart(box.range);\n\t\t\telse if (!ranges.containsPoint(box.inlinesRange, overflowPoint)) {\n\t\t\t\toverflowPoint = ranges.textPositionFromPoint(doc, box.inlineStart, Math.ceil(overflowLine.top));\n\t\t\t}\n\n\t\t\tif (!ranges.containsPoint(box.inlinesRange, overflowPoint)) {\n\t\t\t\tlogger.warn(\"Overflowing text position outside of the box inline range.\");\n\t\t\t\treturn ranges.rangeStart(box.range);\n\t\t\t} else {\n\t\t\t\t// Case of a break at the beginning of an inline\n\t\t\t\tif (overflowPoint.container.nodeType == Node.TEXT_NODE && overflowPoint.offset == 0) overflowPoint = ranges.positionBefore(overflowPoint.container);\n\t\t\t\tconst nodeAtPoint = ranges.nodeAtPoint(overflowPoint) || overflowPoint.container;\n\t\t\t\tif (walk.isElement(nodeAtPoint) && isFloatCall(nodeAtPoint)) overflowPoint = ranges.positionBefore(nodeAtPoint.previousElementSibling);\n\t\t\t\tif (box.hasInlineBlocks) {\n\t\t\t\t\tlet parent = nodeAtPoint;\n\t\t\t\t\twhile (parent != (box.mainBlock || box.range.commonAncestorContainer)) {\n\t\t\t\t\t\tif (walk.displayAsInlineBlock(parent)) {\n\t\t\t\t\t\t\toverflowPoint = ranges.positionBefore(parent);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tparent = parent.parentElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn overflowPoint;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function testAvoidBreakInside(fromNode: Node, ctx: LayoutContext, avoidBreakValues: string[], breakPoint?: Point, heightAtBreakElem = false): Element | false {\n\tlet parent = fromNode.nodeType == Node.TEXT_NODE ? fromNode.parentElement : fromNode as Element;\n\n\tlet rootBodyHeight: number;\n\n\tfunction getRootBodyHeight(): number {\n\t\tif (!rootBodyHeight) {\n\t\t\tlet rootCtx = ctx;\n\t\t\twhile (rootCtx.parentCtx) rootCtx = rootCtx.parentCtx;\n\t\t\trootBodyHeight = rootCtx.body.getBoundingClientRect().height;\n\t\t}\n\t\treturn rootBodyHeight;\n\t}\n\n\twhile (parent && parent != ctx.body.parentNode) {\n\t\tif (walk.displayAsBlock(parent)) {\n\t\t\tconst breakInside = getCustomProp(parent, 'break-inside');\n\t\t\tif (breakInside != \"auto\") {\n\t\t\t\tlet avoidInside = avoidBreakValues.includes(breakInside) && !parent.hasAttribute(\"ps-breaked-before\");\n\t\t\t\tif (!avoidInside) {\n\t\t\t\t\tconst firstVal = valueParser(breakInside).nodes[0];\n\t\t\t\t\tif (firstVal.type == 'function' && firstVal.value == '-ps-avoid-if-below') {\n\t\t\t\t\t\tconst elemThreshold = computeLength(firstVal.nodes[0].value, getRootBodyHeight());\n\t\t\t\t\t\tif (elemThreshold) {\n\t\t\t\t\t\t\tif (parent.scrollHeight - 1 < elemThreshold) avoidInside = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!avoidInside && breakPoint && firstVal.nodes.length > 2) {\n\t\t\t\t\t\t\tconst beforeBreakThreshold = computeLength(firstVal.nodes[2].value, parent.getBoundingClientRect().height);\n\t\t\t\t\t\t\tif (beforeBreakThreshold) {\n\t\t\t\t\t\t\t\tif (heightAtBreakElem) {\n\t\t\t\t\t\t\t\t\tconst breakElem = ranges.nodeAtPoint(breakPoint) as Element;\n\t\t\t\t\t\t\t\t\tconst height = breakElem.getBoundingClientRect().top - parent.getBoundingClientRect().top;\n\t\t\t\t\t\t\t\t\tif (height - 1 < beforeBreakThreshold) avoidInside = true;\n\t\t\t\t\t\t\t\t\theightAtBreakElem = false;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tconst range = document.createRange();\n\t\t\t\t\t\t\t\t\trange.setStartBefore(parent);\n\t\t\t\t\t\t\t\t\trange.setEnd(breakPoint.container, breakPoint.offset);\n\t\t\t\t\t\t\t\t\tif (range.getBoundingClientRect().height - 1 < beforeBreakThreshold) avoidInside = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (avoidInside) return parent;\n\t\t\t}\n\t\t}\n\t\tparent = parent.parentElement;\n\t}\n\treturn false;\n}\n\n\n// TODO Find a better way to modify/return the overflowPoint and rootBottom\nexport function moveFloat(float: Float, ctx: LayoutContext, gcpmContext: GCPMContext, box?: Box): boolean {\n\tif (ctx.overflowPoint && ranges.isPrecedingPoint(ranges.positionBefore(float.call), ctx.overflowPoint)) return false;\n\tlet floatCallRect = rects.boundingScrollRect(float.call);\n\tif (floatCallRect.bottom >= ctx.bodyBottom) return false;\n\n\tconst area = ctx.areas[float.areaName];\n\tif (!area) {\n\t\tgcpmContext.pendingFloats.push(float);\n\t\treturn false;\n\t}\n\tconst areaCtx = layoutCtxFromArea(ctx, area);\n\tif (area.lastChild && area.lastChild.nodeType != Node.TEXT_NODE) area.appendChild(document.createTextNode(' '));\n\tarea.appendChild(float.body);\n\n\tconst areaRect = rects.boundingScrollRect(area);\n\tconst areaBody = areaCtx.body;\n\tconst areaBodyRect = rects.boundingScrollRect(areaBody);\n\n\tif (!float.placement || float.placement == 'baseline') {\n\t\t// TODO Mutation to revert the marginTop ?\n\t\tfloat.body.style.marginTop = '';\n\t\tfloatCallRect = rects.boundingScrollRect(float.call);\n\t\tlet floatBodyRect = rects.boundingScrollRect(float.body);\n\t\tconst verticalArea = (areaRect.left < areaBodyRect.left && areaRect.right <= areaBodyRect.left)\n\t\t\t|| (areaRect.right > areaBodyRect.right && areaRect.left >= areaBodyRect.right);\n\t\tif (verticalArea && floatBodyRect.top < floatCallRect.top) {\n\t\t\tfloat.body.style.marginTop = Math.max(floatCallRect.top - floatBodyRect.top, 0) + 'px';\n\t\t\tfloatBodyRect = rects.boundingScrollRect(float.body);\n\t\t}\n\n\t\tif (!rects.includesRect(areaRect, floatBodyRect)) {\n\t\t\tgcpmContext.pendingFloats.push(float);\n\t\t\tfloat.body.remove();\n\t\t\treturn false;\n\t\t}\n\t} else if (float.placement == 'fill') {\n\t\t// TODO Check if the container has dimensions?\n\t\tfloat.body.style.width = '100%';\n\t\tfloat.body.style.height = '100%';\n\t} else {\n\t\tthrow new Error(\"Not implemented\");\n\t}\n\n\tconst newAreaBodyRect = rects.boundingScrollRect(areaBody);\n\tconst eventResult = ctx.emit({type: \"float-move\", float, area, areaBody, areaBodyRect, newAreaBodyRect});\n\tif (eventResult == 'pending') gcpmContext.pendingFloats.push(float);\n\tif (eventResult === false || eventResult == 'pending') {\n\t\tfloat.body.remove();\n\t\treturn false;\n\t}\n\n\tif (box) {\n\t\tif (floatCallRect.bottom >= newAreaBodyRect.bottom) {\n\t\t\tfloat.body.remove();\n\t\t\tctx.overflowPoint = testInlineOverflow(box, newAreaBodyRect.bottom, floatCallRect.top);\n\t\t\treturn false;\n\t\t}\n\t} else if (!newAreaBodyRect.height || !newAreaBodyRect.width) {\n\t\tfloat.body.remove();\n\t\treturn false;\n\t}\n\t/*\n\tlet currentCtx = ctx;\n\twhile (currentCtx.body != areaCtx.body) {\n\t\tconst bodyMaxBottom = newAreaBodyRect.bottom - (currentCtx.bottomOffsets.get(areaBody).after - currentCtx.bottomOffsets.get(currentCtx.body).after);\n\t\tif (currentCtx.bodyBottom > bodyMaxBottom) currentCtx.bodyBottom = bodyMaxBottom;\n\t\tcurrentCtx = currentCtx.parentCtx;\n\t}\n\t*/\n\tif (areaCtx.bodyBottom != newAreaBodyRect.bottom) areaCtx.bodyBottom = newAreaBodyRect.bottom;\n\n\tif (box) ctx.overflowPoint = testBoxOverflow(box, ctx.bodyBottom);\n\tctx.mutations.push({\n\t\tfloatBody: float.body,\n\t\trevert(): void {\n\t\t\tthis.floatBody.remove();\n\t\t}\n\t});\n\n\treturn true;\n}\n\nexport function removeFloats(floats: Float[], stopPoint?: Point): void {\n\tfor (let i = floats.length - 1; i >= 0; i--) {\n\t\tconst float = floats[i];\n\t\tif (!stopPoint || ranges.isPrecedingPoint(ranges.positionBefore(float.call), stopPoint)) {\n\t\t\tfloat.body.remove();\n\t\t\tfloats.pop();\n\t\t} else break;\n\t}\n}\n\nfunction layoutCtxFromArea(ctx: LayoutContext, area: HTMLElement): LayoutContext {\n\tlet areaCtx = ctx;\n\twhile (areaCtx.body.parentElement != area.parentElement) areaCtx = areaCtx.parentCtx;\n\treturn areaCtx;\n}\n\nexport interface SubProcessorContext {\n\tcurrentElement: HTMLElement;\n\tcurrentCustomStyle: CSSStyleDeclaration;\n\tcurrentStyle: CSSStyleDeclaration;\n\tnodes: TreeWalker;\n\tcurrentBox: Box;\n\tlayoutContext: LayoutContext;\n\tareas: Areas;\n}\n\nexport interface SubFragmentor {\n\tparentFragmentor: Fragmentor<any>;\n}\n\nexport function isSubFragmentor(object: any): object is SubFragmentor {\n\treturn 'parentFragmentor' in object;\n}\n\nexport type SubProcessor = (this: LayoutProcessor, ctx: SubProcessorContext) => false | Promise<false | LayoutProcessResult>;\n",
    "import {Process} from \"./process\";\nimport {cleanupAreas, createAreas, Fragment, Fragmentor, FragmentorEvents, FragmentorOptions} from \"./fragments\";\nimport {CountersStack} from \"./counters\";\nimport {dom, logger, walk} from \"./util\";\nimport {Point} from \"./util/ranges\";\nimport {Flow, FlowIterator, ForcedBreakType} from \"./flow\";\nimport {columnsSubProcessor} from \"./columns\";\nimport {CORNERS, createBookmarks, HORIZONTAL_MARGIN_BOXES, prepareGcpm, setBookmarkLabels, setLeaders, setMarginContents, setPageTargetCounters, setTargetCounters, SIDES, VERTICAL_MARGIN_BOXES} from \"./gcpm\";\nimport {breakAtPoint, unbreak} from \"./breaks\";\nimport {addStyleImagesToLoad, CssContext, cssContexts, getCustomStyle, computeLength} from \"./css\";\nimport {Hypher} from \"./hypher\";\nimport {getCustomProp} from \"./css\";\n\n\n/**\n * Sequence of pages\n *\n * A sequence is a set of page without a forced page break.\n */\nexport class Sequence {\n\trange: Range;\n\tpageName: string;\n\tpageGroupStart: boolean;\n\tbreakType: ForcedBreakType;\n\tbreakPoint: Point;\n\tstartPageIndex = -1;\n\tendPageIndex = -1;\n\n\t/**\n\t * Sequence constructor\n\t *\n\t * @param continuousFlow  The range returned by ContinuousFlowIterator.\n\t */\n\tconstructor(continuousFlow: Flow) {\n\t\tthis.range = continuousFlow.range.startContainer.ownerDocument.createRange();\n\t\tthis.pageName = continuousFlow.pageName;\n\t\tthis.pageGroupStart = continuousFlow.pageGroupStart;\n\t\tthis.breakType = continuousFlow.breakType;\n\t\tthis.breakPoint = {\n\t\t\tcontainer: continuousFlow.range.endContainer as Element,\n\t\t\toffset: continuousFlow.range.endOffset\n\t\t};\n\t}\n}\n\nexport class Page extends Fragment {\n\tmarginBoxes: { [marginName: string]: HTMLElement };\n\tside: string;\n\tblank: boolean;\n\tparentSequence: Sequence;\n\tcounters: CountersStack;\n}\n\nexport interface PaginatorOptions extends FragmentorOptions {\n\tsource?: HTMLElement;\n\tbookmarks: boolean;\n\tmaxFragmentTextLength: number;\n\tdefaultPageSize: [string, string];\n}\n\nexport interface PaginatorEvents extends FragmentorEvents {\n\t'preparation-start': Record<string, never>;\n\t'prepare': { node: Node };\n\t'preparation-end': Record<string, never>;\n\t'pagination-start': Record<string, never>;\n\t'pagination-end': Record<string, never>;\n\t'sequence-start': { sequence: Sequence };\n\t'sequence-end': { sequence: Sequence };\n\t'page-start': { page: Page };\n\t'page-end': { page: Page };\n}\n\nexport class Paginator extends Fragmentor<PaginatorOptions, PaginatorEvents> {\n\tstatic defaultOptions: PaginatorOptions = Object.assign(Object.create(Fragmentor.defaultOptions), {\n\t\tsource: null,\n\t\tbookmarks: true,\n\t\tdebug: false,\n\t\t/* slightly faster than 5K or 20K */\n\t\tmaxFragmentTextLength: 10000\n\t});\n\tsequences: Sequence[] = [];\n\tcurrentSequence: Sequence;\n\tpreviousSequence: Sequence;\n\tfirstPageSide: \"left\" | \"right\";\n\tflowIterator: FlowIterator;\n\tavoidBreakTypes = ['avoid', 'avoid-page'];\n\tforcedBreakTypes: ForcedBreakType[] = ['always', 'page', 'left', 'right', 'recto', 'verso'];\n\n\tconstructor(options?: Partial<PaginatorOptions>) {\n\t\tsuper(options && options.source || document.body, options);\n\t\tthis.addSubProcessor(columnsSubProcessor);\n\t\tthis._process = this.paginationProcess();\n\t}\n\n\tget pages(): Page[] {\n\t\treturn this.fragments as Page[];\n\t}\n\n\tget currentPage(): Page {\n\t\treturn this.currentFragment as Page;\n\t}\n\n\tset currentPage(page: Page) {\n\t\tthis.currentFragment = page;\n\t}\n\n\t/**\n\t * The main generator function of the pagination process.\n\t */\n\tprotected* paginationProcess(): Process {\n\t\tif (!this.source) throw new Error(\"The pagination source is undefined\");\n\t\tconst pendingSource = this.source.closest('[ps-process=pending]');\n\t\tif (pendingSource) throw new Error(\"Fragmentation already underway on this source.\");\n\t\tif (this.source == this.source.ownerDocument.documentElement) throw new Error(\"Pagination source cannot be the document element\");\n\n\t\tthis.dest.setAttribute('ps-process', 'pending');\n\t\tif (this.listenerCount('start')) yield 'start';\n\n\t\tif (!walk.firstChild(this.source, walk.isStaticNode)) throw new Error(\"The pagination source has no static child\");\n\n\t\tconst initialScroll: [ number, number ] = [window.scrollX, window.scrollY];\n\n\t\t// We make sure that the destination to an id\n\t\tdom.id(this.dest);\n\t\tlet cssContext = cssContexts.get(this.doc);\n\t\tif (!cssContext) {\n\t\t\tcssContext = new CssContext(this.doc, this.options);\n\t\t\tcssContexts.set(this.doc, cssContext);\n\t\t\tyield* cssContext.process();\n\t\t}\n\n\t\tif (this.listenerCount('preparation-start')) this.emit('preparation-start');\n\t\tconst nodes = walk.createIterator(this.source);\n\t\tlet currentNode;\n\t\twhile ((currentNode = nodes.nextNode())) {\n\t\t\tif (this.listenerCount('prepare')) this.emit({type: 'prepare', node: currentNode});\n\t\t\tif (walk.isHTMLElement(currentNode)) {\n\t\t\t\tconst style = getComputedStyle(currentNode);\n\t\t\t\tif (style.display != 'none') {\n\t\t\t\t\t// Move the caption on tables with `caption-side: bottom` at the end of the table\n\t\t\t\t\t// TODO test the property display 'table-caption' and 'table' of the currentNode and the parent instead of the prototype (perf ?)\n\t\t\t\t\tif (currentNode instanceof HTMLTableElement && currentNode.caption) {\n\t\t\t\t\t\tif (style.captionSide == \"bottom\") currentNode.appendChild(currentNode.caption);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst customStyle = getCustomStyle(currentNode);\n\t\t\t\t\tprepareGcpm(currentNode, customStyle, this.gcpmContext);\n\n\t\t\t\t\tlet hypher = cssContext.testHyphens(currentNode, style);\n\t\t\t\t\tif (hypher) {\n\t\t\t\t\t\tif (hypher instanceof Promise) hypher = yield hypher;\n\t\t\t\t\t\tif (hypher) cssContext.hyphenate(currentNode, hypher as Hypher);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.listenerCount('preparation-end')) this.emit('preparation-end');\n\n\t\tthis.source.style.display = 'none';\n\n\t\tif (this.listenerCount('pagination-start')) yield 'pagination-start';\n\n\t\tthis.flowIterator = new FlowIterator(this.source, this.forcedBreakTypes, this.options.maxFragmentTextLength);\n\t\tlet remaining;\n\t\twhile ((remaining = this.flowIterator.next())) {\n\t\t\tif (!this.firstPageSide) this.firstPageSide = remaining.breakType == 'left' ? 'left' : 'right';\n\t\t\tyield* this.sequenceProcess(remaining);\n\t\t}\n\t\tthis.onPageEnd(this.currentPage, true);\n\n\t\t// Writing the global page counter\n\t\tconst destCounterReset = getComputedStyle(this.dest).counterReset;\n\t\tthis.dest.style.counterReset = (destCounterReset == 'none' ? '' : destCounterReset) + \" pages \" + this.pages.length;\n\n\t\tlet bookmarksRoot = null;\n\t\tif (this.options.bookmarks) {\n\t\t\tbookmarksRoot = createBookmarks(this.doc, this.gcpmContext);\n\t\t\tthis.dest.insertBefore(bookmarksRoot, this.pages[0].container);\n\t\t}\n\n\t\tsetTargetCounters(this.pages, this.gcpmContext);\n\t\tif (bookmarksRoot) {\n\t\t\tsetBookmarkLabels(bookmarksRoot);\n\t\t}\n\n\t\tsetLeaders(this.gcpmContext);\n\n\t\tyield Promise.all(Array.from(this.imagesToLoad, (url) => new Promise((resolve) => {\n\t\t\tconst img = new Image();\n\t\t\timg.onload = resolve;\n\t\t\timg.onerror = resolve;\n\t\t\timg.src = url;\n\t\t})));\n\n\t\tthis.source.remove();\n\n\t\tthis.dest.setAttribute('ps-process', 'ended');\n\t\tif (this.listenerCount('pagination-end')) yield 'pagination-end';\n\n\t\twindow.scrollTo(...initialScroll);\n\t\tif (this.listenerCount('end')) yield 'end';\n\t}\n\n\t/**\n\t * The generator function of the processing of a sequence.\n\t *\n\t * @param {Range} flow - A range returned by ContinuousFlowIterator\n\t * @param {module:layout~Sequence} nextSequence - The following sequence\n\t * @memberof module:postscriptum~Processor\n\t */\n\t* sequenceProcess(flow: Flow): Process {\n\t\tthis.previousSequence = this.currentSequence;\n\t\tconst sequence = this.currentSequence = new Sequence(flow);\n\t\tthis.sequences.push(sequence);\n\t\tif (this.listenerCount('sequence-start')) yield {type: 'sequence-start', sequence};\n\n\t\t// Creation of a blank page if needed\n\t\tif (this.pages.length) {\n\t\t\t// Ascertains the side of the next page according to the side of the first\n\t\t\tconst nextPageSide = (this.pages.length + (this.firstPageSide == 'left' ? 1 : 0)) % 2 ? 'left' : 'right';\n\t\t\tconst needBlankPage = (sequence.breakType == 'left' && nextPageSide == 'right')\n\t\t\t\t|| (sequence.breakType == 'right' && nextPageSide == 'left')\n\t\t\t\t|| (sequence.breakType == 'verso' && nextPageSide == this.firstPageSide)\n\t\t\t\t|| (sequence.breakType == 'recto' && nextPageSide != this.firstPageSide);\n\n\t\t\tif (needBlankPage) {\n\t\t\t\tyield* this.pageProcess(true);\n\t\t\t}\n\t\t}\n\n\t\t// The start of the sequence is initialized to the root's start to includes the ancestors\n\t\tflow.range.setStartBefore(this.source.firstChild);\n\t\twhile (!flow.range.collapsed) {\n\t\t\tyield* this.pageProcess(false, flow.maxTextLength);\n\t\t\tif (this.layoutContext) {\n\t\t\t\t// The layoutContext is null if the page processing has been aborted by underflow when flow.maxTextLength is true\n\t\t\t\tflow.range.setStart(this.layoutContext.breakPoint.container, this.layoutContext.breakPoint.offset);\n\t\t\t\tflow.range.setEndAfter(this.currentPage.body.lastChild);\n\t\t\t}\n\t\t\tif (flow.maxTextLength && (!this.layoutContext || flow.range.collapsed)) {\n\t\t\t\tif (this.layoutContext) logger.debug(\"Max flow text length reached (after contents processing).\");\n\t\t\t\telse logger.debug(\"Max flow text length reached (before contents processing).\");\n\t\t\t\tconst body = this.currentPage.body;\n\t\t\t\tif (this.layoutContext) this.layoutContext.mutations.revert();\n\t\t\t\tthis.fragmentStartMut.revert();\n\t\t\t\tunbreak(body, this.source, 'after');\n\t\t\t\tflow = this.flowIterator.next();\n\t\t\t\tyield* this.continuePageProcess(this.currentPage, flow);\n\t\t\t\tflow.range.setStart(this.layoutContext.breakPoint.container, this.layoutContext.breakPoint.offset);\n\t\t\t\tflow.range.setEndAfter(this.currentPage.body.lastChild);\n\t\t\t}\n\t\t\tthis.fragmentStartMut.commit();\n\t\t\tthis.layoutContext.mutations.commit();\n\t\t\tif (this.listenerCount('page-end')) yield {type: 'page-end', page: this.currentPage};\n\t\t}\n\t\tthis.currentPage.container.removeAttribute('ps-processing');\n\t\tif (this.listenerCount('sequence-end')) yield {type: 'sequence-end', sequence};\n\t}\n\n\t/**\n\t * The generator function of the processing of a page.\n\t *\n\t * @param {boolean} blank - Signals if the page to process is blank\n\t */\n\t* pageProcess(blank: boolean, abortIfUnderflow = false): Process {\n\t\tconst previousPage = this.currentPage;\n\t\tif (previousPage) logger.removeScope();\n\t\tconst pageSide = (this.pages.length + (this.firstPageSide == 'right' ? 0 : 1)) % 2 ? 'left' : 'right';\n\t\tconst pageSequence = blank ? this.previousSequence || this.currentSequence : this.currentSequence;\n\t\tconst page = this.currentPage = createPage(this.doc, pageSequence, pageSequence.pageName, pageSide, this.pages.length + 1, blank);\n\t\tthis.pages.push(page);\n\t\tlogger.addScope(`page ${page.number}`);\n\t\tif (this.currentSequence.startPageIndex == -1 && !blank) this.currentSequence.startPageIndex = this.pages.length - 1;\n\t\tthis.currentSequence.endPageIndex = this.pages.length - 1;\n\t\tthis.dest.appendChild(page.container);\n\t\tif (this.listenerCount('page-start')) yield {type: 'page-start', page};\n\t\tthis.setBleedAndMarks(page);\n\n\t\tif (blank) {\n\t\t\tpage.body = page.area.appendChild(previousPage.body.cloneNode(false));\n\t\t\tthis.onPageEnd(previousPage);\n\t\t\tif (this.listenerCount('page-end')) yield {type: 'page-end', page};\n\t\t\tlogger.removeScope();\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstSequencePage = this.pages[this.currentSequence.startPageIndex];\n\t\tlet body;\n\t\tif (page == firstSequencePage) {\n\t\t\tbody = breakAtPoint(this.source, this.currentSequence.breakPoint, 'before');\n\t\t} else {\n\t\t\tbody = breakAtPoint(previousPage.body, this.layoutContext.breakPoint);\n\t\t\tthis.onFragmentBreak(previousPage);\n\t\t}\n\n\t\tthis.layoutContext = null;\n\t\tbody.style.display = '';\n\n\t\tbody.setAttribute('ps-page-body', '');\n\t\tpage.body = page.area.appendChild(body);\n\t\tcreateAreas(page);\n\n\t\tpage.container.setAttribute('ps-processing', '');\n\t\tif (previousPage) {\n\t\t\tpreviousPage.container.removeAttribute('ps-processing');\n\t\t\t// The definition of the margins of the previous page must be done after the cut, so that the last string-set is correctly identified\n\t\t\tthis.onPageEnd(previousPage);\n\t\t}\n\n\t\tthis.onFragmentStart(page, page == firstSequencePage);\n\n\t\tif (abortIfUnderflow && body.scrollHeight <= body.clientHeight) return;\n\t\tyield* this.contentsProcess(page.body, page.areas);\n\n\t\t/**\n\t\t * Dispatched when the pagination process starts.\n\t\t *\n\t\t * The attribute `ps-process` is set to `pending` right before this event.\n\t\t * At this stage, the stylesheets are not parsed and the source is not hidden.\n\t\t * @event start\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the pagination starts.\n\t\t *\n\t\t * At this stage, the stylesheets parsed and the source is hidden.\n\t\t * @event pagination-start\n\t\t */\n\n\n\t\t/**\n\t\t * Dispatched when the pagination ends.\n\t\t *\n\t\t * At this stage, the stylesheets parsed and the source is hidden.\n\t\t * @event pagination-end\n\t\t */\n\n\t\t/**\n\t\t * Dispatched when the pagination process ends.\n\t\t *\n\t\t * The attribute `ps-process` is set to `ended` right before this event.\n\t\t * @event end\n\t\t */\n\t}\n\n\t* continuePageProcess(page: Fragment, flow: Flow): Process {\n\t\tconst body = breakAtPoint(this.source, {\n\t\t\tcontainer: flow.range.endContainer as Element,\n\t\t\toffset: flow.range.endOffset\n\t\t}, 'before');\n\t\tbody.style.display = '';\n\t\tbody.setAttribute('ps-page-body', '');\n\t\tpage.body = page.area.insertBefore(body, page.area.firstChild);\n\t\tthis.onFragmentStart(page, false);\n\t\tyield* this.contentsProcess(page.body, page.areas);\n\t}\n\n\taddImagesToLoad(page: Page): void {\n\t\tsuper.addImagesToLoad(page);\n\t\tfor (const marginName in page.marginBoxes) {\n\t\t\taddStyleImagesToLoad(page.marginBoxes[marginName], this.imagesToLoad);\n\t\t}\n\t}\n\n\t// TODO onFragmentEnd ?\n\tonPageEnd(page: Page, last = false): void {\n\t\tsetMarginContents(page, this.gcpmContext);\n\t\t// TODO Add an option for the optimization on page counters value\n\t\tsetPageTargetCounters(page, this.dest, this.gcpmContext);\n\t\t// TODO Better way to remove this attribute: move the hidden source in the last page instead of breaking it ?\n\t\tif (last) page.body.removeAttribute('ps-breaked-after');\n\t}\n\n\tsetBleedAndMarks(page: Page): void {\n\t\tconst style = getComputedStyle(page.container);\n\t\tconst bleed = getCustomProp(style, 'bleed');\n\t\tlet bleedSize = getCustomProp(style, 'bleed-size');\n\t\tconst marks = getCustomProp(style, 'marks');\n\t\tif (bleed == 'auto' && marks.includes('crop')) {\n\t\t\tbleedSize = '6pt';\n\t\t\tpage.container.style.setProperty('--ps-bleed-size', bleedSize);\n\t\t}\n\t\tif (parseFloat(bleedSize)) page.container.setAttribute('ps-bleed', marks);\n\t}\n}\n\n\n/**\n * Create a page\n *\n * @param doc {Document}\n * @param name {string}\n * @param number {integer}\n * @param pseudos {string[]}\n */\nexport function createPage(doc: Document, sequence: Sequence, name: string, side: string, number: number, blank: boolean): Page {\n\tconst page = new Page();\n\tpage.container = doc.createElement('ps-page');\n\n\tpage.parentSequence = sequence;\n\n\tpage.side = side;\n\tpage.number = number;\n\tpage.blank = blank;\n\tif (name) page.container.setAttribute('ps-name', name);\n\tlet pseudos = side;\n\tif (number == 1) pseudos += ' first';\n\tif (blank) pseudos += ' blank';\n\telse {\n\t\tif (sequence.pageGroupStart) {\n\t\t\tpseudos += ' first-of-group';\n\t\t\tsequence.pageGroupStart = false;\n\t\t}\n\t}\n\tpage.container.setAttribute('ps-pseudos', pseudos);\n\n\tpage.marginBoxes = {};\n\tfor (let i = 0; i < SIDES.length; i++) {\n\t\tconst corner = doc.createElement('ps-margin-box');\n\t\tcorner.setAttribute('ps-name', CORNERS[i]);\n\t\tpage.marginBoxes[CORNERS[i]] = corner;\n\t\tpage.container.appendChild(corner);\n\n\t\tconst margin = doc.createElement('ps-margin');\n\t\tmargin.setAttribute('ps-side', SIDES[i]);\n\t\tconst boxNames = i % 2 == 0 ? HORIZONTAL_MARGIN_BOXES : VERTICAL_MARGIN_BOXES;\n\t\tfor (const boxName of boxNames) {\n\t\t\tconst marginBox = doc.createElement('ps-margin-box');\n\t\t\tconst marginName = SIDES[i] + '-' + boxName;\n\t\t\tmarginBox.setAttribute('ps-name', marginName);\n\t\t\tmargin.appendChild(marginBox);\n\t\t\tpage.marginBoxes[marginName] = marginBox;\n\t\t}\n\t\tpage.container.appendChild(margin);\n\t}\n\n\tpage.area = doc.createElement('ps-page-area');\n\tpage.container.appendChild(page.area);\n\treturn page;\n}\n",
    "/**\n * The entry point of postscriptum.\n */\nimport * as breaks from \"./breaks\";\nimport * as columns from \"./columns\";\nimport * as counters from './counters';\nimport * as css from './css';\nimport * as flow from './flow';\nimport * as fragments from './fragments';\nimport * as gcpm from './gcpm';\nimport * as layout from './layout';\nimport * as pages from './pages';\nimport * as precss from \"./precss\";\nimport * as process from \"./process\";\nimport * as rows from './rows';\nimport * as shim from \"./shim\";\nimport * as util from \"./util\";\nimport {dom, io, logger} from \"./util\";\nimport {Paginator, PaginatorOptions} from './pages';\nimport {Columnizator, ColumnizatorOptions} from \"./columns\";\n\nconst currentScript = document.currentScript as HTMLScriptElement;\nconst PAGINATE_ATTR = 'ps-paginate';\n\nexport type Postscriptum = {\n\tpagination(options?: Partial<PaginatorOptions>): Paginator;\n\tcolumnization(element: HTMLElement, options?: Partial<ColumnizatorOptions>): Columnizator;\n\tplugin: <O = Record<string, unknown>>(name: string, initializer?: process.Plugin<O>, defaultOptions?: O, script?: HTMLScriptElement) => process.Plugin<O>;\n\tgetOptions(baseUri?: string): Partial<PaginatorOptions>;\n\tbreaks: typeof breaks;\n\tutil: typeof util;\n\tprocess: typeof process;\n\tcss: typeof css;\n\tcounters: typeof counters;\n\tgcpm: typeof gcpm;\n\tpages: typeof pages;\n\tlayout: typeof layout;\n\trows: typeof rows;\n};\n\n/**\n * Global postscriptum object.\n */\nconst postscriptum: Postscriptum = {\n\tpagination: function (options?: Partial<PaginatorOptions>): Paginator {\n\t\tdebugger;\n\t\tif (options && options.logLevel) logger.setLevel(options.logLevel);\n\t\tconst processor = new Paginator(options);\n\t\treturn processor;\n\t},\n\n\tcolumnization: function (element: HTMLElement, options?: ColumnizatorOptions): Columnizator {\n\t\tif (options && options.logLevel) logger.setLevel(options.logLevel);\n\t\tconst processor = new Columnizator(element, options);\n\t\treturn processor;\n\t},\n\n\tplugin: function <O = Record<string, unknown> > (name: string, initializer?: process.Plugin<O>, defaultOptions: O = null, script: HTMLScriptElement = document.currentScript as HTMLScriptElement): process.Plugin<O> {\n\t\tif (!initializer) {\n\t\t\tif (name in process.pluginRegistry) return process.pluginRegistry[name].initializer;\n\t\t\treturn null;\n\t\t}\n\t\tprocess.pluginRegistry[name] = {\n\t\t\tinitializer,\n\t\t\tdefaultOptions,\n\t\t\tscriptOptions: script && io.parseOptionsFromElement(script, defaultOptions)\n\t\t};\n\t},\n\n\tgetOptions: function (): PaginatorOptions {\n\t\tlet configElement;\n\t\tif (currentScript && currentScript.hasAttribute(PAGINATE_ATTR)) {\n\t\t\tconfigElement = currentScript;\n\t\t} else if (document.documentElement.hasAttribute(PAGINATE_ATTR)) {\n\t\t\tconfigElement = document.documentElement;\n\t\t}\n\n\t\tif (configElement) {\n\t\t\tconst options = io.parseOptionsFromElement(configElement, Paginator.defaultOptions) as PaginatorOptions;\n\t\t\tif (!options.hyphUri && currentScript && !currentScript.src.startsWith('blob:')) options.hyphUri = new URL('hyph', currentScript.src).toString();\n\t\t\treturn options;\n\t\t}\n\t\treturn null;\n\t},\n\n\tbreaks,\n\tcolumns,\n\tcounters,\n\tcss,\n\tflow,\n\tfragments,\n\tgcpm,\n\tlayout,\n\tpages,\n\tprecss,\n\tprocess,\n\trows,\n\tshim,\n\tutil\n} as Postscriptum;\n\nexport default postscriptum;\n\n/**\n * Starts the pagination process if options are defined in the HTML.\n */\n(async () => {\n\tawait dom.docInteractive();\n\tif (!('postscriptumPreload' in window)) {\n\t\tconst options = postscriptum.getOptions();\n\t\tif (options) {\n\t\t\tconst process = postscriptum.pagination(options);\n\t\t\ttry {\n\t\t\t\tawait process.start().ended;\n\t\t\t\treturn options;\n\t\t\t} catch (e) {\n\t\t\t\ttry {\n\t\t\t\t\tpostscriptum.util.logger.error(e);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n})();\n\ndeclare global {\n\tinterface Window {\n\t\tpostscriptum: Postscriptum;\n\t}\n\n\tlet postscriptum: Postscriptum;\n}\n\n",
    "import * as postcss from \"postcss\";\nimport {Result} from \"postcss\";\nimport {Root} from \"postcss\";\nimport * as valueParser from \"postcss-value-parser\";\nimport {Node} from \"postcss-value-parser\";\nimport {logger} from \"./util\";\n\nexport type Options = {\n\tdefaultPageSize: [string, string];\n\tmediaType: string;\n};\n\ninterface PrecssPlugin<T> {\n\t(opts?: T): PrecssTransformer;\n}\n\ninterface PrecssTransformer {\n\t(root: any, result: any): Promise<any> | any;\n}\n\nconst GCPM_CONTENT_FUNCS = ['target-text', 'target-content', 'target-counter', 'target-counters', 'leader', 'element', 'string'];\nconst SIDES = ['top', 'right', 'bottom', 'left'];\nconst AREA_CSS_PROPS = ['margin', 'padding', 'border', 'outline', 'grid', 'display'];\n\nconst CONTENT_PSEUDOS_RE = /::(before|after|marker)\\s?/;\nconst SINGLE_COLON_PSEUDO_RE = /(^|[^:]):(before|after|first-letter|first-line)/g;\nconst PROPS_TO_PREFIX_RE = /^(?:size|page|break-.+|page-break-.+|orphans|widows|bookmark-.+|string-set|position|float|footnote-.+|margin-break|box-decoration-break|bleed|marks|columns|column-.+|hyphens|-ps-.+|-psp-.+)$/;\nconst PAGE_BREAKS = ['auto', 'avoid', 'always', 'page', 'left', 'right', 'recto', 'verso'];\n/** @see https://developer.mozilla.org/en-US/docs/Web/CSS/url() for the list of properties */\nconst URI_PROPS_RE = /^(--.+|.+-image|background|list-style|cursor|content|border|border-image-source|mask|-webkit-mask|src|symbols)$/;\nconst PSEUDO_TO_ATTR_RE = /:-(ps-breaked-(before|after))/g;\nconst FLOAT_PSEUDO_RE = /^(.*)::(-ps-float|footnote)-(marker|call)$/;\nconst COLUMNS_PSEUDO_RE = /^(.*)::-ps-columns(\\b.+)?$/;\n\nconst NOT_VAL_NODE = {type: \"word\", value: \"not\"} as Node;\nconst SPACE_VAL_NODE = {type: \"space\", value: \" \"} as Node;\nconst COMMA_VAL_NODE = {type: \"div\", value: \",\"} as Node;\nconst HREF_VAL_NODE = {type: \"word\", value: \"href\"} as Node;\n\n// TODO CSS source maps\nexport default postcss.plugin<Options>('ps-precss', (options: Options) => {\n\treturn (root: postcss.Root) => {\n\t\tif (options.mediaType) selectMediaType(root, options);\n\t\tcss3Pseudos(root);\n\t\treplaceAtPageRules(root, options);\n\t\tprefixProps(root);\n\t\treplacePseudos(root);\n\t\treplaceContent(root);\n\t\treturn root;\n\t};\n}) as PrecssPlugin<Options>;\n\nfunction selectMediaType(root: postcss.Root, options: Options): void {\n\troot.walkAtRules(/^media|import\\b/, (atRule) => {\n\t\tatRule.params = replaceMediaType(atRule.params, options.mediaType);\n\t});\n}\n\nexport function replaceMediaType(mediaQuery: string, mediaType: string): string {\n\tconst queryList = valueParser(mediaQuery);\n\tconst replacedVals = [];\n\tfor (let i = 0; i < queryList.nodes.length; i++) {\n\t\tconst val = queryList.nodes[i];\n\t\tif (val.type == \"word\" && val.value != \"and\") {\n\t\t\tif (val.value == \"not\") {\n\t\t\t\tconst nextWord = queryList.nodes[i + 2];\n\t\t\t\t// Replace \"not <mediaType>\" by \"not all\"\n\t\t\t\tif (nextWord.value == mediaType || nextWord.value == \"all\") replacedVals.push(val, SPACE_VAL_NODE);\n\t\t\t\tnextWord.value = \"all\";\n\t\t\t\treplacedVals.push(nextWord);\n\t\t\t\ti += 2;\n\t\t\t} else if (val.value != \"only\") {\n\t\t\t\tif (val.value != mediaType && val.value != \"all\") replacedVals.push(NOT_VAL_NODE, SPACE_VAL_NODE);\n\t\t\t\tval.value = \"all\";\n\t\t\t\treplacedVals.push(val);\n\t\t\t}\n\t\t} else {\n\t\t\treplacedVals.push(val);\n\t\t}\n\t}\n\treturn valueParser.stringify(replacedVals);\n}\n\nfunction css3Pseudos(root: postcss.Root): void {\n\troot.walkRules((rule) => {\n\t\trule.selector = rule.selector.replace(SINGLE_COLON_PSEUDO_RE, '$1::$2');\n\t});\n}\n\n\nfunction replaceAtPageRules(root: postcss.Root, options: Options): void {\n\tconst pageSizes = new Set<string>();\n\troot.walkAtRules(/^page\\b/, (atPageRule) => {\n\t\t// Transformation of \"@page <name> :<pseudo>\" to \"ps-page[ps-name=<name>][ps-pseudos~=<pseudo>]\"\n\t\t// TODO It's not clear if the pseudo needs to have a space before or not\n\t\t// TODO According to example 7 from https://www.w3.org/TR/css-page-3/#page-selectors, both are accepted\n\t\tconst atPageSelectors = postcss.list.comma(atPageRule.name.substr(4) + atPageRule.params);\n\t\tconst parent = atPageRule.parent;\n\n\t\tfor (const atPageSelector of atPageSelectors) {\n\t\t\tlet pageSelector = 'ps-page';\n\t\t\tconst parts = atPageSelector.replace(/:/g, ' :').split(' ');\n\n\t\t\tlet name = null;\n\t\t\tfor (const part of parts) {\n\t\t\t\tif (part) {\n\t\t\t\t\tif (part[0] == ':') {\n\t\t\t\t\t\tif (part.startsWith(':nth(')) {\n\t\t\t\t\t\t\tpageSelector += ':nth-of-type' + part.substr(4);\n\n\t\t\t\t\t\t} else if (part.startsWith(':first')) {\n\t\t\t\t\t\t\t// Additionnal attribute selector to give more specificity to the :first selectors\n\t\t\t\t\t\t\t// While :nth-child(n of [ps-name=]) is not implemented, A special pseudo is used for the first page of a group\n\t\t\t\t\t\t\tif (name) pageSelector += `[ps-pseudos~=first-of-group][ps-pseudos]`;\n\t\t\t\t\t\t\telse pageSelector += `[ps-pseudos~=${part.substr(1)}][ps-pseudos]`;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tpageSelector += `[ps-pseudos~=${part.substr(1)}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = part;\n\t\t\t\t\t\tpageSelector += `[ps-name=${name}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/*\n\t\t\t const comment = postcss.comment({ text: atPageRule.toString() });\n\t\t\t comment.source = atPageRule.source;\n\t\t\t parent.insertBefore(atPageRule, comment);*/\n\n\t\t\tconst pageRule = postcss.rule({selector: pageSelector});\n\t\t\tpageRule.source = atPageRule.source;\n\n\t\t\tconst pageAreaRule = postcss.rule({selector: pageSelector + ' > ' + 'ps-page-area'});\n\t\t\tpageAreaRule.source = atPageRule.source;\n\n\t\t\tfor (const node of atPageRule.nodes) {\n\t\t\t\tif (node.type == 'decl') {\n\t\t\t\t\tconst decl = node as postcss.Declaration;\n\t\t\t\t\tif (decl.prop == 'size') {\n\t\t\t\t\t\t// Transforms the size property to --ps-page-width and --ps-page-height\n\t\t\t\t\t\tconst size = getPageSize(decl.value, options.defaultPageSize);\n\t\t\t\t\t\tpageSizes.add(size.join(' '));\n\t\t\t\t\t\tconst widthVar = postcss.decl({prop: '--ps-page-width', value: size[0].toString()});\n\t\t\t\t\t\tconst heightVar = postcss.decl({prop: '--ps-page-height', value: size[1].toString()});\n\t\t\t\t\t\theightVar.source = node.source;\n\t\t\t\t\t\tpageRule.append(widthVar);\n\t\t\t\t\t\tpageRule.append(heightVar);\n\t\t\t\t\t\t// The size property is cloned to be prefixed\n\t\t\t\t\t\tpageRule.append(node.clone());\n\t\t\t\t\t} else if (AREA_CSS_PROPS.some((areaProp) => decl.prop.startsWith(areaProp))) {\n\t\t\t\t\t\tif (decl.prop == 'margin') {\n\t\t\t\t\t\t\tconst sides = expandSideDecl(node);\n\t\t\t\t\t\t\tfor (const [key, side] of SIDES.entries()) {\n\t\t\t\t\t\t\t\tpageRule.append(node.clone({\n\t\t\t\t\t\t\t\t\tprop: `--ps-page-margin-${side}`,\n\t\t\t\t\t\t\t\t\tvalue: pageMarginValue(sides[key], side)\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (decl.prop.startsWith('margin-')) {\n\t\t\t\t\t\t\tconst side = decl.prop.substr(7);\n\t\t\t\t\t\t\tpageRule.append(node.clone({\n\t\t\t\t\t\t\t\tprop: `--ps-page-margin-${side}`,\n\t\t\t\t\t\t\t\tvalue: pageMarginValue(decl.value, side)\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t} else if (decl.prop == 'padding') {\n\t\t\t\t\t\t\t// The padding is moved on the area\n\t\t\t\t\t\t\tconst sides = expandSideDecl(node);\n\t\t\t\t\t\t\tfor (const [key, side] of SIDES.entries()) {\n\t\t\t\t\t\t\t\tpageAreaRule.append(node.clone({\n\t\t\t\t\t\t\t\t\tprop: decl.prop + '-' + side,\n\t\t\t\t\t\t\t\t\tvalue: pageMarginValue(sides[key], side)\n\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (decl.prop.startsWith('padding-')) {\n\t\t\t\t\t\t\tconst side = decl.prop.substr(7);\n\t\t\t\t\t\t\tpageAreaRule.append(node.clone({\n\t\t\t\t\t\t\t\tprop: decl.prop,\n\t\t\t\t\t\t\t\tvalue: pageMarginValue(decl.value, side)\n\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t} else pageAreaRule.append(node.clone());\n\t\t\t\t\t} else if (decl.prop != 'width' && decl.prop != 'height') {\n\t\t\t\t\t\t// Other properties are copied to the new rules\n\t\t\t\t\t\t// The width and height property must be ignored (cf test css3-page/page-properties-000.xht)\n\t\t\t\t\t\tpageRule.append(node.clone());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (pageRule.nodes.length) parent.insertBefore(atPageRule, pageRule);\n\t\t\tif (pageAreaRule.nodes.length) parent.insertBefore(atPageRule, pageAreaRule);\n\n\t\t\t// Transformation des atRule de marges et de footnote\n\t\t\tfor (const node of atPageRule.nodes) {\n\t\t\t\tif (node.type == 'atrule') {\n\t\t\t\t\tconst atRule = node as postcss.AtRule;\n\t\t\t\t\tconst footnotesRule = atRule.name.startsWith('footnote');\n\t\t\t\t\tif (atRule.name == '-ps-body') {\n\t\t\t\t\t\tconst bodyRule = postcss.rule({selector: `${pageSelector} > ps-page-area > [ps-page-body]`});\n\t\t\t\t\t\twhile (atRule.first) bodyRule.append(atRule.first);\n\t\t\t\t\t\tbodyRule.append(postcss.decl({prop: 'grid-area', value: '-ps-body'}));\n\t\t\t\t\t\tparent.insertBefore(atPageRule, bodyRule);\n\t\t\t\t\t} else if (atRule.name == '-ps-area' || footnotesRule) {\n\t\t\t\t\t\t// We supports the atRule @footnote as specified by css-gcpm-3 and the @footnotes which is more\n\t\t\t\t\t\t// coherent with our naming convention (PrinceXML use @footnotes too).\n\t\t\t\t\t\tif (footnotesRule) atRule.params = atRule.name + atRule.params;\n\t\t\t\t\t\tconst paramsMatches = atRule.params.match(/^(.+?)\\b(.*)$/);\n\t\t\t\t\t\tlet areaName = paramsMatches[1];\n\t\t\t\t\t\tif (areaName == 'footnote') areaName = 'footnotes';\n\t\t\t\t\t\tconst areaRule = postcss.rule({selector: `${pageSelector} > ps-page-area > ps-area[ps-name=${areaName}]${paramsMatches[2].trim()}`});\n\t\t\t\t\t\twhile (atRule.first) areaRule.append(atRule.first);\n\t\t\t\t\t\tareaRule.append(postcss.decl({prop: 'grid-area', value: areaName}));\n\t\t\t\t\t\tparent.insertBefore(atPageRule, areaRule);\n\t\t\t\t\t} else if (atRule.name.startsWith('-ps-')) {\n\t\t\t\t\t\tconst atRuleType = atRule.name.substr(4);\n\t\t\t\t\t\tif (SIDES.includes(atRuleType)) {\n\t\t\t\t\t\t\tconst marginRule = postcss.rule({selector: `${pageSelector} > ps-margin[ps-side=${atRuleType}]`});\n\t\t\t\t\t\t\twhile (atRule.first) marginRule.append(atRule.first);\n\t\t\t\t\t\t\tparent.insertBefore(atPageRule, marginRule);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst marginSide = atRule.name.substr(0, atRule.name.indexOf('-'));\n\t\t\t\t\t\tconst marginBoxSelector = atRule.name.endsWith('-corner')\n\t\t\t\t\t\t\t? `${pageSelector} > ps-margin-box[ps-name=${atRule.name}]`\n\t\t\t\t\t\t\t: `${pageSelector} > ps-margin[ps-side=${marginSide}] > ps-margin-box[ps-name=${atRule.name}]`;\n\n\t\t\t\t\t\tconst marginBoxRule = postcss.rule({selector: marginBoxSelector});\n\t\t\t\t\t\tmarginBoxRule.source = atRule.source;\n\n\t\t\t\t\t\twhile (atRule.first) marginBoxRule.append(atRule.first);\n\n\t\t\t\t\t\t// The content of the margin is moved to the margin before pseudo\n\t\t\t\t\t\tfor (const decl of marginBoxRule.nodes as postcss.Declaration[]) {\n\t\t\t\t\t\t\tif (decl.prop == 'content') {\n\t\t\t\t\t\t\t\tconst contentRule = postcss.rule({selector: marginBoxSelector + '::before'});\n\t\t\t\t\t\t\t\tcontentRule.append(decl);\n\t\t\t\t\t\t\t\tparent.insertBefore(atPageRule, contentRule);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (marginBoxRule.nodes.length) parent.insertBefore(atPageRule, marginBoxRule);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tatPageRule.remove();\n\t});\n\t// TODO Incorrect print page size when enabled\n\t/*if (pageSizes.size == 1) {\n\t\tconst pageSize = pageSizes.values().next().value;\n\t\tconst printPageAtRule = postcss.atRule({name: 'page'});\n\t\tprintPageAtRule.append(postcss.decl({prop: 'size', value: pageSize}));\n\t\troot.append(printPageAtRule);\n\t}*/\n}\n\nfunction expandSideDecl(decl: postcss.Declaration): string[] {\n\tconst valueParts = postcss.list.space(decl.value);\n\tlet sides = new Array<string>(4);\n\tswitch (valueParts.length) {\n\tcase 1:\n\t\tfor (let i = 0; i < 4; i++) sides[i] = valueParts[0];\n\t\tbreak;\n\tcase 2:\n\t\tsides[0] = sides[2] = valueParts[0];\n\t\tsides[1] = sides[3] = valueParts[1];\n\t\tbreak;\n\tcase 3:\n\t\tsides[0] = valueParts[0];\n\t\tsides[1] = sides[3] = valueParts[1];\n\t\tsides[2] = valueParts[2];\n\t\tbreak;\n\tcase 4:\n\t\tsides = valueParts;\n\t\tbreak;\n\t}\n\n\treturn sides;\n}\n\nfunction pageMarginValue(value: string, side: string): string {\n\tconst base = side == 'top' || side == 'bottom' ? 'height' : 'width';\n\tif (value.endsWith('%')) {\n\t\treturn `calc(var(--ps-page-${base}) * ${parseFloat(value)} / 100)`;\n\t}\n\treturn value;\n}\n\nfunction getPageSize(value: string, defaultSize: [string, string]): [string, string] {\n\tlet size: [string, string] = null;\n\tconst valueParts = postcss.list.space(value);\n\tconst lastPart = valueParts[valueParts.length - 1];\n\tconst landscape = lastPart == \"landscape\";\n\tif (lastPart == \"portrait\" || landscape) {\n\t\tvalueParts.pop();\n\t\tif (!valueParts.length) valueParts.push(\"auto\");\n\t}\n\n\tif (valueParts.length && valueParts[0].match(/^[a-z]/i)) {\n\t\t/* Specified by https://www.w3.org/TR/css-page-3/#typedef-page-size-page-size */\n\t\tswitch (valueParts[0].toLowerCase()) {\n\t\tcase 'a5':\n\t\t\tsize = ['148mm', '210mm'];\n\t\t\tbreak;\n\t\tcase 'a4':\n\t\t\tsize = ['210mm', '297mm'];\n\t\t\tbreak;\n\t\tcase 'a3':\n\t\t\tsize = ['297mm', '420mm'];\n\t\t\tbreak;\n\t\tcase 'b5':\n\t\t\tsize = ['176mm', '250mm'];\n\t\t\tbreak;\n\t\tcase 'b4':\n\t\t\tsize = ['250mm', '353mm'];\n\t\t\tbreak;\n\t\tcase 'jis-b5':\n\t\t\tsize = ['182mm', '257mm'];\n\t\t\tbreak;\n\t\tcase 'jis-b4':\n\t\t\tsize = ['257mm', '364mm'];\n\t\t\tbreak;\n\t\tcase 'letter':\n\t\t\tsize = ['8.5in', '11in'];\n\t\t\tbreak;\n\t\tcase 'legal':\n\t\t\tsize = ['8.5in', '14in'];\n\t\t\tbreak;\n\t\tcase 'ledger':\n\t\t\tsize = ['11in', '17in'];\n\t\t\tbreak;\n\t\tcase 'auto':\n\t\t\tsize = defaultSize;\n\t\t\tbreak;\n\t\t\t/* Other sizes of A series format */\n\t\tcase 'a6':\n\t\t\tsize = ['105mm', '148mm'];\n\t\t\tbreak;\n\t\tcase 'a7':\n\t\t\tsize = ['74mm', ' 105mm'];\n\t\t\tbreak;\n\t\tcase 'a8':\n\t\t\tsize = ['52mm', '74mm'];\n\t\t\tbreak;\n\t\tcase 'a9':\n\t\t\tsize = ['37mm', '52mm'];\n\t\t\tbreak;\n\t\tcase 'a10':\n\t\t\tsize = ['26mm', '37mm'];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (!size) {\n\t\tif (valueParts.length >= 2) size = [valueParts[0], valueParts[1]];\n\t\telse size = [valueParts[0], valueParts[0]];\n\t}\n\n\tif (landscape) {\n\t\tsize = [size[1], size[0]];\n\t}\n\treturn size;\n}\n\nfunction prefixProps(root: postcss.Root): void {\n\troot.walkRules((rule: postcss.Rule) => {\n\t\trule.selector = rule.selector.replace(PSEUDO_TO_ATTR_RE, '[$1]');\n\t\tlet customRule: postcss.Rule = null;\n\t\trule.walkDecls(PROPS_TO_PREFIX_RE, (decl: postcss.Declaration) => {\n\t\t\tlet custom: boolean | RegExpMatchArray;\n\t\t\tlet resetCustom = false;\n\t\t\tlet customDecl: postcss.Declaration;\n\t\t\tif (decl.prop.startsWith('page-break-')) {\n\t\t\t\tif (PAGE_BREAKS.includes(decl.value)) {\n\t\t\t\t\tcustomDecl = decl.clone();\n\t\t\t\t\tcustomDecl.prop = decl.prop.replace(/^page-break-/, '--ps-break-');\n\t\t\t\t\tif (decl.value == 'always') customDecl.value = 'page';\n\t\t\t\t\telse if (decl.value == 'avoid') customDecl.value = 'avoid-page';\n\t\t\t\t\tcustom = true;\n\t\t\t\t} else {\n\t\t\t\t\tdecl.remove();\n\t\t\t\t}\n\t\t\t} else if (decl.prop == 'position') {\n\t\t\t\tcustom = decl.value.match(/^running\\(/);\n\t\t\t\tif (!custom) resetCustom = true;\n\t\t\t} else if (decl.prop == 'float') {\n\t\t\t\tif (decl.value == 'footnote') {\n\t\t\t\t\tdecl.value = '-ps-area(footnotes)';\n\t\t\t\t\tcustom = true;\n\t\t\t\t} else {\n\t\t\t\t\tcustom = decl.value.match(/^-ps-area\\(/);\n\t\t\t\t}\n\t\t\t\tif (!custom) resetCustom = true;\n\t\t\t} else if (decl.prop.startsWith('footnote-')) {\n\t\t\t\tdecl.prop = decl.prop.replace('footnote-', '-ps-float-');\n\t\t\t\tcustom = true;\n\t\t\t} else if (decl.prop == 'orphans' || decl.prop == 'widows') {\n\t\t\t\t// The properties 'orphans' and 'widows' are inherited, we do not hide them in a pseudo\n\t\t\t\t// Only positive integers are allowed as values of orphans and widows. Negative values and zero are invalid and must cause the declaration to be ignored.\n\t\t\t\t// https://drafts.csswg.org/css-break-3/#widows-orphans\n\t\t\t\tif (decl.value.match(/^\\d+$/) && parseInt(decl.value) > 0) decl.prop = '--ps-' + decl.prop;\n\t\t\t\telse decl.remove();\n\t\t\t} else if (decl.prop == 'columns' || decl.prop == '-ps-columns') {\n\t\t\t\tconst widthDecl = decl.cloneAfter();\n\t\t\t\twidthDecl.prop = '-ps-column-width';\n\t\t\t\tconst values = valueParser(decl.value).nodes.filter((n) => n.type == \"word\").map((n) => n.value);\n\n\t\t\t\tif (values[0].match(/^\\d+$/)) {\n\t\t\t\t\tdecl.value = values[0];\n\t\t\t\t\twidthDecl.value = values[1] || \"auto\";\n\t\t\t\t} else if (values.length > 1 && values[1].match(/^\\d+$/)) {\n\t\t\t\t\tdecl.value = values[1];\n\t\t\t\t\twidthDecl.value = values[0] || \"auto\";\n\t\t\t\t} else {\n\t\t\t\t\tdecl.value = \"auto\";\n\t\t\t\t\twidthDecl.value = values[0] == \"auto\" ? (values[1] || \"auto\") : values[0];\n\t\t\t\t}\n\t\t\t\tdecl.prop = '-ps-column-count';\n\t\t\t\tcustom = true;\n\t\t\t} else if (decl.prop == 'hyphens') {\n\t\t\t\t// The property 'hyphen' are inherited, we do not hide it in a pseudo\n\t\t\t\tif (decl.value == \"auto\") {\n\t\t\t\t\tdecl.cloneBefore({value: \"manual\"});\n\t\t\t\t\tdecl.prop = '--ps-' + decl.prop;\n\t\t\t\t}\n\t\t\t} else if (decl.prop == '-ps-hyphens') {\n\t\t\t\t// The property 'hyphen' are inherited, we do not hide it in a pseudo\n\t\t\t\tif (decl.value == \"auto\") {\n\t\t\t\t\tdecl.cloneBefore({prop: 'hyphens', value: \"manual\"});\n\t\t\t\t\tdecl.prop = '-' + decl.prop;\n\t\t\t\t}\n\t\t\t} else if (decl.prop == 'bleed') {\n\t\t\t\tdecl.prop = '--ps-bleed';\n\t\t\t\tdecl.cloneBefore({prop: '--ps-bleed-size', value: decl.value == \"auto\" ? \"0px\" : decl.value});\n\t\t\t} else if (decl.prop == 'marks') {\n\t\t\t\tdecl.prop = '--ps-' + decl.prop;\n\t\t\t} else {\n\t\t\t\tcustom = true;\n\t\t\t}\n\t\t\tif (custom || resetCustom) {\n\t\t\t\tif (!customRule) {\n\t\t\t\t\tcustomRule = postcss.rule();\n\t\t\t\t\tcustomRule.selectors = rule.selectors.map((selector) => selector + '::backdrop');\n\t\t\t\t\trule.parent.insertBefore(rule, customRule);\n\t\t\t\t}\n\n\t\t\t\tif (!customDecl) {\n\t\t\t\t\tcustomDecl = decl.clone();\n\t\t\t\t\tif (decl.prop.startsWith('-ps-')) customDecl.prop = '-' + decl.prop;\n\t\t\t\t\telse if (decl.prop.startsWith('-psp-')) customDecl.prop = '-' + decl.prop;\n\t\t\t\t\telse customDecl.prop = '--ps-' + decl.prop;\n\t\t\t\t\tif (resetCustom) customDecl.value = '';\n\t\t\t\t}\n\t\t\t\tcustomRule.append(customDecl);\n\t\t\t\tif (!resetCustom) decl.remove();\n\t\t\t\tif (!rule.nodes.length) rule.remove();\n\t\t\t}\n\t\t});\n\t});\n}\n\nfunction replacePseudos(root: postcss.Root): void {\n\troot.walkRules((rule) => {\n\t\tconst selectors = rule.selectors.slice();\n\t\tfor (let i = 0; i < selectors.length; i++) {\n\t\t\t// Floats\n\t\t\tconst floatMatch = selectors[i].match(FLOAT_PSEUDO_RE);\n\t\t\tif (floatMatch) {\n\t\t\t\tconst [, baseSelector, selKind, pseudoKind] = floatMatch;\n\n\t\t\t\t// Support of ::footnote-call\n\t\t\t\tif (pseudoKind == \"call\") {\n\t\t\t\t\tlet floatSel = pseudoKind == 'call' ? `[ps-float-${pseudoKind}]` : `ps-float-${pseudoKind}`;\n\t\t\t\t\tif (baseSelector) floatSel = baseSelector + ' + ' + floatSel;\n\t\t\t\t\t// Support of ::footnote-call and ::footnote-marker specified by css-gcpm-3\n\t\t\t\t\tif (selKind == 'footnote') floatSel += '[ps-float-area=\"footnotes\"]';\n\t\t\t\t\tselectors[i] = floatSel;\n\n\t\t\t\t\tconst floatContentRule = rule.clone({selector: floatSel + '::before', nodes: []});\n\t\t\t\t\trule.walkDecls('content', (decl) => {\n\t\t\t\t\t\t// Replace counter call by target-counter\n\t\t\t\t\t\tconst value = valueParser(decl.value);\n\t\t\t\t\t\tfor (const node of value.nodes) {\n\t\t\t\t\t\t\tif (node.type == 'function' && node.value == \"counter\") {\n\t\t\t\t\t\t\t\tnode.value = \"target-counter\";\n\t\t\t\t\t\t\t\tnode.nodes.unshift({\n\t\t\t\t\t\t\t\t\ttype: \"function\",\n\t\t\t\t\t\t\t\t\t\"value\": \"attr\",\n\t\t\t\t\t\t\t\t\tnodes: [HREF_VAL_NODE]\n\t\t\t\t\t\t\t\t} as Node, COMMA_VAL_NODE);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdecl.value = value.toString();\n\n\t\t\t\t\t\tif (i == selectors.length - 1) floatContentRule.append(decl);\n\t\t\t\t\t\telse floatContentRule.append(decl.clone());\n\t\t\t\t\t});\n\n\t\t\t\t\tif (floatContentRule.nodes.length) rule.parent.insertBefore(rule, floatContentRule);\n\t\t\t\t} else {\n\t\t\t\t\t// Support of ::footnote-marker\n\t\t\t\t\t// Use of marker for float-display: block, ::before otherwise\n\t\t\t\t\tselectors[i] = `${baseSelector}[ps-float-display=block]::marker`;\n\t\t\t\t\tselectors.push(`${baseSelector}[ps-float]:not([ps-float-display=block])::before`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Columns\n\t\t\tconst columnsMatch = selectors[i].match(COLUMNS_PSEUDO_RE);\n\t\t\tif (columnsMatch) {\n\t\t\t\tconst [, preSelector, postSelector] = columnsMatch;\n\n\t\t\t\tconst columnBodyRule = rule.cloneAfter();\n\t\t\t\tcolumnBodyRule.selectors = [`${preSelector} > ps-columns > ps-column > ps-column-body${postSelector}`, `${preSelector} > ps-column-body${postSelector}`];\n\t\t\t}\n\t\t}\n\t\trule.selectors = selectors;\n\t});\n}\n\nfunction replaceContent(root: postcss.Root): void {\n\troot.walkRules(CONTENT_PSEUDOS_RE, (rule: postcss.Rule) => {\n\t\tlet contentDecl: postcss.Declaration = null;\n\t\tlet hasGcpm = false;\n\t\trule.walkDecls('content', (decl) => {\n\t\t\tcontentDecl = decl;\n\t\t\tconst value = valueParser(decl.value);\n\t\t\tfor (const node of value.nodes) {\n\t\t\t\tif (node.type == 'function') {\n\t\t\t\t\tif (GCPM_CONTENT_FUNCS.includes(node.value)) {\n\t\t\t\t\t\thasGcpm = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (!contentDecl) return;\n\n\t\t// We write one rule for each pseudo of the original rule\n\t\tconst ruleByPseudo: { [pseudo: string]: postcss.Rule } = {};\n\t\tconst selectors = rule.selectors.slice();\n\t\tfor (const selector of selectors) {\n\t\t\tconst selectorMatches = selector.match(CONTENT_PSEUDOS_RE);\n\t\t\tconst pseudo = selectorMatches ? selectorMatches[1] : '';\n\t\t\tlet currentRule = ruleByPseudo[pseudo];\n\t\t\tif (!currentRule) {\n\t\t\t\t// Cloned before to avoid double parsing\n\t\t\t\tcurrentRule = ruleByPseudo[pseudo] = Object.keys(ruleByPseudo).length ? rule.cloneBefore() : rule;\n\t\t\t\tcurrentRule.selector = '';\n\t\t\t} else {\n\t\t\t\tcurrentRule.selector += ', ';\n\t\t\t}\n\t\t\tcurrentRule.selector += selector;\n\t\t}\n\n\t\tfor (const pseudo in ruleByPseudo) {\n\t\t\tif (pseudo) {\n\t\t\t\tconst rule = ruleByPseudo[pseudo];\n\t\t\t\tif (hasGcpm) {\n\t\t\t\t\trule.walkDecls('content', (decl) => {\n\t\t\t\t\t\tconst value = valueParser(decl.value);\n\t\t\t\t\t\tconst leaderIndex = value.nodes.findIndex((node) => node.type == 'function' && node.value == 'leader');\n\n\t\t\t\t\t\t// If the content has a leader, the values before and after are moved on pseudo element of a 'ps-leader' element\n\t\t\t\t\t\tif (leaderIndex != -1) replaceLeader(rule, decl, value, pseudo, leaderIndex);\n\n\t\t\t\t\t\tconst vals: valueParser.Node[] = [];\n\t\t\t\t\t\tvalue.walk((node, index, nodes) => {\n\t\t\t\t\t\t\tif (node.type == 'function' && GCPM_CONTENT_FUNCS.includes(node.value)) {\n\t\t\t\t\t\t\t\tnodes[index] = valueParser(`var(--ps-${pseudo}-val-${vals.length}, \"\")`).nodes[0];\n\t\t\t\t\t\t\t\tvals.push(node);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tdecl.value = value.toString();\n\t\t\t\t\t\trule.insertAfter(decl, decl.clone({\n\t\t\t\t\t\t\tprop: `--ps-${pseudo}-vals`,\n\t\t\t\t\t\t\tvalue: vals.map((val) => valueParser.stringify(val)).join(' ')\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\trule.append(contentDecl.clone({\n\t\t\t\t\t\tprop: `--ps-${pseudo}-vals`,\n\t\t\t\t\t\tvalue: \"none\"\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction replaceLeader(rule: postcss.Rule, decl: postcss.Declaration, value: valueParser.ParsedValue, pseudo: string, leaderIndex: number): void {\n\tconst leaderSelector = rule.selectors.map((sel) => {\n\t\tconst selWithoutPseudo = sel.substring(0, sel.indexOf('::' + pseudo));\n\t\treturn `${selWithoutPseudo} > ps-leader[ps-position=${pseudo}]`;\n\t}).join(', ');\n\tconst leaderRule = rule.cloneAfter({selector: leaderSelector});\n\tleaderRule.walkDecls('content', (decl) => decl.remove());\n}\n\nexport const importUnfold = postcss.plugin<postcss.ProcessOptions>('ps-import-unfold', (options) => {\n\treturn (root: postcss.Root) => {\n\t\tconst imports: Promise<void>[] = [];\n\t\troot.walkAtRules('import', (atImportRule) => {\n\t\t\tconst params = valueParser(atImportRule.params).nodes;\n\t\t\tconst urlFn = params[0];\n\t\t\tif (urlFn.type == 'function' && urlFn.value == 'url' && urlFn.nodes.length) {\n\t\t\t\tconst url = new URL(urlFn.nodes[0].value, options.from);\n\t\t\t\tconst importOptions = Object.create(options);\n\t\t\t\timportOptions.from = url.href;\n\n\t\t\t\tconst transformation = load(url.href).then((response) => {\n\t\t\t\t\tconst processor = postcss().use(importUnfold(importOptions));\n\t\t\t\t\treturn processor.process(response, importOptions);\n\t\t\t\t}).then((result) => {\n\t\t\t\t\tatImportRule.append(result.root.nodes);\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tlogger.warn(error);\n\t\t\t\t});\n\t\t\t\timports.push(transformation);\n\t\t\t}\n\t\t});\n\n\t\troot.walkDecls(URI_PROPS_RE, (decl) => {\n\t\t\tconst value = valueParser(decl.value);\n\t\t\tvalue.walk((node) => {\n\t\t\t\tif (node.type == 'function' && node.value == 'url') {\n\t\t\t\t\tconst firstParam = node.nodes[0];\n\t\t\t\t\tconst url = new URL(firstParam.value, options.from);\n\t\t\t\t\tfirstParam.value = url.href;\n\t\t\t\t}\n\t\t\t});\n\t\t\tdecl.value = value.toString();\n\t\t});\n\t\treturn Promise.all(imports);\n\t};\n}) as PrecssPlugin<any>;\n\nexport const importFold = postcss.plugin('ps-import-fold', () => {\n\tfunction walkAtImportRule(node: postcss.Container): void {\n\t\tnode.walkAtRules('import', (atImportRule) => {\n\t\t\tif (atImportRule.nodes) {\n\t\t\t\twalkAtImportRule(atImportRule);\n\t\t\t\tconst params = postcss.list.space(atImportRule.params);\n\t\t\t\tconst importContent = postcss.root();\n\t\t\t\timportContent.nodes = atImportRule.nodes;\n\t\t\t\tdelete atImportRule.nodes;\n\t\t\t\tconst blob = new Blob([importContent.toString()], {type: 'text/css'});\n\t\t\t\tparams[0] = `url(${URL.createObjectURL(blob)})`;\n\t\t\t\tatImportRule.params = params.join(' ');\n\t\t\t}\n\t\t});\n\t}\n\n\treturn walkAtImportRule;\n}) as PrecssPlugin<any>;\n\nfunction load(url: string): Promise<string> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst request = new XMLHttpRequest();\n\t\trequest.open('GET', url);\n\t\trequest.onload = () => resolve(request.responseText);\n\t\trequest.onerror = () => reject(new Error(`Unable to fetch '${url}'`));\n\t\trequest.send();\n\t});\n}",
    "import {events} from \"./util\";\n\nexport type ProcessEvent = string | { type: string, [key: string]: any };\n\nexport type Process = IterableIterator<Promise<any> | ProcessEvent>;\n\nexport interface ProcessorOptions {\n\tplugins: string[];\n\tlogLevel: \"error\" | \"warn\" | \"info\" | \"debug\";\n}\n\nexport interface ProcessorEvents {\n\t'start': Record<string, never>;\n\t'end': Record<string, never>;\n\t'error': { error: Error };\n}\n\nexport abstract class Processor<Options extends ProcessorOptions = ProcessorOptions, Events extends ProcessorEvents = ProcessorEvents>\n\textends events.EventEmitter<Events> {\n\n\tstatic defaultOptions: ProcessorOptions = {\n\t\tplugins: [],\n\t\tlogLevel: 'warn'\n\t};\n\toptions: Options;\n\tprotected _process: Process;\n\n\tprotected constructor(options?: Partial<Options>) {\n\t\tsuper();\n\t\t// TODO Typescript\n\t\tconst defaultOptions = (this.constructor as typeof Processor).defaultOptions as any;\n\t\tthis.options = Object.assign(Object.create(defaultOptions), options);\n\t}\n\n\tprotected _ended: Promise<void>;\n\n\tget ended(): Promise<void> {\n\t\treturn this._ended;\n\t}\n\n\tuse(pluginNames: string | string[], useOptions?: Record<string, unknown>): this {\n\t\tif (!Array.isArray(pluginNames)) pluginNames = [pluginNames];\n\t\tpluginNames.forEach((pluginName) => {\n\t\t\tconst plugin = pluginRegistry[pluginName];\n\t\t\tif (!plugin) throw new Error(\"Plugin '\" + pluginName + \"' not found\");\n\n\t\t\tconst options = Object.create(plugin.defaultOptions || {});\n\t\t\tif (plugin.scriptOptions) Object.assign(options, plugin.scriptOptions);\n\t\t\tif (useOptions) Object.assign(options, useOptions);\n\t\t\tplugin.initializer(this, options);\n\t\t});\n\t\treturn this;\n\t}\n\n\tstart(): this {\n\t\tthis._ended = this._start();\n\t\treturn this;\n\t}\n\n\temitError(error: Error): void {\n\t\tif (!this.emit({type: 'error', error})) throw error;\n\t}\n\n\tprotected async _start<KE extends keyof Events>(): Promise<void> {\n\t\ttry {\n\t\t\tlet tick = this._process.next();\n\t\t\twhile (!tick.done) {\n\t\t\t\tlet result;\n\t\t\t\tif (tick.value instanceof Promise) {\n\t\t\t\t\t// Promise yielded\n\t\t\t\t\tresult = await tick.value;\n\t\t\t\t} else {\n\t\t\t\t\t// Event\n\t\t\t\t\tconst eventObj = (typeof tick.value == 'string' ? {type: tick.value} : tick.value) as events.Event<KE, Events>;\n\t\t\t\t\tresult = this.emit(eventObj, this);\n\t\t\t\t\t// Promised returned by event listener\n\t\t\t\t\tif (result instanceof Promise) result = await result;\n\t\t\t\t}\n\t\t\t\ttick = this._process.next(result);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.emitError(error);\n\t\t}\n\t}\n}\n\nexport interface Plugin<Options> {\n\t(processor: Processor, options: Options, ...args: any[]): any;\n}\n\nexport type PluginEntry<Options> = {\n\tinitializer: Plugin<Options>\n\tdefaultOptions: Options;\n\tscriptOptions: Options;\n\tscript?: HTMLScriptElement;\n};\n\nexport type PluginRegistry = { [pluginName: string]: PluginEntry<any> };\nexport const pluginRegistry: PluginRegistry = {};\n",
    "import {Process} from \"./process\";\nimport {events, logger, ranges, walk} from \"./util\";\nimport {Mutations} from \"./util\";\nimport {Fragmentor, LayoutProcessResult} from \"./fragments\";\nimport {LayoutProcessor, LayoutProcessorEvents, SubFragmentor, SubProcessor, SubProcessorContext, testAvoidBreakInside} from \"./layout\";\nimport {Areas} from \"./layout\";\nimport {LayoutContext} from \"./layout\";\n\nclass CellLayoutProcessor extends LayoutProcessor implements SubFragmentor {\n\tlastEvent: keyof LayoutProcessorEvents;\n\tlimitedFloats: boolean;\n\n\tconstructor(source: HTMLElement, readonly parentFragmentor: Fragmentor) {\n\t\tsuper(source);\n\n\t\tthis.gcpmContext = parentFragmentor.gcpmContext;\n\t\tthis.avoidBreakTypes = parentFragmentor.avoidBreakTypes;\n\t\tthis._process = this.cellProcess();\n\t}\n\n\t* cellProcess(): Process {\n\t\tif (this.listenerCount('start')) yield 'start';\n\t\tlogger.addScope(() => {\n\t\t\tconst row = this.source.parentElement;\n\t\t\tconst cellIndex = Array.prototype.indexOf.call(row.children, this.source);\n\t\t\tconst rowIndex = Array.prototype.indexOf.call(row.parentNode.children, row);\n\t\t\treturn `row ${rowIndex + 1}, cell ${cellIndex + 1}`;\n\t\t});\n\t\tconst parentCtx = this.parentFragmentor.layoutContext;\n\t\tthis.lastEvent = yield* this.contentsProcess(this.source, parentCtx.areas, parentCtx);\n\t\tif (this.limitedFloats) logger.info(`Some floats was deported.`);\n\t\tlogger.removeScope();\n\t\tif (this.listenerCount('end')) yield 'end';\n\t}\n\n\tcreateLayoutContext(root: HTMLElement, areas: Areas, parentCtx: LayoutContext): LayoutContext {\n\t\tclass CellLayoutContext extends LayoutContext {\n\t\t\tget bodyBottom(): number {\n\t\t\t\treturn parentCtx.bodyBottom;\n\t\t\t}\n\n\t\t\tset bodyBottom(val) {\n\t\t\t\tparentCtx.bodyBottom = val;\n\t\t\t}\n\t\t}\n\n\t\tconst ctx = new CellLayoutContext(root, parentCtx.body, areas, parentCtx);\n\t\tconst floatBottomLimit = Math.min(this.source.getBoundingClientRect().bottom + ctx.bottomOffsets.get(this.source.parentElement).inside, parentCtx.bodyBottom);\n\t\tctx.on(\"float-move\", ({newAreaBodyRect}) => {\n\t\t\tif (newAreaBodyRect.bottom <= floatBottomLimit) {\n\t\t\t\tthis.limitedFloats = true;\n\t\t\t\treturn 'pending';\n\t\t\t}\n\t\t});\n\t\treturn ctx;\n\t}\n\n\temit<K extends keyof LayoutProcessorEvents>(event: events.Event<K, LayoutProcessorEvents> | K, target?: events.EventEmitter<LayoutProcessorEvents>): any {\n\t\tsuper.emit(event, target);\n\t\tconst eventObj = (typeof event == 'string' ? {type: event} : event) as events.Event<K, LayoutProcessorEvents>;\n\t\tif (eventObj.type != 'start' && eventObj.type != 'end') this.parentFragmentor.emit(event, target);\n\t}\n}\n\nexport const rowSubFragmentor: SubProcessor = function (this: Fragmentor, ctx: SubProcessorContext): false | Promise<false | LayoutProcessResult> {\n\tconst rowType = walk.isRow(ctx.currentStyle);\n\tif (!rowType) return false;\n\n\treturn (async () => {\n\t\tconst row = ctx.currentElement;\n\t\tconst cells: HTMLElement[] = [];\n\n\t\tfor (const cell of row.children as HTMLCollectionOf<HTMLElement>) {\n\t\t\tif (walk.isStatic(cell)) {\n\t\t\t\t// Test the avoidBreakInside of each cells\n\t\t\t\tif (testAvoidBreakInside(row, ctx.layoutContext, this.avoidBreakTypes, ranges.positionAfter(row))) return false;\n\t\t\t\tcells.push(cell);\n\t\t\t}\n\t\t}\n\n\t\t// Style modification\n\t\tctx.layoutContext.mutations.setAttr(row, 'ps-row', rowType);\n\t\tconst verticalStyleMut = new Mutations();\n\t\tfor (const cell of cells) {\n\t\t\tconst props: { [key: string]: string } = {};\n\t\t\tif (rowType == 'flex-row') props['align-items'] = 'flex-start';\n\t\t\telse props['vertical-align'] = 'top';\n\t\t\tverticalStyleMut.setStyle(cell, props);\n\t\t}\n\n\t\tconst fragmentors: Map<HTMLElement, CellLayoutProcessor> = new Map();\n\t\tlet invalid = false;\n\t\tlet overflow = false;\n\t\tfor (const cell of cells) {\n\t\t\tif (walk.firstChild(cell, walk.isStaticNode)) {\n\t\t\t\tconst fragmentor = new CellLayoutProcessor(cell, this);\n\t\t\t\tfragmentors.set(cell, fragmentor);\n\t\t\t\tawait fragmentor.start().ended;\n\t\t\t\tif (fragmentor.lastEvent == 'no-break-point') {\n\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (fragmentor.lastEvent != 'no-overflow') {\n\t\t\t\t\toverflow = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tverticalStyleMut.revert();\n\n\t\tif (invalid) {\n\t\t\tfor (const cell of cells) if (fragmentors.has(cell)) fragmentors.get(cell).layoutContext.mutations.revert();\n\t\t\treturn false;\n\t\t} else if (overflow) {\n\t\t\tconst destRow = row.cloneNode(false);\n\t\t\trow.setAttribute('ps-breaked-after', '');\n\t\t\tthis.layoutContext.mutations.setAttr(destRow, 'ps-breaked-before');\n\t\t\tthis.layoutContext.mutations.insertNode(row.parentElement, destRow, row.nextSibling);\n\n\t\t\tfor (const cell of cells) {\n\t\t\t\tconst fragmentor = fragmentors.get(cell);\n\t\t\t\tconst breakPoint = fragmentor ? fragmentor.layoutContext.breakPoint : ranges.positionAtStart(cell);\n\t\t\t\tconst cellAfter = this.layoutContext.mutations.breaks(cell, breakPoint);\n\t\t\t\tdestRow.appendChild(cellAfter);\n\t\t\t\tif (!walk.firstChild(cellAfter, walk.isStaticNode)) this.layoutContext.mutations.setAttr(cell, 'ps-empty-after');\n\t\t\t}\n\t\t\treturn {breakPoint: ranges.positionBefore(destRow)};\n\t\t}\n\t})();\n};\n\n\ninterface CellRef {\n\tcell: HTMLTableCellElement;\n\trowSpan: number;\n\tcolSpan: number;\n}\n\nfunction isCellRef(object: any): object is CellRef {\n\treturn 'cell' in object;\n}\n\nfunction getCell(cell: HTMLTableCellElement | CellRef): HTMLTableCellElement {\n\treturn isCellRef(cell) ? cell.cell : cell;\n}\n\ntype TableRow = (HTMLTableCellElement | CellRef)[];\n\nexport const trWithRowSpanSubFragmentor: SubProcessor = function (this: Fragmentor, ctx: SubProcessorContext): false | Promise<false | LayoutProcessResult> {\n\tconst trWithRowSpan = ctx.currentStyle.display == 'table-row'\n\t\t&& ctx.currentElement instanceof HTMLTableRowElement\n\t\t&& Array.prototype.some.call(ctx.currentElement.cells, (cell: HTMLTableCellElement) => cell.rowSpan > 1);\n\tif (!trWithRowSpan) return false;\n\n\treturn (async () => {\n\t\tctx.currentElement.setAttribute('ps-row', ctx.currentStyle.display);\n\t\tctx.currentBox.mainBlock = null;\n\n\t\tconst rows: TableRow[] = [];\n\t\tlet currentTR = ctx.currentElement as HTMLTableRowElement;\n\t\tconst columnCount = Array.prototype.reduce.call(currentTR.cells, (value: number, cell: HTMLTableCellElement) => value + cell.colSpan, 0);\n\t\tconst rowSpans: Map<number, CellRef> = new Map();\n\t\tconst trByRow: Map<TableRow, HTMLTableRowElement> = new Map();\n\t\tconst staticTr = walk.predicate(walk.isConstructedBy(HTMLTableRowElement), walk.isStatic);\n\t\tdo {\n\t\t\tlet iCell = 0;\n\t\t\tconst row: TableRow = [];\n\t\t\tfor (let iCol = 0; iCol < columnCount; iCol++) {\n\t\t\t\tconst precCell = iCol > 0 && row[iCol - 1];\n\t\t\t\tif (rowSpans.has(iCol)) {\n\t\t\t\t\tconst cellRef = Object.create(rowSpans.get(iCol));\n\t\t\t\t\tcellRef.rowSpan--;\n\t\t\t\t\trow.push(cellRef);\n\t\t\t\t\tif (cellRef.rowSpan == 1) rowSpans.delete(iCol);\n\t\t\t\t\telse rowSpans.set(iCol, cellRef);\n\t\t\t\t} else if (precCell && precCell.colSpan > 1) {\n\t\t\t\t\tconst cellRef = {cell: getCell(precCell), rowSpan: precCell.rowSpan, colSpan: precCell.colSpan - 1};\n\t\t\t\t\trow.push(cellRef);\n\t\t\t\t\tif (precCell.rowSpan > 1) rowSpans.set(iCol, cellRef);\n\t\t\t\t} else {\n\t\t\t\t\tconst cell = currentTR.cells[iCell];\n\t\t\t\t\tif (walk.isStatic(cell)) {\n\t\t\t\t\t\trow.push(cell);\n\t\t\t\t\t\tif (cell.rowSpan > 1) rowSpans.set(iCol, {cell: cell, rowSpan: cell.rowSpan, colSpan: cell.colSpan});\n\t\t\t\t\t\tiCell++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Copy of the bottomOffset for the following lines\n\t\t\tif (rows.length) ctx.layoutContext.bottomOffsets.set(currentTR, ctx.layoutContext.bottomOffsets.get(ctx.currentElement));\n\t\t\trows.push(row);\n\t\t\ttrByRow.set(row, currentTR);\n\t\t\tcurrentTR = walk.nextSibling(currentTR, staticTr);\n\t\t} while (currentTR && rowSpans.size);\n\n\t\tconst lastRow = trByRow.get(rows[rows.length - 1]);\n\t\tif (testAvoidBreakInside(lastRow.parentElement, ctx.layoutContext, this.avoidBreakTypes, ranges.positionAfter(lastRow))) {\n\t\t\tctx.nodes.currentNode = lastRow;\n\t\t\treturn false;\n\t\t}\n\n\t\tlet precRow = null;\n\t\tconst pendingSpans = [];\n\t\tconst fragmentors: Map<HTMLTableCellElement, CellLayoutProcessor> = new Map();\n\t\tfor (let iRow=0; iRow<rows.length; iRow++) {\n\t\t\tconst row = rows[iRow];\n\t\t\tconst tr = trByRow.get(row);\n\n\t\t\tconst verticalStyleMut = new Mutations();\n\t\t\tfor (const cell of row) if (!isCellRef(cell)) verticalStyleMut.setStyle(cell, {'vertical-align': 'top'});\n\n\t\t\tlet invalid = false;\n\t\t\tfor (const cell of row) {\n\t\t\t\tif (!isCellRef(cell) && walk.firstChild(cell, walk.isStaticNode)) {\n\t\t\t\t\tconst fragmentor = new CellLayoutProcessor(cell, this);\n\t\t\t\t\tfragmentors.set(cell, fragmentor);\n\t\t\t\t\tawait fragmentor.start().ended;\n\t\t\t\t\tif (fragmentor.lastEvent == 'no-break-point') {\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tverticalStyleMut.revert();\n\n\t\t\tif (invalid) {\n\t\t\t\tfor (const cell of row) if (!isCellRef(cell) && fragmentors.has(cell)) fragmentors.get(cell).layoutContext.mutations.revert();\n\t\t\t\tif (precRow) {\n\t\t\t\t\t// Tests the break inside before the invalid row. Implies to revert all the rows in this case.\n\t\t\t\t\tif (testAvoidBreakInside(tr.parentElement, ctx.layoutContext, this.avoidBreakTypes, ranges.positionBefore(tr), true)) {\n\t\t\t\t\t\tfor (let i=iRow - 1; i>=0; i--) {\n\t\t\t\t\t\t\tconst rowToRevert = rows[i];\n\t\t\t\t\t\t\tfor (const cell of rowToRevert) if (!isCellRef(cell) && fragmentors.has(cell)) fragmentors.get(cell).layoutContext.mutations.revert();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tctx.nodes.currentNode = lastRow;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinsertRowSpans.call(this, row, tr, fragmentors);\n\t\t\t\t\t\tif (pendingSpans.length) {\n\t\t\t\t\t\t\treturn {breakPoint: ranges.positionBefore(tr)};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tctx.nodes.currentNode = tr;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tctx.nodes.currentNode = trByRow.get(rows[rows.length - 1]);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tlet overflow = false;\n\t\t\t\tfor (const cell of row) {\n\t\t\t\t\tif (cell.rowSpan > 1) pendingSpans.push(getCell(cell));\n\t\t\t\t\telse {\n\t\t\t\t\t\tconst fragmentor = fragmentors.get(getCell(cell));\n\t\t\t\t\t\tif (fragmentor && fragmentor.lastEvent != 'no-overflow') {\n\t\t\t\t\t\t\toverflow = true;\n\t\t\t\t\t\t\tpendingSpans.length = 0;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// TODO Use breakAtPoint to duplicate for the row ?\n\t\t\t\tif (overflow && !pendingSpans.length) {\n\t\t\t\t\tconst destRow = tr.cloneNode(false);\n\t\t\t\t\ttr.setAttribute('ps-breaked-after', '');\n\t\t\t\t\tthis.layoutContext.mutations.setAttr(destRow, 'ps-breaked-before');\n\t\t\t\t\tthis.layoutContext.mutations.insertNode(tr.parentElement, destRow, tr.nextSibling);\n\t\t\t\t\ttr.parentNode.insertBefore(destRow, tr.nextSibling);\n\t\t\t\t\tfor (const cell of row) {\n\t\t\t\t\t\tconst baseCell = getCell(cell);\n\t\t\t\t\t\tconst fragmentor = fragmentors.get(baseCell);\n\t\t\t\t\t\tconst breakPoint = fragmentor ? fragmentor.layoutContext.breakPoint : ranges.positionAtStart(baseCell);\n\t\t\t\t\t\tconst cellAfter = this.layoutContext.mutations.breaks(baseCell, breakPoint);\n\t\t\t\t\t\tthis.layoutContext.mutations.setProp(cellAfter, 'rowSpan', cell.rowSpan);\n\t\t\t\t\t\tcell.rowSpan = 1;\n\t\t\t\t\t\tdestRow.appendChild(cellAfter);\n\t\t\t\t\t\tif (!walk.firstChild(cellAfter, walk.isStaticNode)) this.layoutContext.mutations.setAttr(baseCell, 'ps-empty-after');\n\t\t\t\t\t}\n\t\t\t\t\treturn {breakPoint: ranges.positionBefore(destRow)};\n\t\t\t\t}\n\t\t\t}\n\t\t\tprecRow = row;\n\t\t\tctx.nodes.currentNode = trByRow.get(row);\n\t\t}\n\t})();\n};\n\nfunction insertRowSpans(this: Fragmentor, row: TableRow, tr: HTMLTableRowElement, fragmentors: Map<HTMLTableCellElement, CellLayoutProcessor>): void {\n\tlet insertRef: HTMLTableCellElement = null;\n\tfor (let iCell = row.length - 1; iCell >= 0; iCell--) {\n\t\tlet cell = row[iCell];\n\t\tif (isCellRef(cell)) {\n\t\t\tif (cell.cell.rowSpan > 1) {\n\t\t\t\t// In the case of a cellRef with a colspan, we iterate to the first cellRef of this cell\n\t\t\t\tlet precCell = iCell > 0 && row[iCell - 1];\n\t\t\t\twhile (precCell && isCellRef(precCell) && precCell.cell == cell.cell) {\n\t\t\t\t\tiCell--;\n\t\t\t\t\tcell = precCell;\n\t\t\t\t\tprecCell = iCell > 0 && row[iCell - 1];\n\t\t\t\t}\n\t\t\t\tconst fragmentor = fragmentors && fragmentors.get(cell.cell);\n\t\t\t\tconst breakPoint = fragmentor ? fragmentor.layoutContext.breakPoint : ranges.positionAtEnd(cell.cell);\n\t\t\t\tconst cellAfter = this.layoutContext.mutations.breaks(cell.cell, breakPoint);\n\t\t\t\tthis.layoutContext.mutations.setProp(cellAfter, 'rowSpan', cell.cell.rowSpan - cell.rowSpan);\n\t\t\t\tcellAfter.rowSpan = cell.rowSpan;\n\t\t\t\ttr.insertBefore(cellAfter, insertRef);\n\t\t\t\tif (!walk.firstChild(cellAfter, walk.isStaticNode)) this.layoutContext.mutations.setAttr(cell.cell, 'ps-empty-after');\n\t\t\t\tinsertRef = cellAfter;\n\t\t\t} else {\n\t\t\t\tinsertRef = cell.cell;\n\t\t\t}\n\t\t} else {\n\t\t\tinsertRef = cell;\n\t\t}\n\t}\n}\n",
    "/**\n * Minimal shim for css selection and ranges manipulation.\n *\n * @param window  The context window to shim\n */\n\nexport default function (window: any): void {\n\t//cssTypedOm(window);\n\n\t// Element.prototype.matches is not supported by Edge\n\tif (!window.Element.prototype.matches && window.Element.prototype.msMatchesSelector) {\n\t\twindow.Element.prototype.matches = window.Element.prototype.msMatchesSelector;\n\t}\n\n\t// Range.prototype.isPointInRange and Range.prototype.intersectsNode are not supported by Edgezim\n\tif (!window.Range.prototype.isPointInRange) {\n\t\twindow.Range.prototype.isPointInRange = function (referenceNode: Node, offset: number): boolean {\n\t\t\tconst pointRange = document.createRange();\n\t\t\tpointRange.setStart(referenceNode, offset);\n\t\t\treturn pointRange.compareBoundaryPoints(Range.START_TO_START, this) >= 0 && pointRange.compareBoundaryPoints(Range.END_TO_END, this) <= 0;\n\t\t};\n\t}\n\tif (!window.Range.prototype.intersectsNode) {\n\t\twindow.Range.prototype.intersectsNode = function (referenceNode: Node): boolean {\n\t\t\tconst range = document.createRange();\n\t\t\trange.selectNode(referenceNode);\n\t\t\treturn range.compareBoundaryPoints(Range.START_TO_END, this) >= 0 || range.compareBoundaryPoints(Range.END_TO_END, this) <= 0;\n\t\t};\n\t}\n\n\t// Document.prototype.caretRangeFromPoint is not supported by Firefox (which use caretPositionFromPoint)\n\tif (!window.Document.prototype.caretRangeFromPoint && window.Document.prototype.caretPositionFromPoint) {\n\t\tDocument.prototype.caretRangeFromPoint = function (x: number, y: number): Range {\n\t\t\tconst point = document.caretPositionFromPoint(x, y);\n\t\t\tif (!point) return null;\n\t\t\tconst range = document.createRange();\n\t\t\trange.setStart(point.offsetNode, point.offset);\n\t\t\treturn range;\n\t\t};\n\t}\n}\n\nconst uas = navigator.userAgent.match(/\\b\\w+\\/[\\d.]+\\b/g).map((ua) => ua.split('/'));\ntype BrowserVersions = { [key: string]: number };\nconst versions: BrowserVersions = uas.reduce((o: BrowserVersions, [name, value]) => {\n\to[name] = parseInt(value);\n\treturn o;\n}, {});\n\nconst browserNamePriority = ['Edge', 'Chrome', 'Firefox', 'Safari'];\nlet browser: { name: string, version: number };\nfor (const name of browserNamePriority) {\n\tif (name in versions) {\n\t\tbrowser = {name, version: versions[name]};\n\t\tbreak;\n\t}\n}\nif (!browser) browser = {name: 'Unknow', version: NaN};\nexport {browser};\n\nif (!('exports' in window)) (window as any).exports = {};",
    "import ranges, {Point} from \"./util/ranges\";\nimport rects from \"./util/rects\";\n\nexport type LogStringLevel = \"error\" | \"warn\" | \"info\" | \"debug\";\n\nexport namespace log {\n\texport enum LogLevel { error = 0, warn = 1, info = 2, debug = 3 }\n\n\texport interface Log {\n\t\tmessage: string | Error;\n\t\tlevel: LogLevel;\n\t\tscopes?: string[];\n\t}\n\n\texport interface LogReporter {\n\t\tlog(log: Log): void;\n\t}\n\n\ttype LazyString = (() => string) | string;\n\n\texport class Logger {\n\t\tprotected _reporter: LogReporter;\n\t\tprotected _scopes: LazyString[] = [];\n\t\tprotected _level: LogLevel = LogLevel.warn;\n\n\t\tdebug(message: LazyString, scope?: LazyString): void {\n\t\t\tthis.log(LogLevel.debug, message, scope);\n\t\t}\n\n\t\tinfo(message: LazyString, scope?: LazyString): void {\n\t\t\tthis.log(LogLevel.info, message, scope);\n\t\t}\n\n\t\twarn(message: LazyString, scope?: LazyString): void {\n\t\t\tthis.log(LogLevel.warn, message, scope);\n\t\t}\n\n\t\terror(message: LazyString, scope?: LazyString): void {\n\t\t\tthis.log(LogLevel.error, message, scope);\n\t\t}\n\n\t\tlevelFromString(level: LogStringLevel): number {\n\t\t\tif (level == \"error\") return 0;\n\t\t\tif (level == \"warn\") return 1;\n\t\t\telse if (level == \"info\") return 2;\n\t\t\telse if (level == \"debug\") return 3;\n\t\t}\n\n\t\tsetLevel(level: LogLevel | LogStringLevel): void {\n\t\t\tif (typeof level == 'string') this._level = this.levelFromString(level);\n\t\t\telse this._level = level;\n\t\t}\n\n\t\tsetReporter(reporter: LogReporter): void {\n\t\t\tthis._reporter = reporter;\n\t\t}\n\n\t\taddScope(scope: LazyString): void {\n\t\t\tthis._scopes.push(scope);\n\t\t}\n\n\t\tremoveScope(count= 1): void {\n\t\t\tfor (let i = 0; i < count; i++) this._scopes.pop();\n\t\t}\n\n\t\tlog(level: LogLevel, message: LazyString | Error, scope?: LazyString): void {\n\t\t\tif (level > this._level || !this._reporter) return;\n\t\t\tconst log: Log = {level, message: typeof message == 'function' ? message() : message};\n\t\t\tif (scope) this._scopes.push(scope);\n\t\t\tif (this._scopes.length) log.scopes = this._scopes.map((scope) => typeof scope == 'string' ? scope : scope());\n\t\t\tthis._reporter.log(log);\n\t\t\tif (scope) this._scopes.pop();\n\t\t}\n\t}\n\n\texport const defaultReporter = {\n\t\tlog: function (log: Log): void {\n\t\t\tlet message = log.message; //`[${Math.floor(performance.now()) / 1000}] ${log.message}`;\n\t\t\tif (log.scopes) message += ` (${log.scopes.join(', ')})`;\n\t\t\tif (log.level == LogLevel.error) console.error(message);\n\t\t\telse if (log.level == LogLevel.warn) console.warn(message);\n\t\t\telse if (log.level == LogLevel.info) console.info(message);\n\t\t\telse if (log.level == LogLevel.debug) console.debug(message);\n\t\t}\n\t};\n\n}\n\nexport const logger = new log.Logger();\nlogger.setReporter(log.defaultReporter);\n\nexport namespace dom {\n\tlet idCounter = 0;\n\n\texport function id(element?: Element): string {\n\t\tif (!element) return 'ps-' + idCounter++;\n\t\treturn element.id || (element.id = 'ps-' + idCounter++);\n\t}\n\n\texport function docInteractive(doc: Document = document): Promise<void> {\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tif (doc.readyState != 'loading') resolve();\n\t\t\telse doc.addEventListener('DOMContentLoaded', () => resolve());\n\t\t});\n\t}\n\n\texport function docComplete(doc: Document = document): Promise<void> {\n\t\treturn new Promise<void>((resolve, reject) => {\n\t\t\tif (doc.readyState == 'complete') resolve();\n\t\t\telse {\n\t\t\t\tdoc.defaultView.addEventListener('load', () => resolve());\n\t\t\t\tdoc.defaultView.addEventListener('error', reject);\n\t\t\t}\n\t\t});\n\t}\n\n\texport function isElement(object: any): object is Element {\n\t\treturn object && object.nodeType == Node.ELEMENT_NODE;\n\t}\n}\n\nfunction decamelizeMatch(match: string): string {\n\treturn '-' + match.toLowerCase();\n}\n\nfunction decamelize(string: string): string {\n\treturn string.replace(/[A-Z]/g, decamelizeMatch);\n}\n\nexport namespace io {\n\ttype Options = {[key: string]: any};\n\texport function parseOptionsFromElement(element: Element, defaultOptions: Options): Options {\n\t\tconst options: Options = {};\n\t\tif (element.hasAttribute('ps-options')) Object.assign(options, JSON.parse(element.getAttribute('ps-options')));\n\t\tfor (const key in defaultOptions) {\n\t\t\tconst type = Array.isArray(defaultOptions[key]) ? 'array' : typeof defaultOptions[key];\n\t\t\tconst attr = element.getAttribute('ps-' + decamelize(key));\n\t\t\tif (attr !== null) {\n\t\t\t\tif (type == 'boolean') options[key] = attr == 'true';\n\t\t\t\telse if (type == 'array') options[key] = attr.length ? attr.trim().split(' ') : null;\n\t\t\t\telse if (type == 'object') options[key] = JSON.parse(attr);\n\t\t\t\telse if (type == 'string') options[key] = attr;\n\t\t\t\telse if (type == 'number') options[key] = parseFloat(attr);\n\t\t\t}\n\t\t}\n\n\t\treturn options;\n\t}\n\n\t// The fetch API is not used because it does not support the file protocol\n\t// TODO Error status code ?\n\texport function load(url: string): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst request = new XMLHttpRequest();\n\t\t\trequest.open('GET', url);\n\t\t\trequest.onload = () => resolve(request.responseText);\n\t\t\trequest.onerror = () => reject(new Error(\"Unable to fetch '\" + url + \"'\"));\n\t\t\trequest.send();\n\t\t});\n\t}\n\n\t// Usefull for plugins\n\texport function loadScript(url: string): Promise<void> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst script = document.createElement('script');\n\t\t\tscript.src = url;\n\t\t\tscript.addEventListener('error', () => {\n\t\t\t\treject(new Error(`Unable to load the script '${url}'.`));\n\t\t\t});\n\t\t\tscript.addEventListener('load', resolve as any as EventListenerOrEventListenerObject);\n\t\t\tdocument.head.appendChild(script);\n\t\t});\n\t}\n}\n\nexport namespace debug {\n\texport function drawClientRects(rects: ClientRectList | ClientRect[], doc: Document = document): void {\n\t\tfor (let i = 0; i != rects.length; i++) {\n\t\t\tconst rect = rects[i];\n\t\t\tdrawClientRect(rect, doc);\n\t\t}\n\t}\n\n\texport function drawClientRect(rect: ClientRect, doc: Document = document): void {\n\t\tconst view = doc.defaultView;\n\t\tdrawScrollRect({\n\t\t\ttop: rect.top + view.scrollY,\n\t\t\tbottom: rect.bottom + view.scrollY,\n\t\t\tleft: rect.left + view.scrollX,\n\t\t\tright: rect.right + view.scrollX\n\t\t}, doc);\n\t}\n\n\texport function drawScrollRect(rect: rects.Rect, doc: Document = document): void {\n\t\tconst rectDiv = document.createElement('div');\n\t\trectDiv.style.position = 'absolute';\n\t\trectDiv.style.border = '1px solid red';\n\t\trectDiv.style.margin = rectDiv.style.padding = '0';\n\t\trectDiv.style.top = rect.top + 'px';\n\t\trectDiv.style.left = rect.left + 'px';\n\t\trectDiv.style.width = (rect.right - rect.left - 2) + 'px';\n\t\trectDiv.style.height = (rect.bottom - rect.top - 2) + 'px';\n\t\tdoc.documentElement.appendChild(rectDiv);\n\t}\n\n\texport function drawPoint(point: Point): void {\n\t\tconst view = point.container.ownerDocument.defaultView;\n\t\tlet y: number;\n\t\tif (dom.isElement(point.container)) {\n\t\t\tconst node = ranges.nodeAtPoint(point);\n\t\t\tif (!node) y = rects.boundingScrollRect(point.container).bottom;\n\t\t\telse if (dom.isElement(node)) y = rects.boundingScrollRect(node).top;\n\t\t\telse {\n\t\t\t\tconst range = document.createRange();\n\t\t\t\trange.selectNode(node);\n\t\t\t\ty = rects.scrollRect(range.getBoundingClientRect(), view).top;\n\t\t\t}\n\t\t} else {\n\t\t\tconst range = document.createRange();\n\t\t\trange.setStartBefore(point.container);\n\t\t\trange.setEnd(point.container, point.offset);\n\t\t\ty = rects.scrollRect(range.getBoundingClientRect(), view).bottom;\n\t\t}\n\t\tconst lineDiv = document.createElement('div');\n\t\tlineDiv.style.position = 'absolute';\n\t\tlineDiv.style.background = 'red';\n\t\tlineDiv.style.height = '1px';\n\t\tlineDiv.style.left = '0';\n\t\tlineDiv.style.width = '100%';\n\t\tlineDiv.style.top = y + 'px';\n\t\tdocument.documentElement.appendChild(lineDiv);\n\t}\n\n\texport function logCaretPositionOnClick(doc: Document): void {\n\t\tif (!doc) doc = document;\n\n\t\tdoc.addEventListener('click', (event: MouseEvent) => {\n\t\t\tconst range = doc.caretRangeFromPoint(event.clientX, event.y);\n\t\t\tconsole.log(range.startContainer, range.startOffset);\n\t\t});\n\n\t}\n}\n\nexport namespace events {\n\texport type Listener<K extends keyof Events, Events> = (event: Event<K, Events>, target: EventEmitter<Events>) => any;\n\n\texport type Event<K extends keyof Events, Events> = { type: K } & Events[K];\n\n\texport class EventEmitter<Events = Record<string, unknown>> {\n\t\tlisteners: { [K in keyof Events]: Listener<K, Events>[] };\n\t\ton = this.addListener;\n\n\t\taddListener<K extends keyof Events>(eventType: K, listener: Listener<K, Events>): this {\n\t\t\tif (!this.listeners) this.listeners = Object.create(null);\n\t\t\tlet lstns = this.listeners[eventType];\n\t\t\tif (!lstns) {\n\t\t\t\tlstns = [];\n\t\t\t\tthis.listeners[eventType] = lstns;\n\t\t\t}\n\t\t\tlstns.push(listener);\n\t\t\treturn this;\n\t\t}\n\n\t\tremoveListener<K extends keyof Events>(eventType: K, callback: Listener<K, Events>): this {\n\t\t\tconst lstns = this.listeners && this.listeners[eventType];\n\t\t\tif (lstns) lstns.splice(lstns.indexOf(callback), 1);\n\t\t\treturn this;\n\t\t}\n\n\t\tlistenerCount(event: keyof Events): number {\n\t\t\tconst lstns = this.listeners && this.listeners[event];\n\t\t\treturn lstns ? lstns.length : 0;\n\t\t}\n\n\t\temit<K extends keyof Events>(event: Event<K, Events> | K, target?: EventEmitter<Events>): any {\n\t\t\tconst eventObj = (typeof event == 'string' ? {type: event} : event) as Event<K, Events>;\n\t\t\tconst lstns = this.listeners && this.listeners[eventObj.type];\n\t\t\tif (!lstns || !lstns.length) return;\n\n\t\t\tfor (const listener of lstns) {\n\t\t\t\tconst result = listener.call(this, eventObj, target);\n\t\t\t\tif (result !== undefined) return result;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport {default as rects} from \"./util/rects\";\nexport {default as ranges} from \"./util/ranges\";\nexport {default as walk} from \"./util/walk\";\nexport {default as Mutations} from \"./util/mutations\";\n",
    "import ranges, {Point} from \"./ranges\";\nimport {breakAtPoint, Position} from \"../breaks\";\nimport {unbreak} from \"../breaks\";\n\nexport type Mutation = {\n\trevert(): void;\n\t[key: string]: any;\n};\n\nexport class Mutations {\n\tprotected _entries: Mutation[] = [];\n\n\tpush(...entry: Mutation[]): void {\n\t\tthis._entries.push(...entry);\n\t}\n\n\trevert(): void {\n\t\tlet entry: Mutation;\n\t\twhile ((entry = this._entries.pop())) entry.revert();\n\t}\n\n\tcommit(target?: Mutations): void {\n\t\tif (target) target.push(...this._entries);\n\t\tthis._entries.length = 0;\n\t}\n\n\tsetProp<T>(obj: T, propName: keyof T, propValue?: any): void {\n\t\tconst prevValue = obj[propName];\n\t\tobj[propName] = propValue;\n\t\tthis.push({\n\t\t\tobj,\n\t\t\tpropName,\n\t\t\tprevValue,\n\t\t\trevert(): void {\n\t\t\t\tthis.obj[propName] = propValue;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetAttr(elem: Element, attrName: string, attrValue?: string): void {\n\t\tconst prevValue = elem.getAttribute(attrName);\n\t\telem.setAttribute(attrName, attrValue === undefined ? '' : attrValue);\n\t\tthis.push({\n\t\t\telem,\n\t\t\tattrName,\n\t\t\tprevValue,\n\t\t\trevert(): void {\n\t\t\t\tif (this.prevValue === null) this.elem.removeAttribute(this.attrName);\n\t\t\t\telse this.elem.setAttribute(this.attrName, this.prevValue);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetStyle(elem: HTMLElement, props: { [name: string]: string }): void {\n\t\tconst beforeProps: { [name: string]: string } = {};\n\t\tfor (const propName in props) {\n\t\t\tbeforeProps[propName] = elem.style.getPropertyValue(propName);\n\t\t\telem.style.setProperty(propName, props[propName]);\n\t\t\tif (!elem.getAttribute('style')) elem.removeAttribute('style');\n\t\t}\n\t\tthis.push({\n\t\t\telem,\n\t\t\tbeforeProps,\n\t\t\trevert(): void {\n\t\t\t\tfor (const propName in this.beforeProps) this.elem.style.setProperty(propName, this.beforeProps[propName]);\n\t\t\t\tif (!this.elem.getAttribute('style')) this.elem.removeAttribute('style');\n\t\t\t}\n\t\t});\n\t}\n\n\tbreaks<T extends HTMLElement>(source: T, breakPoint: Point, position?: Position): T {\n\t\tconst dest = breakAtPoint(source, breakPoint, position);\n\t\tthis.push({\n\t\t\tbefore: position == \"before\" ? dest : source,\n\t\t\tafter: position == \"before\" ? source : dest,\n\t\t\tposition,\n\t\t\trevert(): void {\n\t\t\t\tunbreak(this.before, this.after, this.position == \"before\" ? \"after\" : \"before\");\n\t\t\t}\n\t\t});\n\t\treturn dest;\n\t}\n\n\tinsertNode(parent: Node, newChild: Node, refChild?: Node): void {\n\t\tparent.insertBefore(newChild, refChild);\n\t\tthis.push({\n\t\t\tnode: newChild,\n\t\t\trevert(): void {\n\t\t\t\tthis.node.remove();\n\t\t\t}\n\t\t});\n\t}\n\n\tappendNodeContents(srcNode: Node, dstNode: Node): void {\n\t\tconst lastDstChild = dstNode.lastChild;\n\t\tranges.appendNodeContents(srcNode, dstNode);\n\t\tthis.push({\n\t\t\tsrcNode,\n\t\t\tdstNode,\n\t\t\tlastDstChild,\n\t\t\trevert(): void {\n\t\t\t\tconst range = document.createRange();\n\t\t\t\trange.selectNodeContents(this.dstNode);\n\t\t\t\tif (this.lastDstChild) range.setStartAfter(this.lastDstChild);\n\t\t\t\tthis.srcNode.appendChild(range.extractContents());\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport default Mutations;",
    "import walk from \"./walk\";\n\nexport interface Point {\n\tcontainer: Node;\n\toffset: number;\n}\n\nnamespace ranges {\n\texport function isRange(object: any): object is Range {\n\t\treturn object && object.constructor == Range;\n\t}\n\texport function isPoint(object: any): object is Point {\n\t\treturn object && 'container' in object && 'offset' in object;\n\t}\n\n\texport function clonePoint(point: Point): Point {\n\t\treturn {\n\t\t\tcontainer: point.container,\n\t\t\toffset: point.offset\n\t\t};\n\t}\n\n\texport function pointEquals(point1: Point, point2: Point): boolean {\n\t\treturn point1.container == point2.container && point1.offset == point2.offset;\n\t}\n\n\texport function breakRangeBefore(range: Range, node: Node): Range {\n\t\tconst breaked = node.ownerDocument.createRange();\n\t\tbreaked.setStart(range.startContainer, range.startOffset);\n\t\tbreaked.setEndBefore(node);\n\t\trange.setStartBefore(node);\n\t\treturn breaked;\n\t}\n\n\texport function breakRangeAfter(range: Range, node: Node): Range {\n\t\tconst breaked = node.ownerDocument.createRange();\n\t\tbreaked.setStart(range.startContainer, range.startOffset);\n\t\tbreaked.setEndAfter(node);\n\t\trange.setStartAfter(node);\n\t\treturn breaked;\n\t}\n\n\texport function positionBefore(node: Node): Point {\n\t\tconst range = node.ownerDocument.createRange();\n\t\trange.setStartBefore(node);\n\t\treturn rangeStart(range);\n\t}\n\n\texport function positionAfter(node: Node): Point {\n\t\tconst range = node.ownerDocument.createRange();\n\t\trange.setEndAfter(node);\n\t\treturn rangeEnd(range);\n\t}\n\n\texport function positionAtStart(node: Node): Point {\n\t\treturn { container: node, offset : 0 };\n\t}\n\n\texport function positionAtEnd(node: Node): Point {\n\t\treturn { container: node, offset: node.childNodes.length };\n\t}\n\n\texport function rangeStart(range: Range): Point {\n\t\treturn {\n\t\t\tcontainer: range.startContainer as Element,\n\t\t\toffset: range.startOffset\n\t\t};\n\t}\n\n\texport function rangeEnd(range: Range): Point {\n\t\treturn {\n\t\t\tcontainer: range.endContainer as Element,\n\t\t\toffset: range.endOffset\n\t\t};\n\t}\n\n\texport function startNode(range: Range): Node {\n\t\treturn range.startContainer.nodeType == Node.ELEMENT_NODE ? range.startContainer.childNodes[range.startOffset] : null;\n\t}\n\n\texport function endNode(range: Range): Node {\n\t\treturn range.endContainer.nodeType == Node.ELEMENT_NODE ? range.endContainer.childNodes[range.endOffset - 1] : null;\n\t}\n\n\n\texport function staticStartNode(range: Range): Node {\n\t\tconst start = startNode(range);\n\t\tif (walk.isStaticNode(start)) return start;\n\t\telse return walk.next(start, walk.isStaticNode);\n\t}\n\n\texport function staticEndNode(range: Range): Node {\n\t\tconst end = endNode(range);\n\t\tif (walk.isStaticNode(end)) return end;\n\t\telse return walk.previous(end, walk.isStaticNode);\n\t}\n\n\texport function nodeAtPoint(point: Point): Node {\n\t\treturn point.container.nodeType == Node.TEXT_NODE ? point.container : point.container.childNodes.item(point.offset);\n\t}\n\n\t// Difference with Range.isPointInRange: the endPoint is exclusive\n\texport function containsPoint(range: Range, point: Point): boolean {\n\t\tif (range.endContainer == point.container && range.endOffset == point.offset) return false;\n\t\telse return range.isPointInRange(point.container, point.offset);\n\t}\n\n\texport function isPrecedingPoint(refPoint: Point, testPoint: Point): boolean {\n\t\tif (testPoint.container == refPoint.container) {\n\t\t\treturn testPoint.offset < refPoint.offset;\n\t\t} else {\n\t\t\tconst range = new Range();\n\t\t\trange.setStart(testPoint.container, testPoint.offset);\n\t\t\trange.setEnd(refPoint.container, refPoint.offset);\n\t\t\treturn !range.collapsed;\n\t\t}\n\t}\n\n\texport function textPositionFromPoint(doc: Document, x: number, y: number): Point {\n\t\tdoc.defaultView.scrollTo(x, y);\n\n\t\tconst range = doc.caretRangeFromPoint(x - doc.defaultView.scrollX, y - doc.defaultView.scrollY);\n\t\treturn range ? {\n\t\t\tcontainer: range.startContainer as Element,\n\t\t\toffset: range.startOffset\n\t\t} : null;\n\t}\n\n\n\texport function findPointInRanges(rangesList: Range[], point: Point, reverse = false): number {\n\t\tlet range;\n\t\tif (reverse) {\n\t\t\tfor (let rangeIndex = rangesList.length - 1; rangeIndex >= 0; rangeIndex--) {\n\t\t\t\trange = rangesList[rangeIndex];\n\t\t\t\tif (ranges.containsPoint(range, point)) return rangeIndex;\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let rangeIndex = 0; rangeIndex < rangesList.length; rangeIndex++) {\n\t\t\t\trange = rangesList[rangeIndex];\n\t\t\t\tif (ranges.containsPoint(range, point)) return rangeIndex;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\texport function extractNodeContents(node: Node): DocumentFragment {\n\t\tconst range = node.ownerDocument.createRange();\n\t\trange.selectNodeContents(node);\n\t\treturn range.extractContents();\n\t}\n\n\texport function appendNodeContents(srcNode: Node, dstNode: Node): void {\n\t\tdstNode.appendChild(extractNodeContents(srcNode));\n\t}\n}\n\nexport default ranges;",
    "import {default as ranges} from \"./ranges\";\n\nnamespace rects {\n\texport interface Rect {\n\t\tbottom: number;\n\t\tleft: number;\n\t\tright: number;\n\t\ttop: number;\n  }\n\n\n\texport function boundingScrollRect(object: Element | Range): ClientRect {\n\t\tif (ranges.isRange(object)) return scrollRect(object.getBoundingClientRect(), object.commonAncestorContainer.ownerDocument.defaultView);\n\t\telse return scrollRect(object.getBoundingClientRect(), object.ownerDocument.defaultView);\n\t}\n\n\texport function scrollRect(clientRect: ClientRect, view: Window): ClientRect {\n\t\treturn {\n\t\t\ttop: clientRect.top + view.scrollY,\n\t\t\tbottom: clientRect.bottom + view.scrollY,\n\t\t\tleft: clientRect.left + view.scrollX,\n\t\t\tright: clientRect.right + view.scrollX,\n\t\t\twidth: clientRect.width,\n\t\t\theight: clientRect.height\n\t\t};\n\t}\n\n\texport function rectsLines(rects: ClientRectList | Rect[], view: Window): Rect[] {\n\t\tconst lines = [];\n\t\tlet lastLine = null;\n\t\tfor (const rect of rects) {\n\t\t\tif (rect.left != rect.right) {\n\t\t\t\tif (!lastLine || (rect.bottom > lastLine.bottom && rect.top > lastLine.top && rect.left <= lastLine.left)) {\n\t\t\t\t\tlastLine = {\n\t\t\t\t\t\tleft: rect.left,\n\t\t\t\t\t\tbottom: rect.bottom,\n\t\t\t\t\t\tright: rect.right,\n\t\t\t\t\t\ttop: rect.top\n\t\t\t\t\t};\n\t\t\t\t\tlines.push(lastLine);\n\t\t\t\t} else {\n\t\t\t\t\tif (rect.top < lastLine.top) lastLine.top = rect.top;\n\t\t\t\t\tif (rect.bottom > lastLine.bottom) lastLine.bottom = rect.bottom;\n\t\t\t\t\tif (rect.right > lastLine.right) lastLine.right = rect.right;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (const line of lines) {\n\t\t\tline.top += view.scrollY;\n\t\t\tline.bottom += view.scrollY;\n\t\t\tline.left += view.scrollX;\n\t\t\tline.right += view.scrollX;\n\t\t}\n\n\t\treturn lines;\n\t}\n\n\texport function equalRects(rect1: Rect, rect2: Rect): boolean {\n\t\treturn rect1.top != rect2.top || rect1.right != rect2.right || rect1.bottom != rect2.bottom || rect1.left != rect2.left;\n\t}\n\n\texport function includesRect(parentRect: Rect, rect: Rect): boolean {\n\t\treturn rect.top >= parentRect.top && rect.bottom <= parentRect.bottom && rect.left >= parentRect.left && rect.right <= parentRect.right;\n\t}\n\n\texport function bottomWithoutPadding(element: Element, rect?: Rect): number {\n\t\tif (!rect) rect = boundingScrollRect(element);\n\t\tconst paddingBottom = parseFloat(getComputedStyle(element).paddingBottom);\n\t\treturn Math.floor(rect.bottom - paddingBottom);\n\t}\n\n\texport function contentSizingHeight(style: CSSStyleDeclaration, baseHeight: number): number {\n\t\treturn baseHeight - parseFloat(style.paddingTop)\n\t\t\t- parseFloat(style.paddingBottom)\n\t\t\t- parseFloat(style.borderTopWidth)\n\t\t\t- parseFloat(style.borderBottomWidth);\n\t}\n}\n\nexport default rects;",
    "namespace walk {\n\texport type NodePredicate<T extends Node> = (node: Node) => node is T;\n\n\texport interface TypedTreeWalker<T> {\n\t\tcurrentNode: T;\n\t\treadonly filter: NodeFilter | null;\n\t\treadonly root: T;\n\t\treadonly whatToShow: number;\n\n\t\tfirstChild(): T | null;\n\n\t\tlastChild(): T | null;\n\n\t\tnextNode(): T | null;\n\n\t\tnextSibling(): T | null;\n\n\t\tparentNode(): T | null;\n\n\t\tpreviousNode(): T | null;\n\n\t\tpreviousSibling(): T | null;\n\t}\n\n\texport interface TypedNodeIterator<T> {\n\t\treadonly filter: NodeFilter | null;\n\n\t\treadonly pointerBeforeReferenceNode: boolean;\n\t\treadonly referenceNode: Node;\n\t\treadonly root: Node;\n\t\treadonly whatToShow: number;\n\n\t\tdetach(): void;\n\n\t\tnextNode(): T | null;\n\n\t\tpreviousNode(): T | null;\n\t}\n\n\ttype Constructor<T> = new(...args: any[]) => T;\n\n\texport function createWalker<T extends Node>(root: Node, accept?: NodePredicate<T>, skip?: NodePredicate<T>): TypedTreeWalker<T> {\n\t\treturn root.ownerDocument.createTreeWalker(root, NodeFilter.SHOW_ALL, {\n\t\t\tacceptNode(node: Node): number {\n\t\t\t\tif (!accept || accept(node)) return NodeFilter.FILTER_ACCEPT;\n\t\t\t\telse if (skip && skip(node)) return NodeFilter.FILTER_SKIP;\n\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t}\n\t\t}) as TypedTreeWalker<T>;\n\t}\n\n\texport function createIterator<T extends Node>(root: Node, accept?: NodePredicate<T>, skip?: NodePredicate<T>): TypedNodeIterator<T> {\n\t\treturn root.ownerDocument.createNodeIterator(root, NodeFilter.SHOW_ALL, {\n\t\t\tacceptNode(node: Node): number {\n\t\t\t\tif (!accept || accept(node)) return NodeFilter.FILTER_ACCEPT;\n\t\t\t\telse if (skip && skip(node)) return NodeFilter.FILTER_SKIP;\n\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t}\n\t\t}) as TypedNodeIterator<T>;\n\t}\n\n\texport function firstChild<T extends Node>(from: Node, predicate: NodePredicate<T>): T {\n\t\tlet node = from ? from.firstChild as Node : null;\n\t\twhile (node) {\n\t\t\tif (predicate(node)) return node;\n\t\t\tnode = node.nextSibling;\n\t\t}\n\t\treturn null;\n\t}\n\n\texport function lastChild<T extends Node>(from: Node, predicate: NodePredicate<T>): T {\n\t\tlet node = from ? from.lastChild as Node : null;\n\t\twhile (node) {\n\t\t\tif (predicate(node)) return node;\n\t\t\tnode = node.previousSibling;\n\t\t}\n\t\treturn null;\n\t}\n\n\texport function nextSibling<T extends Node>(from: Node, predicate: NodePredicate<T>): T {\n\t\tlet node = from ? from.nextSibling : null;\n\t\twhile (node) {\n\t\t\tif (predicate(node)) return node;\n\t\t\tnode = node.nextSibling;\n\t\t}\n\t\treturn null;\n\t}\n\n\texport function previousSibling<T extends Node>(from: Node, predicate: NodePredicate<T>): T {\n\t\tlet node = from ? from.previousSibling : null;\n\t\twhile (node) {\n\t\t\tif (predicate(node)) return node;\n\t\t\tnode = node.previousSibling;\n\t\t}\n\t\treturn null;\n\t}\n\n\texport function ancestor<T extends Node>(from: Node, predicate: NodePredicate<T>, root?: Node): T {\n\t\tlet node = from.parentNode;\n\t\twhile (node && node !== root) {\n\t\t\tif (predicate(node)) return node;\n\t\t\tnode = node.parentNode;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\texport function ancestorOrSelf<T extends Node>(from: Node, predicate: NodePredicate<T>, root?: Node): T {\n\t\tlet node = from;\n\t\twhile (node && node !== root) {\n\t\t\tif (predicate(node)) return node;\n\t\t\tnode = node.parentNode;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\texport function next<T extends Node>(from: Node, predicate: NodePredicate<T>, root?: Node): T {\n\t\tlet node = from.firstChild as Node;\n\t\tif (node) return predicate(node) ? node : next(node, predicate, root);\n\t\tif (from === root) return null;\n\t\twhile (!(node = from.nextSibling)) {\n\t\t\tfrom = from.parentNode;\n\t\t\tif (from === root) return null;\n\t\t}\n\n\t\treturn predicate(node) ? node : next(node, predicate, root);\n\t}\n\n\texport function previous<T extends Node>(from: Node, predicate: NodePredicate<T>, root?: Node): T {\n\t\tif (from === root) return null;\n\t\tlet node = from.previousSibling as Node;\n\t\tif (node) {\n\t\t\tlet child = node.lastChild;\n\t\t\twhile (child) {\n\t\t\t\tnode = child;\n\t\t\t\tchild = child.lastChild;\n\t\t\t}\n\t\t\treturn predicate(node) ? node : previous(node, predicate, root);\n\t\t}\n\t\tnode = from.parentNode;\n\n\t\treturn node === root ? null : predicate(node) ? node : previous(node, predicate, root);\n\t}\n\n\n\texport function all<T extends Node>(axis: (from: Node, predicate: NodePredicate<T>, root?: Node)=>T, from: Node, predicate: NodePredicate<T>, root?: Node): T[] {\n\t\tconst nodes: T[] = [];\n\t\tlet node = from;\n\t\twhile ((node = axis(node, predicate, root))) nodes.push(node as T);\n\t\treturn nodes;\n\t}\n\n\texport function isNode(node: Node): node is Node {\n\t\treturn true;\n\t}\n\n\texport function isElement(node: Node): node is Element {\n\t\treturn node && node.nodeType == Node.ELEMENT_NODE;\n\t}\n\n\texport function isHTMLElement(node: Node): node is HTMLElement {\n\t\treturn isElement(node) && 'innerText' in node;\n\t}\n\n\texport function isText(node: Node): node is Element {\n\t\treturn node && node.nodeType == Node.TEXT_NODE;\n\t}\n\n\texport function isConstructedBy<T extends Node>(constructor: Constructor<T>): NodePredicate<T> {\n\t\treturn function (node: Node): node is T {\n\t\t\treturn node.constructor == constructor;\n\t\t};\n\t}\n\n\texport function isInstanceOf<T extends Node>(constructor: Constructor<T>): NodePredicate<T> {\n\t\treturn function (node: Node): node is T {\n\t\t\treturn node instanceof constructor;\n\t\t};\n\t}\n\n\t/*\n\t * Fonction de parcours de l'arbre static\n\t */\n\texport function isStaticStyle(style: CSSStyleDeclaration): boolean {\n\t\treturn style.display != 'none' && style.display != 'table-column-group' && (style.position == 'static' || style.position == 'relative');\n\t}\n\n\texport function isStatic(node: Node): boolean {\n\t\tif (isText(node)) return node.nodeValue.trim().length != 0;\n\t\telse if (isElement(node)) return isStaticStyle(getComputedStyle(node));\n\t\treturn false;\n\t}\n\n\texport function isRow(style: CSSStyleDeclaration): 'table-row' | 'flex-row' | false {\n\t\tif (style.display == 'table-row') return 'table-row';\n\t\telse if (style.display == 'flex' && style.flexDirection.startsWith('row')) return 'flex-row';\n\t\treturn false;\n\t}\n\n\texport function predicate<T extends Node>(typeGuard: NodePredicate<T>, ...predicates: ((node: Node) => boolean)[]): NodePredicate<T> {\n\t\treturn ((node: Node) => {\n\t\t\tif (typeGuard && !typeGuard(node)) return false;\n\t\t\treturn predicates.every((predicate) => predicate(node));\n\t\t}) as NodePredicate<T>;\n\t}\n\n\texport function displayAsBlockStyle(style: CSSStyleDeclaration): boolean {\n\t\treturn style.float != 'none' || !(style.display.startsWith('inline') || style.display.startsWith('ruby') || style.display.startsWith('table-column'));\n\t}\n\n\texport function displayAsBlock(node: Node): boolean {\n\t\tif (isText(node)) return false;\n\t\telse if (isElement(node)) return displayAsBlockStyle(getComputedStyle(node));\n\t}\n\n\texport function displayAsInlineBlock(node: Node): boolean {\n\t\tif (isText(node)) return false;\n\t\telse if (isElement(node)) {\n\t\t\tconst style = getComputedStyle(node);\n\t\t\treturn style.display.startsWith(\"inline-\") || (style.display == \"inline\" && node instanceof SVGElement);\n\t\t}\n\t}\n\n\texport function isDisplayed(element: HTMLElement): boolean {\n\t\tconst style = getComputedStyle(element as HTMLElement);\n\t\treturn style.display != 'none';\n\t}\n\n\texport function hasSize(element: HTMLElement): boolean {\n\t\treturn element.clientWidth != 0 || element.clientHeight != 0;\n\t}\n\n\texport function isBreakedAfter(elem: Element): boolean {\n\t\treturn elem.hasAttribute('ps-breaked-after');\n\t}\n\n\texport const isStaticNode = isStatic as NodePredicate<Node>;\n\texport const isStaticElement = walk.predicate(walk.isElement, walk.isStatic);\n\texport const isStaticHtmlElement = walk.predicate(walk.isHTMLElement, walk.isStatic);\n\texport const isStaticHtmlBlock = walk.predicate(walk.isHTMLElement, walk.isStatic, walk.displayAsBlock);\n\texport const isBlockElement = walk.predicate(walk.isElement, walk.displayAsBlock);\n\texport const isInlineBlockElement = walk.predicate(walk.isElement, walk.displayAsInlineBlock);\n}\n\nexport default walk;",
    "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n",
    "",
    "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species != null &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayLike(value)\n  }\n\n  if (value == null) {\n    throw TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n          : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n",
    "/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n",
    "// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n",
    "let Input = require('postcss/lib/input')\n\nlet SafeParser = require('./safe-parser')\n\nmodule.exports = function safeParse (css, opts) {\n  let input = new Input(css, opts)\n\n  let parser = new SafeParser(input)\n  parser.parse()\n\n  return parser.root\n}\n",
    "let tokenizer = require('postcss/lib/tokenize')\nlet Comment = require('postcss/lib/comment')\nlet Parser = require('postcss/lib/parser')\n\nclass SafeParser extends Parser {\n  createTokenizer () {\n    this.tokenizer = tokenizer(this.input, { ignoreErrors: true })\n  }\n\n  comment (token) {\n    let node = new Comment()\n    this.init(node, token[2], token[3])\n    node.source.end = { line: token[4], column: token[5] }\n\n    let text = token[1].slice(2)\n    if (text.slice(-2) === '*/') text = text.slice(0, -2)\n\n    if (/^\\s*$/.test(text)) {\n      node.text = ''\n      node.raws.left = text\n      node.raws.right = ''\n    } else {\n      let match = text.match(/^(\\s*)([^]*\\S)(\\s*)$/)\n      node.text = match[2]\n      node.raws.left = match[1]\n      node.raws.right = match[3]\n    }\n  }\n\n  decl (tokens) {\n    if (tokens.length > 1 && tokens.some(i => i[0] === 'word')) {\n      super.decl(tokens)\n    }\n  }\n\n  unclosedBracket () { }\n\n  unknownWord (tokens) {\n    this.spaces += tokens.map(i => i[1]).join('')\n  }\n\n  unexpectedClose () {\n    this.current.raws.after += '}'\n  }\n\n  doubleColon () { }\n\n  unnamedAtrule (node) {\n    node.name = ''\n  }\n\n  precheckMissedSemicolon (tokens) {\n    let colon = this.colon(tokens)\n    if (colon === false) return\n\n    let split\n    for (split = colon - 1; split >= 0; split--) {\n      if (tokens[split][0] === 'word') break\n    }\n    for (split -= 1; split >= 0; split--) {\n      if (tokens[split][0] !== 'space') {\n        split += 1\n        break\n      }\n    }\n    let other = tokens.splice(split, tokens.length - split)\n    this.decl(other)\n  }\n\n  checkMissedSemicolon () { }\n\n  endFile () {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n\n    while (this.current.parent) {\n      this.current = this.current.parent\n      this.current.raws.after = ''\n    }\n  }\n}\n\nmodule.exports = SafeParser\n",
    "var parse = require(\"./parse\");\nvar walk = require(\"./walk\");\nvar stringify = require(\"./stringify\");\n\nfunction ValueParser(value) {\n  if (this instanceof ValueParser) {\n    this.nodes = parse(value);\n    return this;\n  }\n  return new ValueParser(value);\n}\n\nValueParser.prototype.toString = function() {\n  return Array.isArray(this.nodes) ? stringify(this.nodes) : \"\";\n};\n\nValueParser.prototype.walk = function(cb, bubble) {\n  walk(this.nodes, cb, bubble);\n  return this;\n};\n\nValueParser.unit = require(\"./unit\");\n\nValueParser.walk = walk;\n\nValueParser.stringify = stringify;\n\nmodule.exports = ValueParser;\n",
    "var openParentheses = \"(\".charCodeAt(0);\nvar closeParentheses = \")\".charCodeAt(0);\nvar singleQuote = \"'\".charCodeAt(0);\nvar doubleQuote = '\"'.charCodeAt(0);\nvar backslash = \"\\\\\".charCodeAt(0);\nvar slash = \"/\".charCodeAt(0);\nvar comma = \",\".charCodeAt(0);\nvar colon = \":\".charCodeAt(0);\nvar star = \"*\".charCodeAt(0);\nvar uLower = \"u\".charCodeAt(0);\nvar uUpper = \"U\".charCodeAt(0);\nvar plus = \"+\".charCodeAt(0);\nvar isUnicodeRange = /^[a-f0-9?-]+$/i;\n\nmodule.exports = function(input) {\n  var tokens = [];\n  var value = input;\n\n  var next,\n    quote,\n    prev,\n    token,\n    escape,\n    escapePos,\n    whitespacePos,\n    parenthesesOpenPos;\n  var pos = 0;\n  var code = value.charCodeAt(pos);\n  var max = value.length;\n  var stack = [{ nodes: tokens }];\n  var balanced = 0;\n  var parent;\n\n  var name = \"\";\n  var before = \"\";\n  var after = \"\";\n\n  while (pos < max) {\n    // Whitespaces\n    if (code <= 32) {\n      next = pos;\n      do {\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (code <= 32);\n      token = value.slice(pos, next);\n\n      prev = tokens[tokens.length - 1];\n      if (code === closeParentheses && balanced) {\n        after = token;\n      } else if (prev && prev.type === \"div\") {\n        prev.after = token;\n      } else if (\n        code === comma ||\n        code === colon ||\n        (code === slash &&\n          value.charCodeAt(next + 1) !== star &&\n          (!parent ||\n            (parent && parent.type === \"function\" && parent.value !== \"calc\")))\n      ) {\n        before = token;\n      } else {\n        tokens.push({\n          type: \"space\",\n          sourceIndex: pos,\n          value: token\n        });\n      }\n\n      pos = next;\n\n      // Quotes\n    } else if (code === singleQuote || code === doubleQuote) {\n      next = pos;\n      quote = code === singleQuote ? \"'\" : '\"';\n      token = {\n        type: \"string\",\n        sourceIndex: pos,\n        quote: quote\n      };\n      do {\n        escape = false;\n        next = value.indexOf(quote, next + 1);\n        if (~next) {\n          escapePos = next;\n          while (value.charCodeAt(escapePos - 1) === backslash) {\n            escapePos -= 1;\n            escape = !escape;\n          }\n        } else {\n          value += quote;\n          next = value.length - 1;\n          token.unclosed = true;\n        }\n      } while (escape);\n      token.value = value.slice(pos + 1, next);\n\n      tokens.push(token);\n      pos = next + 1;\n      code = value.charCodeAt(pos);\n\n      // Comments\n    } else if (code === slash && value.charCodeAt(pos + 1) === star) {\n      token = {\n        type: \"comment\",\n        sourceIndex: pos\n      };\n\n      next = value.indexOf(\"*/\", pos);\n      if (next === -1) {\n        token.unclosed = true;\n        next = value.length;\n      }\n\n      token.value = value.slice(pos + 2, next);\n      tokens.push(token);\n\n      pos = next + 2;\n      code = value.charCodeAt(pos);\n\n      // Operation within calc\n    } else if (\n      (code === slash || code === star) &&\n      parent &&\n      parent.type === \"function\" &&\n      parent.value === \"calc\"\n    ) {\n      token = value[pos];\n      tokens.push({\n        type: \"word\",\n        sourceIndex: pos - before.length,\n        value: token\n      });\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      // Dividers\n    } else if (code === slash || code === comma || code === colon) {\n      token = value[pos];\n\n      tokens.push({\n        type: \"div\",\n        sourceIndex: pos - before.length,\n        value: token,\n        before: before,\n        after: \"\"\n      });\n      before = \"\";\n\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      // Open parentheses\n    } else if (openParentheses === code) {\n      // Whitespaces after open parentheses\n      next = pos;\n      do {\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (code <= 32);\n      parenthesesOpenPos = pos;\n      token = {\n        type: \"function\",\n        sourceIndex: pos - name.length,\n        value: name,\n        before: value.slice(parenthesesOpenPos + 1, next)\n      };\n      pos = next;\n\n      if (name === \"url\" && code !== singleQuote && code !== doubleQuote) {\n        next -= 1;\n        do {\n          escape = false;\n          next = value.indexOf(\")\", next + 1);\n          if (~next) {\n            escapePos = next;\n            while (value.charCodeAt(escapePos - 1) === backslash) {\n              escapePos -= 1;\n              escape = !escape;\n            }\n          } else {\n            value += \")\";\n            next = value.length - 1;\n            token.unclosed = true;\n          }\n        } while (escape);\n        // Whitespaces before closed\n        whitespacePos = next;\n        do {\n          whitespacePos -= 1;\n          code = value.charCodeAt(whitespacePos);\n        } while (code <= 32);\n        if (parenthesesOpenPos < whitespacePos) {\n          if (pos !== whitespacePos + 1) {\n            token.nodes = [\n              {\n                type: \"word\",\n                sourceIndex: pos,\n                value: value.slice(pos, whitespacePos + 1)\n              }\n            ];\n          } else {\n            token.nodes = [];\n          }\n          if (token.unclosed && whitespacePos + 1 !== next) {\n            token.after = \"\";\n            token.nodes.push({\n              type: \"space\",\n              sourceIndex: whitespacePos + 1,\n              value: value.slice(whitespacePos + 1, next)\n            });\n          } else {\n            token.after = value.slice(whitespacePos + 1, next);\n          }\n        } else {\n          token.after = \"\";\n          token.nodes = [];\n        }\n        pos = next + 1;\n        code = value.charCodeAt(pos);\n        tokens.push(token);\n      } else {\n        balanced += 1;\n        token.after = \"\";\n        tokens.push(token);\n        stack.push(token);\n        tokens = token.nodes = [];\n        parent = token;\n      }\n      name = \"\";\n\n      // Close parentheses\n    } else if (closeParentheses === code && balanced) {\n      pos += 1;\n      code = value.charCodeAt(pos);\n\n      parent.after = after;\n      after = \"\";\n      balanced -= 1;\n      stack.pop();\n      parent = stack[balanced];\n      tokens = parent.nodes;\n\n      // Words\n    } else {\n      next = pos;\n      do {\n        if (code === backslash) {\n          next += 1;\n        }\n        next += 1;\n        code = value.charCodeAt(next);\n      } while (\n        next < max &&\n        !(\n          code <= 32 ||\n          code === singleQuote ||\n          code === doubleQuote ||\n          code === comma ||\n          code === colon ||\n          code === slash ||\n          code === openParentheses ||\n          (code === star &&\n            parent &&\n            parent.type === \"function\" &&\n            parent.value === \"calc\") ||\n          (code === slash &&\n            parent.type === \"function\" &&\n            parent.value === \"calc\") ||\n          (code === closeParentheses && balanced)\n        )\n      );\n      token = value.slice(pos, next);\n\n      if (openParentheses === code) {\n        name = token;\n      } else if (\n        (uLower === token.charCodeAt(0) || uUpper === token.charCodeAt(0)) &&\n        plus === token.charCodeAt(1) &&\n        isUnicodeRange.test(token.slice(2))\n      ) {\n        tokens.push({\n          type: \"unicode-range\",\n          sourceIndex: pos,\n          value: token\n        });\n      } else {\n        tokens.push({\n          type: \"word\",\n          sourceIndex: pos,\n          value: token\n        });\n      }\n\n      pos = next;\n    }\n  }\n\n  for (pos = stack.length - 1; pos; pos -= 1) {\n    stack[pos].unclosed = true;\n  }\n\n  return stack[0].nodes;\n};\n",
    "function stringifyNode(node, custom) {\n  var type = node.type;\n  var value = node.value;\n  var buf;\n  var customResult;\n\n  if (custom && (customResult = custom(node)) !== undefined) {\n    return customResult;\n  } else if (type === \"word\" || type === \"space\") {\n    return value;\n  } else if (type === \"string\") {\n    buf = node.quote || \"\";\n    return buf + value + (node.unclosed ? \"\" : buf);\n  } else if (type === \"comment\") {\n    return \"/*\" + value + (node.unclosed ? \"\" : \"*/\");\n  } else if (type === \"div\") {\n    return (node.before || \"\") + value + (node.after || \"\");\n  } else if (Array.isArray(node.nodes)) {\n    buf = stringify(node.nodes, custom);\n    if (type !== \"function\") {\n      return buf;\n    }\n    return (\n      value +\n      \"(\" +\n      (node.before || \"\") +\n      buf +\n      (node.after || \"\") +\n      (node.unclosed ? \"\" : \")\")\n    );\n  }\n  return value;\n}\n\nfunction stringify(nodes, custom) {\n  var result, i;\n\n  if (Array.isArray(nodes)) {\n    result = \"\";\n    for (i = nodes.length - 1; ~i; i -= 1) {\n      result = stringifyNode(nodes[i], custom) + result;\n    }\n    return result;\n  }\n  return stringifyNode(nodes, custom);\n}\n\nmodule.exports = stringify;\n",
    "var minus = \"-\".charCodeAt(0);\nvar plus = \"+\".charCodeAt(0);\nvar dot = \".\".charCodeAt(0);\nvar exp = \"e\".charCodeAt(0);\nvar EXP = \"E\".charCodeAt(0);\n\n// Check if three code points would start a number\n// https://www.w3.org/TR/css-syntax-3/#starts-with-a-number\nfunction likeNumber(value) {\n  var code = value.charCodeAt(0);\n  var nextCode;\n\n  if (code === plus || code === minus) {\n    nextCode = value.charCodeAt(1);\n\n    if (nextCode >= 48 && nextCode <= 57) {\n      return true;\n    }\n\n    var nextNextCode = value.charCodeAt(2);\n\n    if (nextCode === dot && nextNextCode >= 48 && nextNextCode <= 57) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (code === dot) {\n    nextCode = value.charCodeAt(1);\n\n    if (nextCode >= 48 && nextCode <= 57) {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (code >= 48 && code <= 57) {\n    return true;\n  }\n\n  return false;\n}\n\n// Consume a number\n// https://www.w3.org/TR/css-syntax-3/#consume-number\nmodule.exports = function(value) {\n  var pos = 0;\n  var length = value.length;\n  var code;\n  var nextCode;\n  var nextNextCode;\n\n  if (length === 0 || !likeNumber(value)) {\n    return false;\n  }\n\n  code = value.charCodeAt(pos);\n\n  if (code === plus || code === minus) {\n    pos++;\n  }\n\n  while (pos < length) {\n    code = value.charCodeAt(pos);\n\n    if (code < 48 || code > 57) {\n      break;\n    }\n\n    pos += 1;\n  }\n\n  code = value.charCodeAt(pos);\n  nextCode = value.charCodeAt(pos + 1);\n\n  if (code === dot && nextCode >= 48 && nextCode <= 57) {\n    pos += 2;\n\n    while (pos < length) {\n      code = value.charCodeAt(pos);\n\n      if (code < 48 || code > 57) {\n        break;\n      }\n\n      pos += 1;\n    }\n  }\n\n  code = value.charCodeAt(pos);\n  nextCode = value.charCodeAt(pos + 1);\n  nextNextCode = value.charCodeAt(pos + 2);\n\n  if (\n    (code === exp || code === EXP) &&\n    ((nextCode >= 48 && nextCode <= 57) ||\n      ((nextCode === plus || nextCode === minus) &&\n        nextNextCode >= 48 &&\n        nextNextCode <= 57))\n  ) {\n    pos += nextCode === plus || nextCode === minus ? 3 : 2;\n\n    while (pos < length) {\n      code = value.charCodeAt(pos);\n\n      if (code < 48 || code > 57) {\n        break;\n      }\n\n      pos += 1;\n    }\n  }\n\n  return {\n    number: value.slice(0, pos),\n    unit: value.slice(pos)\n  };\n};\n",
    "module.exports = function walk(nodes, cb, bubble) {\n  var i, max, node, result;\n\n  for (i = 0, max = nodes.length; i < max; i += 1) {\n    node = nodes[i];\n    if (!bubble) {\n      result = cb(node, i, nodes);\n    }\n\n    if (\n      result !== false &&\n      node.type === \"function\" &&\n      Array.isArray(node.nodes)\n    ) {\n      walk(node.nodes, cb, bubble);\n    }\n\n    if (bubble) {\n      cb(node, i, nodes);\n    }\n  }\n};\n",
    "import Container from './container'\n\n/**\n * Represents an at-rule.\n *\n * If its followed in the CSS by a {} block, this node will have\n * a nodes property representing its children.\n *\n * @extends Container\n *\n * @example\n * const root = postcss.parse('@charset \"UTF-8\"; @media print {}')\n *\n * const charset = root.first\n * charset.type  //=> 'atrule'\n * charset.nodes //=> undefined\n *\n * const media = root.last\n * media.nodes   //=> []\n */\nclass AtRule extends Container {\n  constructor (defaults) {\n    super(defaults)\n    this.type = 'atrule'\n  }\n\n  append (...children) {\n    if (!this.nodes) this.nodes = []\n    return super.append(...children)\n  }\n\n  prepend (...children) {\n    if (!this.nodes) this.nodes = []\n    return super.prepend(...children)\n  }\n\n  /**\n   * @memberof AtRule#\n   * @member {string} name The at-rules name immediately follows the `@`.\n   *\n   * @example\n   * const root  = postcss.parse('@media print {}')\n   * media.name //=> 'media'\n   * const media = root.first\n   */\n\n  /**\n   * @memberof AtRule#\n   * @member {string} params The at-rules parameters, the values\n   *                         that follow the at-rules name but precede\n   *                         any {} block.\n   *\n   * @example\n   * const root  = postcss.parse('@media print, screen {}')\n   * const media = root.first\n   * media.params //=> 'print, screen'\n   */\n\n  /**\n   * @memberof AtRule#\n   * @member {object} raws Information to generate byte-to-byte equal\n   *                        node string as it was in the origin input.\n   *\n   * Every parser saves its own properties,\n   * but the default CSS parser uses:\n   *\n   * * `before`: the space symbols before the node. It also stores `*`\n   *   and `_` symbols before the declaration (IE hack).\n   * * `after`: the space symbols after the last child of the node\n   *   to the end of the node.\n   * * `between`: the symbols between the property and value\n   *   for declarations, selector and `{` for rules, or last parameter\n   *   and `{` for at-rules.\n   * * `semicolon`: contains true if the last child has\n   *   an (optional) semicolon.\n   * * `afterName`: the space between the at-rule name and its parameters.\n   *\n   * PostCSS cleans at-rule parameters from comments and extra spaces,\n   * but it stores origin content in raws properties.\n   * As such, if you dont change a declarations value,\n   * PostCSS will use the raw value with comments.\n   *\n   * @example\n   * const root = postcss.parse('  @media\\nprint {\\n}')\n   * root.first.first.raws //=> { before: '  ',\n   *                       //     between: ' ',\n   *                       //     afterName: '\\n',\n   *                       //     after: '\\n' }\n   */\n}\n\nexport default AtRule\n",
    "import Node from './node'\n\n/**\n * Represents a comment between declarations or statements (rule and at-rules).\n *\n * Comments inside selectors, at-rule parameters, or declaration values\n * will be stored in the `raws` properties explained above.\n *\n * @extends Node\n */\nclass Comment extends Node {\n  constructor (defaults) {\n    super(defaults)\n    this.type = 'comment'\n  }\n\n  /**\n   * @memberof Comment#\n   * @member {string} text The comments text.\n   */\n\n  /**\n   * @memberof Comment#\n   * @member {object} raws Information to generate byte-to-byte equal\n   *                       node string as it was in the origin input.\n   *\n   * Every parser saves its own properties,\n   * but the default CSS parser uses:\n   *\n   * * `before`: the space symbols before the node.\n   * * `left`: the space symbols between `/*` and the comments text.\n   * * `right`: the space symbols between the comments text.\n   */\n}\n\nexport default Comment\n",
    "import Declaration from './declaration'\nimport Comment from './comment'\nimport Node from './node'\n\nfunction cleanSource (nodes) {\n  return nodes.map(i => {\n    if (i.nodes) i.nodes = cleanSource(i.nodes)\n    delete i.source\n    return i\n  })\n}\n\n/**\n * The {@link Root}, {@link AtRule}, and {@link Rule} container nodes\n * inherit some common methods to help work with their children.\n *\n * Note that all containers can store any content. If you write a rule inside\n * a rule, PostCSS will parse it.\n *\n * @extends Node\n * @abstract\n */\nclass Container extends Node {\n  push (child) {\n    child.parent = this\n    this.nodes.push(child)\n    return this\n  }\n\n  /**\n   * Iterates through the containers immediate children,\n   * calling `callback` for each child.\n   *\n   * Returning `false` in the callback will break iteration.\n   *\n   * This method only iterates through the containers immediate children.\n   * If you need to recursively iterate through all the containers descendant\n   * nodes, use {@link Container#walk}.\n   *\n   * Unlike the for `{}`-cycle or `Array#forEach` this iterator is safe\n   * if you are mutating the array of child nodes during iteration.\n   * PostCSS will adjust the current index to match the mutations.\n   *\n   * @param {childIterator} callback Iterator receives each node and index.\n   *\n   * @return {false|undefined} Returns `false` if iteration was broke.\n   *\n   * @example\n   * const root = postcss.parse('a { color: black; z-index: 1 }')\n   * const rule = root.first\n   *\n   * for (const decl of rule.nodes) {\n   *   decl.cloneBefore({ prop: '-webkit-' + decl.prop })\n   *   // Cycle will be infinite, because cloneBefore moves the current node\n   *   // to the next index\n   * }\n   *\n   * rule.each(decl => {\n   *   decl.cloneBefore({ prop: '-webkit-' + decl.prop })\n   *   // Will be executed only for color and z-index\n   * })\n   */\n  each (callback) {\n    if (!this.lastEach) this.lastEach = 0\n    if (!this.indexes) this.indexes = { }\n\n    this.lastEach += 1\n    let id = this.lastEach\n    this.indexes[id] = 0\n\n    if (!this.nodes) return undefined\n\n    let index, result\n    while (this.indexes[id] < this.nodes.length) {\n      index = this.indexes[id]\n      result = callback(this.nodes[index], index)\n      if (result === false) break\n\n      this.indexes[id] += 1\n    }\n\n    delete this.indexes[id]\n\n    return result\n  }\n\n  /**\n   * Traverses the containers descendant nodes, calling callback\n   * for each node.\n   *\n   * Like container.each(), this method is safe to use\n   * if you are mutating arrays during iteration.\n   *\n   * If you only need to iterate through the containers immediate children,\n   * use {@link Container#each}.\n   *\n   * @param {childIterator} callback Iterator receives each node and index.\n   *\n   * @return {false|undefined} Returns `false` if iteration was broke.\n   *\n   * @example\n   * root.walk(node => {\n   *   // Traverses all descendant nodes.\n   * })\n   */\n  walk (callback) {\n    return this.each((child, i) => {\n      let result\n      try {\n        result = callback(child, i)\n      } catch (e) {\n        e.postcssNode = child\n        if (e.stack && child.source && /\\n\\s{4}at /.test(e.stack)) {\n          let s = child.source\n          e.stack = e.stack.replace(/\\n\\s{4}at /,\n            `$&${ s.input.from }:${ s.start.line }:${ s.start.column }$&`)\n        }\n        throw e\n      }\n      if (result !== false && child.walk) {\n        result = child.walk(callback)\n      }\n      return result\n    })\n  }\n\n  /**\n   * Traverses the containers descendant nodes, calling callback\n   * for each declaration node.\n   *\n   * If you pass a filter, iteration will only happen over declarations\n   * with matching properties.\n   *\n   * Like {@link Container#each}, this method is safe\n   * to use if you are mutating arrays during iteration.\n   *\n   * @param {string|RegExp} [prop]   String or regular expression\n   *                                 to filter declarations by property name.\n   * @param {childIterator} callback Iterator receives each node and index.\n   *\n   * @return {false|undefined} Returns `false` if iteration was broke.\n   *\n   * @example\n   * root.walkDecls(decl => {\n   *   checkPropertySupport(decl.prop)\n   * })\n   *\n   * root.walkDecls('border-radius', decl => {\n   *   decl.remove()\n   * })\n   *\n   * root.walkDecls(/^background/, decl => {\n   *   decl.value = takeFirstColorFromGradient(decl.value)\n   * })\n   */\n  walkDecls (prop, callback) {\n    if (!callback) {\n      callback = prop\n      return this.walk((child, i) => {\n        if (child.type === 'decl') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (prop instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'decl' && prop.test(child.prop)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'decl' && child.prop === prop) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  /**\n   * Traverses the containers descendant nodes, calling callback\n   * for each rule node.\n   *\n   * If you pass a filter, iteration will only happen over rules\n   * with matching selectors.\n   *\n   * Like {@link Container#each}, this method is safe\n   * to use if you are mutating arrays during iteration.\n   *\n   * @param {string|RegExp} [selector] String or regular expression\n   *                                   to filter rules by selector.\n   * @param {childIterator} callback   Iterator receives each node and index.\n   *\n   * @return {false|undefined} returns `false` if iteration was broke.\n   *\n   * @example\n   * const selectors = []\n   * root.walkRules(rule => {\n   *   selectors.push(rule.selector)\n   * })\n   * console.log(`Your CSS uses ${ selectors.length } selectors`)\n   */\n  walkRules (selector, callback) {\n    if (!callback) {\n      callback = selector\n\n      return this.walk((child, i) => {\n        if (child.type === 'rule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (selector instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'rule' && selector.test(child.selector)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'rule' && child.selector === selector) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  /**\n   * Traverses the containers descendant nodes, calling callback\n   * for each at-rule node.\n   *\n   * If you pass a filter, iteration will only happen over at-rules\n   * that have matching names.\n   *\n   * Like {@link Container#each}, this method is safe\n   * to use if you are mutating arrays during iteration.\n   *\n   * @param {string|RegExp} [name]   String or regular expression\n   *                                 to filter at-rules by name.\n   * @param {childIterator} callback Iterator receives each node and index.\n   *\n   * @return {false|undefined} Returns `false` if iteration was broke.\n   *\n   * @example\n   * root.walkAtRules(rule => {\n   *   if (isOld(rule.name)) rule.remove()\n   * })\n   *\n   * let first = false\n   * root.walkAtRules('charset', rule => {\n   *   if (!first) {\n   *     first = true\n   *   } else {\n   *     rule.remove()\n   *   }\n   * })\n   */\n  walkAtRules (name, callback) {\n    if (!callback) {\n      callback = name\n      return this.walk((child, i) => {\n        if (child.type === 'atrule') {\n          return callback(child, i)\n        }\n      })\n    }\n    if (name instanceof RegExp) {\n      return this.walk((child, i) => {\n        if (child.type === 'atrule' && name.test(child.name)) {\n          return callback(child, i)\n        }\n      })\n    }\n    return this.walk((child, i) => {\n      if (child.type === 'atrule' && child.name === name) {\n        return callback(child, i)\n      }\n    })\n  }\n\n  /**\n   * Traverses the containers descendant nodes, calling callback\n   * for each comment node.\n   *\n   * Like {@link Container#each}, this method is safe\n   * to use if you are mutating arrays during iteration.\n   *\n   * @param {childIterator} callback Iterator receives each node and index.\n   *\n   * @return {false|undefined} Returns `false` if iteration was broke.\n   *\n   * @example\n   * root.walkComments(comment => {\n   *   comment.remove()\n   * })\n   */\n  walkComments (callback) {\n    return this.walk((child, i) => {\n      if (child.type === 'comment') {\n        return callback(child, i)\n      }\n    })\n  }\n\n  /**\n   * Inserts new nodes to the end of the container.\n   *\n   * @param {...(Node|object|string|Node[])} children New nodes.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * const decl1 = postcss.decl({ prop: 'color', value: 'black' })\n   * const decl2 = postcss.decl({ prop: 'background-color', value: 'white' })\n   * rule.append(decl1, decl2)\n   *\n   * root.append({ name: 'charset', params: '\"UTF-8\"' })  // at-rule\n   * root.append({ selector: 'a' })                       // rule\n   * rule.append({ prop: 'color', value: 'black' })       // declaration\n   * rule.append({ text: 'Comment' })                     // comment\n   *\n   * root.append('a {}')\n   * root.first.append('color: black; z-index: 1')\n   */\n  append (...children) {\n    for (let child of children) {\n      let nodes = this.normalize(child, this.last)\n      for (let node of nodes) this.nodes.push(node)\n    }\n    return this\n  }\n\n  /**\n   * Inserts new nodes to the start of the container.\n   *\n   * @param {...(Node|object|string|Node[])} children New nodes.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * const decl1 = postcss.decl({ prop: 'color', value: 'black' })\n   * const decl2 = postcss.decl({ prop: 'background-color', value: 'white' })\n   * rule.prepend(decl1, decl2)\n   *\n   * root.append({ name: 'charset', params: '\"UTF-8\"' })  // at-rule\n   * root.append({ selector: 'a' })                       // rule\n   * rule.append({ prop: 'color', value: 'black' })       // declaration\n   * rule.append({ text: 'Comment' })                     // comment\n   *\n   * root.append('a {}')\n   * root.first.append('color: black; z-index: 1')\n   */\n  prepend (...children) {\n    children = children.reverse()\n    for (let child of children) {\n      let nodes = this.normalize(child, this.first, 'prepend').reverse()\n      for (let node of nodes) this.nodes.unshift(node)\n      for (let id in this.indexes) {\n        this.indexes[id] = this.indexes[id] + nodes.length\n      }\n    }\n    return this\n  }\n\n  cleanRaws (keepBetween) {\n    super.cleanRaws(keepBetween)\n    if (this.nodes) {\n      for (let node of this.nodes) node.cleanRaws(keepBetween)\n    }\n  }\n\n  /**\n   * Insert new node before old node within the container.\n   *\n   * @param {Node|number} exist             Child or childs index.\n   * @param {Node|object|string|Node[]} add New node.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * rule.insertBefore(decl, decl.clone({ prop: '-webkit-' + decl.prop }))\n   */\n  insertBefore (exist, add) {\n    exist = this.index(exist)\n\n    let type = exist === 0 ? 'prepend' : false\n    let nodes = this.normalize(add, this.nodes[exist], type).reverse()\n    for (let node of nodes) this.nodes.splice(exist, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (exist <= index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Insert new node after old node within the container.\n   *\n   * @param {Node|number} exist             Child or childs index.\n   * @param {Node|object|string|Node[]} add New node.\n   *\n   * @return {Node} This node for methods chain.\n   */\n  insertAfter (exist, add) {\n    exist = this.index(exist)\n\n    let nodes = this.normalize(add, this.nodes[exist]).reverse()\n    for (let node of nodes) this.nodes.splice(exist + 1, 0, node)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (exist < index) {\n        this.indexes[id] = index + nodes.length\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Removes node from the container and cleans the parent properties\n   * from the node and its children.\n   *\n   * @param {Node|number} child Child or childs index.\n   *\n   * @return {Node} This node for methods chain\n   *\n   * @example\n   * rule.nodes.length  //=> 5\n   * rule.removeChild(decl)\n   * rule.nodes.length  //=> 4\n   * decl.parent        //=> undefined\n   */\n  removeChild (child) {\n    child = this.index(child)\n    this.nodes[child].parent = undefined\n    this.nodes.splice(child, 1)\n\n    let index\n    for (let id in this.indexes) {\n      index = this.indexes[id]\n      if (index >= child) {\n        this.indexes[id] = index - 1\n      }\n    }\n\n    return this\n  }\n\n  /**\n   * Removes all children from the container\n   * and cleans their parent properties.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * rule.removeAll()\n   * rule.nodes.length //=> 0\n   */\n  removeAll () {\n    for (let node of this.nodes) node.parent = undefined\n    this.nodes = []\n    return this\n  }\n\n  /**\n   * Passes all declaration values within the container that match pattern\n   * through callback, replacing those values with the returned result\n   * of callback.\n   *\n   * This method is useful if you are using a custom unit or function\n   * and need to iterate through all values.\n   *\n   * @param {string|RegExp} pattern      Replace pattern.\n   * @param {object} opts                Options to speed up the search.\n   * @param {string|string[]} opts.props An array of property names.\n   * @param {string} opts.fast           String thats used to narrow down\n   *                                     values and speed up the regexp search.\n   * @param {function|string} callback   String to replace pattern or callback\n   *                                     that returns a new value. The callback\n   *                                     will receive the same arguments\n   *                                     as those passed to a function parameter\n   *                                     of `String#replace`.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * root.replaceValues(/\\d+rem/, { fast: 'rem' }, string => {\n   *   return 15 * parseInt(string) + 'px'\n   * })\n   */\n  replaceValues (pattern, opts, callback) {\n    if (!callback) {\n      callback = opts\n      opts = { }\n    }\n\n    this.walkDecls(decl => {\n      if (opts.props && opts.props.indexOf(decl.prop) === -1) return\n      if (opts.fast && decl.value.indexOf(opts.fast) === -1) return\n\n      decl.value = decl.value.replace(pattern, callback)\n    })\n\n    return this\n  }\n\n  /**\n   * Returns `true` if callback returns `true`\n   * for all of the containers children.\n   *\n   * @param {childCondition} condition Iterator returns true or false.\n   *\n   * @return {boolean} Is every child pass condition.\n   *\n   * @example\n   * const noPrefixes = rule.every(i => i.prop[0] !== '-')\n   */\n  every (condition) {\n    return this.nodes.every(condition)\n  }\n\n  /**\n   * Returns `true` if callback returns `true` for (at least) one\n   * of the containers children.\n   *\n   * @param {childCondition} condition Iterator returns true or false.\n   *\n   * @return {boolean} Is some child pass condition.\n   *\n   * @example\n   * const hasPrefix = rule.some(i => i.prop[0] === '-')\n   */\n  some (condition) {\n    return this.nodes.some(condition)\n  }\n\n  /**\n   * Returns a `child`s index within the {@link Container#nodes} array.\n   *\n   * @param {Node} child Child of the current container.\n   *\n   * @return {number} Child index.\n   *\n   * @example\n   * rule.index( rule.nodes[2] ) //=> 2\n   */\n  index (child) {\n    if (typeof child === 'number') {\n      return child\n    }\n    return this.nodes.indexOf(child)\n  }\n\n  /**\n   * The containers first child.\n   *\n   * @type {Node}\n   *\n   * @example\n   * rule.first === rules.nodes[0]\n   */\n  get first () {\n    if (!this.nodes) return undefined\n    return this.nodes[0]\n  }\n\n  /**\n   * The containers last child.\n   *\n   * @type {Node}\n   *\n   * @example\n   * rule.last === rule.nodes[rule.nodes.length - 1]\n   */\n  get last () {\n    if (!this.nodes) return undefined\n    return this.nodes[this.nodes.length - 1]\n  }\n\n  normalize (nodes, sample) {\n    if (typeof nodes === 'string') {\n      let parse = require('./parse')\n      nodes = cleanSource(parse(nodes).nodes)\n    } else if (Array.isArray(nodes)) {\n      nodes = nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type === 'root') {\n      nodes = nodes.nodes.slice(0)\n      for (let i of nodes) {\n        if (i.parent) i.parent.removeChild(i, 'ignore')\n      }\n    } else if (nodes.type) {\n      nodes = [nodes]\n    } else if (nodes.prop) {\n      if (typeof nodes.value === 'undefined') {\n        throw new Error('Value field is missed in node creation')\n      } else if (typeof nodes.value !== 'string') {\n        nodes.value = String(nodes.value)\n      }\n      nodes = [new Declaration(nodes)]\n    } else if (nodes.selector) {\n      let Rule = require('./rule')\n      nodes = [new Rule(nodes)]\n    } else if (nodes.name) {\n      let AtRule = require('./at-rule')\n      nodes = [new AtRule(nodes)]\n    } else if (nodes.text) {\n      nodes = [new Comment(nodes)]\n    } else {\n      throw new Error('Unknown node type in node creation')\n    }\n\n    let processed = nodes.map(i => {\n      if (i.parent) i.parent.removeChild(i)\n      if (typeof i.raws.before === 'undefined') {\n        if (sample && typeof sample.raws.before !== 'undefined') {\n          i.raws.before = sample.raws.before.replace(/[^\\s]/g, '')\n        }\n      }\n      i.parent = this\n      return i\n    })\n\n    return processed\n  }\n\n  /**\n   * @memberof Container#\n   * @member {Node[]} nodes An array containing the containers children.\n   *\n   * @example\n   * const root = postcss.parse('a { color: black }')\n   * root.nodes.length           //=> 1\n   * root.nodes[0].selector      //=> 'a'\n   * root.nodes[0].nodes[0].prop //=> 'color'\n   */\n}\n\nexport default Container\n\n/**\n * @callback childCondition\n * @param {Node} node    Container child.\n * @param {number} index Child index.\n * @param {Node[]} nodes All container children.\n * @return {boolean}\n */\n\n/**\n * @callback childIterator\n * @param {Node} node    Container child.\n * @param {number} index Child index.\n * @return {false|undefined} Returning `false` will break iteration.\n */\n",
    "import supportsColor from 'supports-color'\nimport chalk from 'chalk'\n\nimport terminalHighlight from './terminal-highlight'\n\n/**\n * The CSS parser throws this error for broken CSS.\n *\n * Custom parsers can throw this error for broken custom syntax using\n * the {@link Node#error} method.\n *\n * PostCSS will use the input source map to detect the original error location.\n * If you wrote a Sass file, compiled it to CSS and then parsed it with PostCSS,\n * PostCSS will show the original position in the Sass file.\n *\n * If you need the position in the PostCSS input\n * (e.g., to debug the previous compiler), use `error.input.file`.\n *\n * @example\n * // Catching and checking syntax error\n * try {\n *   postcss.parse('a{')\n * } catch (error) {\n *   if (error.name === 'CssSyntaxError') {\n *     error //=> CssSyntaxError\n *   }\n * }\n *\n * @example\n * // Raising error from plugin\n * throw node.error('Unknown variable', { plugin: 'postcss-vars' })\n */\nclass CssSyntaxError extends Error {\n  /**\n   * @param {string} message  Error message.\n   * @param {number} [line]   Source line of the error.\n   * @param {number} [column] Source column of the error.\n   * @param {string} [source] Source code of the broken file.\n   * @param {string} [file]   Absolute path to the broken file.\n   * @param {string} [plugin] PostCSS plugin name, if error came from plugin.\n   */\n  constructor (message, line, column, source, file, plugin) {\n    super(message)\n\n    /**\n     * Always equal to `'CssSyntaxError'`. You should always check error type\n     * by `error.name === 'CssSyntaxError'`\n     * instead of `error instanceof CssSyntaxError`,\n     * because npm could have several PostCSS versions.\n     *\n     * @type {string}\n     *\n     * @example\n     * if (error.name === 'CssSyntaxError') {\n     *   error //=> CssSyntaxError\n     * }\n     */\n    this.name = 'CssSyntaxError'\n    /**\n     * Error message.\n     *\n     * @type {string}\n     *\n     * @example\n     * error.message //=> 'Unclosed block'\n     */\n    this.reason = message\n\n    if (file) {\n      /**\n       * Absolute path to the broken file.\n       *\n       * @type {string}\n       *\n       * @example\n       * error.file       //=> 'a.sass'\n       * error.input.file //=> 'a.css'\n       */\n      this.file = file\n    }\n    if (source) {\n      /**\n       * Source code of the broken file.\n       *\n       * @type {string}\n       *\n       * @example\n       * error.source       //=> 'a { b {} }'\n       * error.input.column //=> 'a b { }'\n       */\n      this.source = source\n    }\n    if (plugin) {\n      /**\n       * Plugin name, if error came from plugin.\n       *\n       * @type {string}\n       *\n       * @example\n       * error.plugin //=> 'postcss-vars'\n       */\n      this.plugin = plugin\n    }\n    if (typeof line !== 'undefined' && typeof column !== 'undefined') {\n      /**\n       * Source line of the error.\n       *\n       * @type {number}\n       *\n       * @example\n       * error.line       //=> 2\n       * error.input.line //=> 4\n       */\n      this.line = line\n      /**\n       * Source column of the error.\n       *\n       * @type {number}\n       *\n       * @example\n       * error.column       //=> 1\n       * error.input.column //=> 4\n       */\n      this.column = column\n    }\n\n    this.setMessage()\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, CssSyntaxError)\n    }\n  }\n\n  setMessage () {\n    /**\n     * Full error text in the GNU error format\n     * with plugin, file, line and column.\n     *\n     * @type {string}\n     *\n     * @example\n     * error.message //=> 'a.css:1:1: Unclosed block'\n     */\n    this.message = this.plugin ? this.plugin + ': ' : ''\n    this.message += this.file ? this.file : '<css input>'\n    if (typeof this.line !== 'undefined') {\n      this.message += ':' + this.line + ':' + this.column\n    }\n    this.message += ': ' + this.reason\n  }\n\n  /**\n   * Returns a few lines of CSS source that caused the error.\n   *\n   * If the CSS has an input source map without `sourceContent`,\n   * this method will return an empty string.\n   *\n   * @param {boolean} [color] Whether arrow will be colored red by terminal\n   *                          color codes. By default, PostCSS will detect\n   *                          color support by `process.stdout.isTTY`\n   *                          and `process.env.NODE_DISABLE_COLORS`.\n   *\n   * @example\n   * error.showSourceCode() //=> \"  4 | }\n   *                        //      5 | a {\n   *                        //    > 6 |   bad\n   *                        //        |   ^\n   *                        //      7 | }\n   *                        //      8 | b {\"\n   *\n   * @return {string} Few lines of CSS source that caused the error.\n   */\n  showSourceCode (color) {\n    if (!this.source) return ''\n\n    let css = this.source\n    if (terminalHighlight) {\n      if (typeof color === 'undefined') color = supportsColor.stdout\n      if (color) css = terminalHighlight(css)\n    }\n\n    let lines = css.split(/\\r?\\n/)\n    let start = Math.max(this.line - 3, 0)\n    let end = Math.min(this.line + 2, lines.length)\n\n    let maxWidth = String(end).length\n\n    function mark (text) {\n      if (color && chalk.red) {\n        return chalk.red.bold(text)\n      }\n      return text\n    }\n    function aside (text) {\n      if (color && chalk.gray) {\n        return chalk.gray(text)\n      }\n      return text\n    }\n\n    return lines.slice(start, end).map((line, index) => {\n      let number = start + 1 + index\n      let gutter = ' ' + (' ' + number).slice(-maxWidth) + ' | '\n      if (number === this.line) {\n        let spacing = aside(gutter.replace(/\\d/g, ' ')) +\n          line.slice(0, this.column - 1).replace(/[^\\t]/g, ' ')\n        return mark('>') + aside(gutter) + line + '\\n ' + spacing + mark('^')\n      }\n      return ' ' + aside(gutter) + line\n    }).join('\\n')\n  }\n\n  /**\n   * Returns error position, message and source code of the broken part.\n   *\n   * @example\n   * error.toString() //=> \"CssSyntaxError: app.css:1:1: Unclosed block\n   *                  //    > 1 | a {\n   *                  //        | ^\"\n   *\n   * @return {string} Error position, message and source code.\n   */\n  toString () {\n    let code = this.showSourceCode()\n    if (code) {\n      code = '\\n\\n' + code + '\\n'\n    }\n    return this.name + ': ' + this.message + code\n  }\n\n  /**\n   * @memberof CssSyntaxError#\n   * @member {Input} input Input object with PostCSS internal information\n   *                       about input file. If input has source map\n   *                       from previous tool, PostCSS will use origin\n   *                       (for example, Sass) source. You can use this\n   *                       object to get PostCSS input source.\n   *\n   * @example\n   * error.input.file //=> 'a.css'\n   * error.file       //=> 'a.sass'\n   */\n}\n\nexport default CssSyntaxError\n",
    "import Node from './node'\n\n/**\n * Represents a CSS declaration.\n *\n * @extends Node\n *\n * @example\n * const root = postcss.parse('a { color: black }')\n * const decl = root.first.first\n * decl.type       //=> 'decl'\n * decl.toString() //=> ' color: black'\n */\nclass Declaration extends Node {\n  constructor (defaults) {\n    super(defaults)\n    this.type = 'decl'\n  }\n\n  /**\n   * @memberof Declaration#\n   * @member {string} prop The declarations property name.\n   *\n   * @example\n   * const root = postcss.parse('a { color: black }')\n   * const decl = root.first.first\n   * decl.prop //=> 'color'\n   */\n\n  /**\n   * @memberof Declaration#\n   * @member {string} value The declarations value.\n   *\n   * @example\n   * const root = postcss.parse('a { color: black }')\n   * const decl = root.first.first\n   * decl.value //=> 'black'\n   */\n\n  /**\n   * @memberof Declaration#\n   * @member {boolean} important `true` if the declaration\n   *                             has an !important annotation.\n   *\n   * @example\n   * const root = postcss.parse('a { color: black !important; color: red }')\n   * root.first.first.important //=> true\n   * root.first.last.important  //=> undefined\n   */\n\n  /**\n   * @memberof Declaration#\n   * @member {object} raws Information to generate byte-to-byte equal\n   *                       node string as it was in the origin input.\n   *\n   * Every parser saves its own properties,\n   * but the default CSS parser uses:\n   *\n   * * `before`: the space symbols before the node. It also stores `*`\n   *   and `_` symbols before the declaration (IE hack).\n   * * `between`: the symbols between the property and value\n   *   for declarations.\n   * * `important`: the content of the important statement,\n   *   if it is not just `!important`.\n   *\n   * PostCSS cleans declaration from comments and extra spaces,\n   * but it stores origin content in raws properties.\n   * As such, if you dont change a declarations value,\n   * PostCSS will use the raw value with comments.\n   *\n   * @example\n   * const root = postcss.parse('a {\\n  color:black\\n}')\n   * root.first.first.raws //=> { before: '\\n  ', between: ':' }\n   */\n}\n\nexport default Declaration\n",
    "import path from 'path'\n\nimport CssSyntaxError from './css-syntax-error'\nimport PreviousMap from './previous-map'\n\nlet sequence = 0\n\n/**\n * Represents the source CSS.\n *\n * @example\n * const root  = postcss.parse(css, { from: file })\n * const input = root.source.input\n */\nclass Input {\n  /**\n   * @param {string} css    Input CSS source.\n   * @param {object} [opts] {@link Processor#process} options.\n   */\n  constructor (css, opts = { }) {\n    if (\n      css === null ||\n      typeof css === 'undefined' ||\n      (typeof css === 'object' && !css.toString)\n    ) {\n      throw new Error(`PostCSS received ${ css } instead of CSS string`)\n    }\n\n    /**\n     * Input CSS source\n     *\n     * @type {string}\n     *\n     * @example\n     * const input = postcss.parse('a{}', { from: file }).input\n     * input.css //=> \"a{}\"\n     */\n    this.css = css.toString()\n\n    if (this.css[0] === '\\uFEFF' || this.css[0] === '\\uFFFE') {\n      this.hasBOM = true\n      this.css = this.css.slice(1)\n    } else {\n      this.hasBOM = false\n    }\n\n    if (opts.from) {\n      if (/^\\w+:\\/\\//.test(opts.from) || path.isAbsolute(opts.from)) {\n        /**\n         * The absolute path to the CSS source file defined\n         * with the `from` option.\n         *\n         * @type {string}\n         *\n         * @example\n         * const root = postcss.parse(css, { from: 'a.css' })\n         * root.source.input.file //=> '/home/ai/a.css'\n         */\n        this.file = opts.from\n      } else {\n        this.file = path.resolve(opts.from)\n      }\n    }\n\n    let map = new PreviousMap(this.css, opts)\n    if (map.text) {\n      /**\n       * The input source map passed from a compilation step before PostCSS\n       * (for example, from Sass compiler).\n       *\n       * @type {PreviousMap}\n       *\n       * @example\n       * root.source.input.map.consumer().sources //=> ['a.sass']\n       */\n      this.map = map\n      let file = map.consumer().file\n      if (!this.file && file) this.file = this.mapResolve(file)\n    }\n\n    if (!this.file) {\n      sequence += 1\n      /**\n       * The unique ID of the CSS source. It will be created if `from` option\n       * is not provided (because PostCSS does not know the file path).\n       *\n       * @type {string}\n       *\n       * @example\n       * const root = postcss.parse(css)\n       * root.source.input.file //=> undefined\n       * root.source.input.id   //=> \"<input css 1>\"\n       */\n      this.id = '<input css ' + sequence + '>'\n    }\n    if (this.map) this.map.file = this.from\n  }\n\n  error (message, line, column, opts = { }) {\n    let result\n    let origin = this.origin(line, column)\n    if (origin) {\n      result = new CssSyntaxError(\n        message, origin.line, origin.column,\n        origin.source, origin.file, opts.plugin\n      )\n    } else {\n      result = new CssSyntaxError(\n        message, line, column, this.css, this.file, opts.plugin)\n    }\n\n    result.input = { line, column, source: this.css }\n    if (this.file) result.input.file = this.file\n\n    return result\n  }\n\n  /**\n   * Reads the input source map and returns a symbol position\n   * in the input source (e.g., in a Sass file that was compiled\n   * to CSS before being passed to PostCSS).\n   *\n   * @param {number} line   Line in input CSS.\n   * @param {number} column Column in input CSS.\n   *\n   * @return {filePosition} Position in input source.\n   *\n   * @example\n   * root.source.input.origin(1, 1) //=> { file: 'a.css', line: 3, column: 1 }\n   */\n  origin (line, column) {\n    if (!this.map) return false\n    let consumer = this.map.consumer()\n\n    let from = consumer.originalPositionFor({ line, column })\n    if (!from.source) return false\n\n    let result = {\n      file: this.mapResolve(from.source),\n      line: from.line,\n      column: from.column\n    }\n\n    let source = consumer.sourceContentFor(from.source)\n    if (source) result.source = source\n\n    return result\n  }\n\n  mapResolve (file) {\n    if (/^\\w+:\\/\\//.test(file)) {\n      return file\n    }\n    return path.resolve(this.map.consumer().sourceRoot || '.', file)\n  }\n\n  /**\n   * The CSS source identifier. Contains {@link Input#file} if the user\n   * set the `from` option, or {@link Input#id} if they did not.\n   *\n   * @type {string}\n   *\n   * @example\n   * const root = postcss.parse(css, { from: 'a.css' })\n   * root.source.input.from //=> \"/home/ai/a.css\"\n   *\n   * const root = postcss.parse(css)\n   * root.source.input.from //=> \"<input css 1>\"\n   */\n  get from () {\n    return this.file || this.id\n  }\n}\n\nexport default Input\n\n/**\n * @typedef  {object} filePosition\n * @property {string} file   Path to file.\n * @property {number} line   Source line in file.\n * @property {number} column Source column in file.\n */\n",
    "import MapGenerator from './map-generator'\nimport stringify from './stringify'\nimport warnOnce from './warn-once'\nimport Result from './result'\nimport parse from './parse'\n\nfunction isPromise (obj) {\n  return typeof obj === 'object' && typeof obj.then === 'function'\n}\n\n/**\n * A Promise proxy for the result of PostCSS transformations.\n *\n * A `LazyResult` instance is returned by {@link Processor#process}.\n *\n * @example\n * const lazy = postcss([autoprefixer]).process(css)\n */\nclass LazyResult {\n  constructor (processor, css, opts) {\n    this.stringified = false\n    this.processed = false\n\n    let root\n    if (typeof css === 'object' && css !== null && css.type === 'root') {\n      root = css\n    } else if (css instanceof LazyResult || css instanceof Result) {\n      root = css.root\n      if (css.map) {\n        if (typeof opts.map === 'undefined') opts.map = { }\n        if (!opts.map.inline) opts.map.inline = false\n        opts.map.prev = css.map\n      }\n    } else {\n      let parser = parse\n      if (opts.syntax) parser = opts.syntax.parse\n      if (opts.parser) parser = opts.parser\n      if (parser.parse) parser = parser.parse\n\n      try {\n        root = parser(css, opts)\n      } catch (error) {\n        this.error = error\n      }\n    }\n\n    this.result = new Result(processor, root, opts)\n  }\n\n  /**\n   * Returns a {@link Processor} instance, which will be used\n   * for CSS transformations.\n   *\n   * @type {Processor}\n   */\n  get processor () {\n    return this.result.processor\n  }\n\n  /**\n   * Options from the {@link Processor#process} call.\n   *\n   * @type {processOptions}\n   */\n  get opts () {\n    return this.result.opts\n  }\n\n  /**\n   * Processes input CSS through synchronous plugins, converts `Root`\n   * to a CSS string and returns {@link Result#css}.\n   *\n   * This property will only work with synchronous plugins.\n   * If the processor contains any asynchronous plugins\n   * it will throw an error. This is why this method is only\n   * for debug purpose, you should always use {@link LazyResult#then}.\n   *\n   * @type {string}\n   * @see Result#css\n   */\n  get css () {\n    return this.stringify().css\n  }\n\n  /**\n   * An alias for the `css` property. Use it with syntaxes\n   * that generate non-CSS output.\n   *\n   * This property will only work with synchronous plugins.\n   * If the processor contains any asynchronous plugins\n   * it will throw an error. This is why this method is only\n   * for debug purpose, you should always use {@link LazyResult#then}.\n   *\n   * @type {string}\n   * @see Result#content\n   */\n  get content () {\n    return this.stringify().content\n  }\n\n  /**\n   * Processes input CSS through synchronous plugins\n   * and returns {@link Result#map}.\n   *\n   * This property will only work with synchronous plugins.\n   * If the processor contains any asynchronous plugins\n   * it will throw an error. This is why this method is only\n   * for debug purpose, you should always use {@link LazyResult#then}.\n   *\n   * @type {SourceMapGenerator}\n   * @see Result#map\n   */\n  get map () {\n    return this.stringify().map\n  }\n\n  /**\n   * Processes input CSS through synchronous plugins\n   * and returns {@link Result#root}.\n   *\n   * This property will only work with synchronous plugins. If the processor\n   * contains any asynchronous plugins it will throw an error.\n   *\n   * This is why this method is only for debug purpose,\n   * you should always use {@link LazyResult#then}.\n   *\n   * @type {Root}\n   * @see Result#root\n   */\n  get root () {\n    return this.sync().root\n  }\n\n  /**\n   * Processes input CSS through synchronous plugins\n   * and returns {@link Result#messages}.\n   *\n   * This property will only work with synchronous plugins. If the processor\n   * contains any asynchronous plugins it will throw an error.\n   *\n   * This is why this method is only for debug purpose,\n   * you should always use {@link LazyResult#then}.\n   *\n   * @type {Message[]}\n   * @see Result#messages\n   */\n  get messages () {\n    return this.sync().messages\n  }\n\n  /**\n   * Processes input CSS through synchronous plugins\n   * and calls {@link Result#warnings()}.\n   *\n   * @return {Warning[]} Warnings from plugins.\n   */\n  warnings () {\n    return this.sync().warnings()\n  }\n\n  /**\n   * Alias for the {@link LazyResult#css} property.\n   *\n   * @example\n   * lazy + '' === lazy.css\n   *\n   * @return {string} Output CSS.\n   */\n  toString () {\n    return this.css\n  }\n\n  /**\n   * Processes input CSS through synchronous and asynchronous plugins\n   * and calls `onFulfilled` with a Result instance. If a plugin throws\n   * an error, the `onRejected` callback will be executed.\n   *\n   * It implements standard Promise API.\n   *\n   * @param {onFulfilled} onFulfilled Callback will be executed\n   *                                  when all plugins will finish work.\n   * @param {onRejected}  onRejected  Callback will be executed on any error.\n   *\n   * @return {Promise} Promise API to make queue.\n   *\n   * @example\n   * postcss([autoprefixer]).process(css, { from: cssPath }).then(result => {\n   *   console.log(result.css)\n   * })\n   */\n  then (onFulfilled, onRejected) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (!('from' in this.opts)) {\n        warnOnce(\n          'Without `from` option PostCSS could generate wrong source map ' +\n          'and will not find Browserslist config. Set it to CSS file path ' +\n          'or to `undefined` to prevent this warning.'\n        )\n      }\n    }\n    return this.async().then(onFulfilled, onRejected)\n  }\n\n  /**\n   * Processes input CSS through synchronous and asynchronous plugins\n   * and calls onRejected for each error thrown in any plugin.\n   *\n   * It implements standard Promise API.\n   *\n   * @param {onRejected} onRejected Callback will be executed on any error.\n   *\n   * @return {Promise} Promise API to make queue.\n   *\n   * @example\n   * postcss([autoprefixer]).process(css).then(result => {\n   *   console.log(result.css)\n   * }).catch(error => {\n   *   console.error(error)\n   * })\n   */\n  catch (onRejected) {\n    return this.async().catch(onRejected)\n  }\n  /**\n   * Processes input CSS through synchronous and asynchronous plugins\n   * and calls onFinally on any error or when all plugins will finish work.\n   *\n   * It implements standard Promise API.\n   *\n   * @param {onFinally} onFinally Callback will be executed on any error or\n   *                              when all plugins will finish work.\n   *\n   * @return {Promise} Promise API to make queue.\n   *\n   * @example\n   * postcss([autoprefixer]).process(css).finally(() => {\n   *   console.log('processing ended')\n   * })\n   */\n  finally (onFinally) {\n    return this.async().then(onFinally, onFinally)\n  }\n\n  handleError (error, plugin) {\n    try {\n      this.error = error\n      if (error.name === 'CssSyntaxError' && !error.plugin) {\n        error.plugin = plugin.postcssPlugin\n        error.setMessage()\n      } else if (plugin.postcssVersion) {\n        if (process.env.NODE_ENV !== 'production') {\n          let pluginName = plugin.postcssPlugin\n          let pluginVer = plugin.postcssVersion\n          let runtimeVer = this.result.processor.version\n          let a = pluginVer.split('.')\n          let b = runtimeVer.split('.')\n\n          if (a[0] !== b[0] || parseInt(a[1]) > parseInt(b[1])) {\n            console.error(\n              'Unknown error from PostCSS plugin. Your current PostCSS ' +\n              'version is ' + runtimeVer + ', but ' + pluginName + ' uses ' +\n              pluginVer + '. Perhaps this is the source of the error below.'\n            )\n          }\n        }\n      }\n    } catch (err) {\n      if (console && console.error) console.error(err)\n    }\n  }\n\n  asyncTick (resolve, reject) {\n    if (this.plugin >= this.processor.plugins.length) {\n      this.processed = true\n      return resolve()\n    }\n\n    try {\n      let plugin = this.processor.plugins[this.plugin]\n      let promise = this.run(plugin)\n      this.plugin += 1\n\n      if (isPromise(promise)) {\n        promise.then(() => {\n          this.asyncTick(resolve, reject)\n        }).catch(error => {\n          this.handleError(error, plugin)\n          this.processed = true\n          reject(error)\n        })\n      } else {\n        this.asyncTick(resolve, reject)\n      }\n    } catch (error) {\n      this.processed = true\n      reject(error)\n    }\n  }\n\n  async () {\n    if (this.processed) {\n      return new Promise((resolve, reject) => {\n        if (this.error) {\n          reject(this.error)\n        } else {\n          resolve(this.stringify())\n        }\n      })\n    }\n    if (this.processing) {\n      return this.processing\n    }\n\n    this.processing = new Promise((resolve, reject) => {\n      if (this.error) return reject(this.error)\n      this.plugin = 0\n      this.asyncTick(resolve, reject)\n    }).then(() => {\n      this.processed = true\n      return this.stringify()\n    })\n\n    return this.processing\n  }\n\n  sync () {\n    if (this.processed) return this.result\n    this.processed = true\n\n    if (this.processing) {\n      throw new Error(\n        'Use process(css).then(cb) to work with async plugins')\n    }\n\n    if (this.error) throw this.error\n\n    for (let plugin of this.result.processor.plugins) {\n      let promise = this.run(plugin)\n      if (isPromise(promise)) {\n        throw new Error(\n          'Use process(css).then(cb) to work with async plugins')\n      }\n    }\n\n    return this.result\n  }\n\n  run (plugin) {\n    this.result.lastPlugin = plugin\n\n    try {\n      return plugin(this.result.root, this.result)\n    } catch (error) {\n      this.handleError(error, plugin)\n      throw error\n    }\n  }\n\n  stringify () {\n    if (this.stringified) return this.result\n    this.stringified = true\n\n    this.sync()\n\n    let opts = this.result.opts\n    let str = stringify\n    if (opts.syntax) str = opts.syntax.stringify\n    if (opts.stringifier) str = opts.stringifier\n    if (str.stringify) str = str.stringify\n\n    let map = new MapGenerator(str, this.result.root, this.result.opts)\n    let data = map.generate()\n    this.result.css = data[0]\n    this.result.map = data[1]\n\n    return this.result\n  }\n}\n\nexport default LazyResult\n\n/**\n * @callback onFulfilled\n * @param {Result} result\n */\n\n/**\n * @callback onRejected\n * @param {Error} error\n */\n",
    "/**\n * Contains helpers for safely splitting lists of CSS values,\n * preserving parentheses and quotes.\n *\n * @example\n * const list = postcss.list\n *\n * @namespace list\n */\nlet list = {\n\n  split (string, separators, last) {\n    let array = []\n    let current = ''\n    let split = false\n\n    let func = 0\n    let quote = false\n    let escape = false\n\n    for (let i = 0; i < string.length; i++) {\n      let letter = string[i]\n\n      if (quote) {\n        if (escape) {\n          escape = false\n        } else if (letter === '\\\\') {\n          escape = true\n        } else if (letter === quote) {\n          quote = false\n        }\n      } else if (letter === '\"' || letter === '\\'') {\n        quote = letter\n      } else if (letter === '(') {\n        func += 1\n      } else if (letter === ')') {\n        if (func > 0) func -= 1\n      } else if (func === 0) {\n        if (separators.indexOf(letter) !== -1) split = true\n      }\n\n      if (split) {\n        if (current !== '') array.push(current.trim())\n        current = ''\n        split = false\n      } else {\n        current += letter\n      }\n    }\n\n    if (last || current !== '') array.push(current.trim())\n    return array\n  },\n\n  /**\n   * Safely splits space-separated values (such as those for `background`,\n   * `border-radius`, and other shorthand properties).\n   *\n   * @param {string} string Space-separated values.\n   *\n   * @return {string[]} Split values.\n   *\n   * @example\n   * postcss.list.space('1px calc(10% + 1px)') //=> ['1px', 'calc(10% + 1px)']\n   */\n  space (string) {\n    let spaces = [' ', '\\n', '\\t']\n    return list.split(string, spaces)\n  },\n\n  /**\n   * Safely splits comma-separated values (such as those for `transition-*`\n   * and `background` properties).\n   *\n   * @param {string} string Comma-separated values.\n   *\n   * @return {string[]} Split values.\n   *\n   * @example\n   * postcss.list.comma('black, linear-gradient(white, black)')\n   * //=> ['black', 'linear-gradient(white, black)']\n   */\n  comma (string) {\n    return list.split(string, [','], true)\n  }\n\n}\n\nexport default list\n",
    "import mozilla from 'source-map'\nimport path from 'path'\n\nclass MapGenerator {\n  constructor (stringify, root, opts) {\n    this.stringify = stringify\n    this.mapOpts = opts.map || { }\n    this.root = root\n    this.opts = opts\n  }\n\n  isMap () {\n    if (typeof this.opts.map !== 'undefined') {\n      return !!this.opts.map\n    }\n    return this.previous().length > 0\n  }\n\n  previous () {\n    if (!this.previousMaps) {\n      this.previousMaps = []\n      this.root.walk(node => {\n        if (node.source && node.source.input.map) {\n          let map = node.source.input.map\n          if (this.previousMaps.indexOf(map) === -1) {\n            this.previousMaps.push(map)\n          }\n        }\n      })\n    }\n\n    return this.previousMaps\n  }\n\n  isInline () {\n    if (typeof this.mapOpts.inline !== 'undefined') {\n      return this.mapOpts.inline\n    }\n\n    let annotation = this.mapOpts.annotation\n    if (typeof annotation !== 'undefined' && annotation !== true) {\n      return false\n    }\n\n    if (this.previous().length) {\n      return this.previous().some(i => i.inline)\n    }\n    return true\n  }\n\n  isSourcesContent () {\n    if (typeof this.mapOpts.sourcesContent !== 'undefined') {\n      return this.mapOpts.sourcesContent\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.withContent())\n    }\n    return true\n  }\n\n  clearAnnotation () {\n    if (this.mapOpts.annotation === false) return\n\n    let node\n    for (let i = this.root.nodes.length - 1; i >= 0; i--) {\n      node = this.root.nodes[i]\n      if (node.type !== 'comment') continue\n      if (node.text.indexOf('# sourceMappingURL=') === 0) {\n        this.root.removeChild(i)\n      }\n    }\n  }\n\n  setSourcesContent () {\n    let already = { }\n    this.root.walk(node => {\n      if (node.source) {\n        let from = node.source.input.from\n        if (from && !already[from]) {\n          already[from] = true\n          let relative = this.relative(from)\n          this.map.setSourceContent(relative, node.source.input.css)\n        }\n      }\n    })\n  }\n\n  applyPrevMaps () {\n    for (let prev of this.previous()) {\n      let from = this.relative(prev.file)\n      let root = prev.root || path.dirname(prev.file)\n      let map\n\n      if (this.mapOpts.sourcesContent === false) {\n        map = new mozilla.SourceMapConsumer(prev.text)\n        if (map.sourcesContent) {\n          map.sourcesContent = map.sourcesContent.map(() => null)\n        }\n      } else {\n        map = prev.consumer()\n      }\n\n      this.map.applySourceMap(map, from, this.relative(root))\n    }\n  }\n\n  isAnnotation () {\n    if (this.isInline()) {\n      return true\n    }\n    if (typeof this.mapOpts.annotation !== 'undefined') {\n      return this.mapOpts.annotation\n    }\n    if (this.previous().length) {\n      return this.previous().some(i => i.annotation)\n    }\n    return true\n  }\n\n  toBase64 (str) {\n    if (Buffer) {\n      return Buffer.from(str).toString('base64')\n    }\n    return window.btoa(unescape(encodeURIComponent(str)))\n  }\n\n  addAnnotation () {\n    let content\n\n    if (this.isInline()) {\n      content = 'data:application/json;base64,' +\n                this.toBase64(this.map.toString())\n    } else if (typeof this.mapOpts.annotation === 'string') {\n      content = this.mapOpts.annotation\n    } else {\n      content = this.outputFile() + '.map'\n    }\n\n    let eol = '\\n'\n    if (this.css.indexOf('\\r\\n') !== -1) eol = '\\r\\n'\n\n    this.css += eol + '/*# sourceMappingURL=' + content + ' */'\n  }\n\n  outputFile () {\n    if (this.opts.to) {\n      return this.relative(this.opts.to)\n    }\n    if (this.opts.from) {\n      return this.relative(this.opts.from)\n    }\n    return 'to.css'\n  }\n\n  generateMap () {\n    this.generateString()\n    if (this.isSourcesContent()) this.setSourcesContent()\n    if (this.previous().length > 0) this.applyPrevMaps()\n    if (this.isAnnotation()) this.addAnnotation()\n\n    if (this.isInline()) {\n      return [this.css]\n    }\n    return [this.css, this.map]\n  }\n\n  relative (file) {\n    if (file.indexOf('<') === 0) return file\n    if (/^\\w+:\\/\\//.test(file)) return file\n\n    let from = this.opts.to ? path.dirname(this.opts.to) : '.'\n\n    if (typeof this.mapOpts.annotation === 'string') {\n      from = path.dirname(path.resolve(from, this.mapOpts.annotation))\n    }\n\n    file = path.relative(from, file)\n    if (path.sep === '\\\\') {\n      return file.replace(/\\\\/g, '/')\n    }\n    return file\n  }\n\n  sourcePath (node) {\n    if (this.mapOpts.from) {\n      return this.mapOpts.from\n    }\n    return this.relative(node.source.input.from)\n  }\n\n  generateString () {\n    this.css = ''\n    this.map = new mozilla.SourceMapGenerator({ file: this.outputFile() })\n\n    let line = 1\n    let column = 1\n\n    let lines, last\n    this.stringify(this.root, (str, node, type) => {\n      this.css += str\n\n      if (node && type !== 'end') {\n        if (node.source && node.source.start) {\n          this.map.addMapping({\n            source: this.sourcePath(node),\n            generated: { line, column: column - 1 },\n            original: {\n              line: node.source.start.line,\n              column: node.source.start.column - 1\n            }\n          })\n        } else {\n          this.map.addMapping({\n            source: '<no source>',\n            original: { line: 1, column: 0 },\n            generated: { line, column: column - 1 }\n          })\n        }\n      }\n\n      lines = str.match(/\\n/g)\n      if (lines) {\n        line += lines.length\n        last = str.lastIndexOf('\\n')\n        column = str.length - last\n      } else {\n        column += str.length\n      }\n\n      if (node && type !== 'start') {\n        let p = node.parent || { raws: { } }\n        if (node.type !== 'decl' || node !== p.last || p.raws.semicolon) {\n          if (node.source && node.source.end) {\n            this.map.addMapping({\n              source: this.sourcePath(node),\n              generated: { line, column: column - 2 },\n              original: {\n                line: node.source.end.line,\n                column: node.source.end.column - 1\n              }\n            })\n          } else {\n            this.map.addMapping({\n              source: '<no source>',\n              original: { line: 1, column: 0 },\n              generated: { line, column: column - 1 }\n            })\n          }\n        }\n      }\n    })\n  }\n\n  generate () {\n    this.clearAnnotation()\n\n    if (this.isMap()) {\n      return this.generateMap()\n    }\n\n    let result = ''\n    this.stringify(this.root, i => {\n      result += i\n    })\n    return [result]\n  }\n}\n\nexport default MapGenerator\n",
    "import CssSyntaxError from './css-syntax-error'\nimport Stringifier from './stringifier'\nimport stringify from './stringify'\n\nfunction cloneNode (obj, parent) {\n  let cloned = new obj.constructor()\n\n  for (let i in obj) {\n    if (!obj.hasOwnProperty(i)) continue\n    let value = obj[i]\n    let type = typeof value\n\n    if (i === 'parent' && type === 'object') {\n      if (parent) cloned[i] = parent\n    } else if (i === 'source') {\n      cloned[i] = value\n    } else if (value instanceof Array) {\n      cloned[i] = value.map(j => cloneNode(j, cloned))\n    } else {\n      if (type === 'object' && value !== null) value = cloneNode(value)\n      cloned[i] = value\n    }\n  }\n\n  return cloned\n}\n\n/**\n * All node classes inherit the following common methods.\n *\n * @abstract\n */\nclass Node {\n  /**\n   * @param {object} [defaults] Value for node properties.\n   */\n  constructor (defaults = { }) {\n    this.raws = { }\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof defaults !== 'object' && typeof defaults !== 'undefined') {\n        throw new Error(\n          'PostCSS nodes constructor accepts object, not ' +\n          JSON.stringify(defaults)\n        )\n      }\n    }\n    for (let name in defaults) {\n      this[name] = defaults[name]\n    }\n  }\n\n  /**\n   * Returns a `CssSyntaxError` instance containing the original position\n   * of the node in the source, showing line and column numbers and also\n   * a small excerpt to facilitate debugging.\n   *\n   * If present, an input source map will be used to get the original position\n   * of the source, even from a previous compilation step\n   * (e.g., from Sass compilation).\n   *\n   * This method produces very useful error messages.\n   *\n   * @param {string} message     Error description.\n   * @param {object} [opts]      Options.\n   * @param {string} opts.plugin Plugin name that created this error.\n   *                             PostCSS will set it automatically.\n   * @param {string} opts.word   A word inside a nodes string that should\n   *                             be highlighted as the source of the error.\n   * @param {number} opts.index  An index inside a nodes string that should\n   *                             be highlighted as the source of the error.\n   *\n   * @return {CssSyntaxError} Error object to throw it.\n   *\n   * @example\n   * if (!variables[name]) {\n   *   throw decl.error('Unknown variable ' + name, { word: name })\n   *   // CssSyntaxError: postcss-vars:a.sass:4:3: Unknown variable $black\n   *   //   color: $black\n   *   // a\n   *   //          ^\n   *   //   background: white\n   * }\n   */\n  error (message, opts = { }) {\n    if (this.source) {\n      let pos = this.positionBy(opts)\n      return this.source.input.error(message, pos.line, pos.column, opts)\n    }\n    return new CssSyntaxError(message)\n  }\n\n  /**\n   * This method is provided as a convenience wrapper for {@link Result#warn}.\n   *\n   * @param {Result} result      The {@link Result} instance\n   *                             that will receive the warning.\n   * @param {string} text        Warning message.\n   * @param {object} [opts]      Options\n   * @param {string} opts.plugin Plugin name that created this warning.\n   *                             PostCSS will set it automatically.\n   * @param {string} opts.word   A word inside a nodes string that should\n   *                             be highlighted as the source of the warning.\n   * @param {number} opts.index  An index inside a nodes string that should\n   *                             be highlighted as the source of the warning.\n   *\n   * @return {Warning} Created warning object.\n   *\n   * @example\n   * const plugin = postcss.plugin('postcss-deprecated', () => {\n   *   return (root, result) => {\n   *     root.walkDecls('bad', decl => {\n   *       decl.warn(result, 'Deprecated property bad')\n   *     })\n   *   }\n   * })\n   */\n  warn (result, text, opts) {\n    let data = { node: this }\n    for (let i in opts) data[i] = opts[i]\n    return result.warn(text, data)\n  }\n\n  /**\n   * Removes the node from its parent and cleans the parent properties\n   * from the node and its children.\n   *\n   * @example\n   * if (decl.prop.match(/^-webkit-/)) {\n   *   decl.remove()\n   * }\n   *\n   * @return {Node} Node to make calls chain.\n   */\n  remove () {\n    if (this.parent) {\n      this.parent.removeChild(this)\n    }\n    this.parent = undefined\n    return this\n  }\n\n  /**\n   * Returns a CSS string representing the node.\n   *\n   * @param {stringifier|syntax} [stringifier] A syntax to use\n   *                                           in string generation.\n   *\n   * @return {string} CSS string of this node.\n   *\n   * @example\n   * postcss.rule({ selector: 'a' }).toString() //=> \"a {}\"\n   */\n  toString (stringifier = stringify) {\n    if (stringifier.stringify) stringifier = stringifier.stringify\n    let result = ''\n    stringifier(this, i => {\n      result += i\n    })\n    return result\n  }\n\n  /**\n   * Returns an exact clone of the node.\n   *\n   * The resulting cloned node and its (cloned) children will retain\n   * code style properties.\n   *\n   * @param {object} [overrides] New properties to override in the clone.\n   *\n   * @example\n   * decl.raws.before    //=> \"\\n  \"\n   * const cloned = decl.clone({ prop: '-moz-' + decl.prop })\n   * cloned.raws.before  //=> \"\\n  \"\n   * cloned.toString()   //=> -moz-transform: scale(0)\n   *\n   * @return {Node} Clone of the node.\n   */\n  clone (overrides = { }) {\n    let cloned = cloneNode(this)\n    for (let name in overrides) {\n      cloned[name] = overrides[name]\n    }\n    return cloned\n  }\n\n  /**\n   * Shortcut to clone the node and insert the resulting cloned node\n   * before the current node.\n   *\n   * @param {object} [overrides] Mew properties to override in the clone.\n   *\n   * @example\n   * decl.cloneBefore({ prop: '-moz-' + decl.prop })\n   *\n   * @return {Node} New node\n   */\n  cloneBefore (overrides = { }) {\n    let cloned = this.clone(overrides)\n    this.parent.insertBefore(this, cloned)\n    return cloned\n  }\n\n  /**\n   * Shortcut to clone the node and insert the resulting cloned node\n   * after the current node.\n   *\n   * @param {object} [overrides] New properties to override in the clone.\n   *\n   * @return {Node} New node.\n   */\n  cloneAfter (overrides = { }) {\n    let cloned = this.clone(overrides)\n    this.parent.insertAfter(this, cloned)\n    return cloned\n  }\n\n  /**\n   * Inserts node(s) before the current node and removes the current node.\n   *\n   * @param {...Node} nodes Mode(s) to replace current one.\n   *\n   * @example\n   * if (atrule.name === 'mixin') {\n   *   atrule.replaceWith(mixinRules[atrule.params])\n   * }\n   *\n   * @return {Node} Current node to methods chain.\n   */\n  replaceWith (...nodes) {\n    if (this.parent) {\n      for (let node of nodes) {\n        this.parent.insertBefore(this, node)\n      }\n\n      this.remove()\n    }\n\n    return this\n  }\n\n  /**\n   * Returns the next child of the nodes parent.\n   * Returns `undefined` if the current node is the last child.\n   *\n   * @return {Node|undefined} Next node.\n   *\n   * @example\n   * if (comment.text === 'delete next') {\n   *   const next = comment.next()\n   *   if (next) {\n   *     next.remove()\n   *   }\n   * }\n   */\n  next () {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index + 1]\n  }\n\n  /**\n   * Returns the previous child of the nodes parent.\n   * Returns `undefined` if the current node is the first child.\n   *\n   * @return {Node|undefined} Previous node.\n   *\n   * @example\n   * const annotation = decl.prev()\n   * if (annotation.type === 'comment') {\n   *   readAnnotation(annotation.text)\n   * }\n   */\n  prev () {\n    if (!this.parent) return undefined\n    let index = this.parent.index(this)\n    return this.parent.nodes[index - 1]\n  }\n\n  /**\n   * Insert new node before current node to current nodes parent.\n   *\n   * Just alias for `node.parent.insertBefore(node, add)`.\n   *\n   * @param {Node|object|string|Node[]} add New node.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * decl.before('content: \"\"')\n   */\n  before (add) {\n    this.parent.insertBefore(this, add)\n    return this\n  }\n\n  /**\n   * Insert new node after current node to current nodes parent.\n   *\n   * Just alias for `node.parent.insertAfter(node, add)`.\n   *\n   * @param {Node|object|string|Node[]} add New node.\n   *\n   * @return {Node} This node for methods chain.\n   *\n   * @example\n   * decl.after('color: black')\n   */\n  after (add) {\n    this.parent.insertAfter(this, add)\n    return this\n  }\n\n  toJSON () {\n    let fixed = { }\n\n    for (let name in this) {\n      if (!this.hasOwnProperty(name)) continue\n      if (name === 'parent') continue\n      let value = this[name]\n\n      if (value instanceof Array) {\n        fixed[name] = value.map(i => {\n          if (typeof i === 'object' && i.toJSON) {\n            return i.toJSON()\n          } else {\n            return i\n          }\n        })\n      } else if (typeof value === 'object' && value.toJSON) {\n        fixed[name] = value.toJSON()\n      } else {\n        fixed[name] = value\n      }\n    }\n\n    return fixed\n  }\n\n  /**\n   * Returns a {@link Node#raws} value. If the node is missing\n   * the code style property (because the node was manually built or cloned),\n   * PostCSS will try to autodetect the code style property by looking\n   * at other nodes in the tree.\n   *\n   * @param {string} prop          Name of code style property.\n   * @param {string} [defaultType] Name of default value, it can be missed\n   *                               if the value is the same as prop.\n   *\n   * @example\n   * const root = postcss.parse('a { background: white }')\n   * root.nodes[0].append({ prop: 'color', value: 'black' })\n   * root.nodes[0].nodes[1].raws.before   //=> undefined\n   * root.nodes[0].nodes[1].raw('before') //=> ' '\n   *\n   * @return {string} Code style value.\n   */\n  raw (prop, defaultType) {\n    let str = new Stringifier()\n    return str.raw(this, prop, defaultType)\n  }\n\n  /**\n   * Finds the Root instance of the nodes tree.\n   *\n   * @example\n   * root.nodes[0].nodes[0].root() === root\n   *\n   * @return {Root} Root parent.\n   */\n  root () {\n    let result = this\n    while (result.parent) result = result.parent\n    return result\n  }\n\n  /**\n   * Clear the code style properties for the node and its children.\n   *\n   * @param {boolean} [keepBetween] Keep the raws.between symbols.\n   *\n   * @return {undefined}\n   *\n   * @example\n   * node.raws.before  //=> ' '\n   * node.cleanRaws()\n   * node.raws.before  //=> undefined\n   */\n  cleanRaws (keepBetween) {\n    delete this.raws.before\n    delete this.raws.after\n    if (!keepBetween) delete this.raws.between\n  }\n\n  positionInside (index) {\n    let string = this.toString()\n    let column = this.source.start.column\n    let line = this.source.start.line\n\n    for (let i = 0; i < index; i++) {\n      if (string[i] === '\\n') {\n        column = 1\n        line += 1\n      } else {\n        column += 1\n      }\n    }\n\n    return { line, column }\n  }\n\n  positionBy (opts) {\n    let pos = this.source.start\n    if (opts.index) {\n      pos = this.positionInside(opts.index)\n    } else if (opts.word) {\n      let index = this.toString().indexOf(opts.word)\n      if (index !== -1) pos = this.positionInside(index)\n    }\n    return pos\n  }\n\n  /**\n   * @memberof Node#\n   * @member {string} type String representing the nodes type.\n   *                       Possible values are `root`, `atrule`, `rule`,\n   *                       `decl`, or `comment`.\n   *\n   * @example\n   * postcss.decl({ prop: 'color', value: 'black' }).type //=> 'decl'\n   */\n\n  /**\n   * @memberof Node#\n   * @member {Container} parent The nodes parent node.\n   *\n   * @example\n   * root.nodes[0].parent === root\n   */\n\n  /**\n   * @memberof Node#\n   * @member {source} source The input source of the node.\n   *\n   * The property is used in source map generation.\n   *\n   * If you create a node manually (e.g., with `postcss.decl()`),\n   * that node will not have a `source` property and will be absent\n   * from the source map. For this reason, the plugin developer should\n   * consider cloning nodes to create new ones (in which case the new nodes\n   * source will reference the original, cloned node) or setting\n   * the `source` property manually.\n   *\n   * ```js\n   * // Bad\n   * const prefixed = postcss.decl({\n   *   prop: '-moz-' + decl.prop,\n   *   value: decl.value\n   * })\n   *\n   * // Good\n   * const prefixed = decl.clone({ prop: '-moz-' + decl.prop })\n   * ```\n   *\n   * ```js\n   * if (atrule.name === 'add-link') {\n   *   const rule = postcss.rule({ selector: 'a', source: atrule.source })\n   *   atrule.parent.insertBefore(atrule, rule)\n   * }\n   * ```\n   *\n   * @example\n   * decl.source.input.from //=> '/home/ai/a.sass'\n   * decl.source.start      //=> { line: 10, column: 2 }\n   * decl.source.end        //=> { line: 10, column: 12 }\n   */\n\n  /**\n   * @memberof Node#\n   * @member {object} raws Information to generate byte-to-byte equal\n   *                       node string as it was in the origin input.\n   *\n   * Every parser saves its own properties,\n   * but the default CSS parser uses:\n   *\n   * * `before`: the space symbols before the node. It also stores `*`\n   *   and `_` symbols before the declaration (IE hack).\n   * * `after`: the space symbols after the last child of the node\n   *   to the end of the node.\n   * * `between`: the symbols between the property and value\n   *   for declarations, selector and `{` for rules, or last parameter\n   *   and `{` for at-rules.\n   * * `semicolon`: contains true if the last child has\n   *   an (optional) semicolon.\n   * * `afterName`: the space between the at-rule name and its parameters.\n   * * `left`: the space symbols between `/*` and the comments text.\n   * * `right`: the space symbols between the comments text\n   *   and <code>*&#47;</code>.\n   * * `important`: the content of the important statement,\n   *   if it is not just `!important`.\n   *\n   * PostCSS cleans selectors, declaration values and at-rule parameters\n   * from comments and extra spaces, but it stores origin content in raws\n   * properties. As such, if you dont change a declarations value,\n   * PostCSS will use the raw value with comments.\n   *\n   * @example\n   * const root = postcss.parse('a {\\n  color:black\\n}')\n   * root.first.first.raws //=> { before: '\\n  ', between: ':' }\n   */\n}\n\nexport default Node\n\n/**\n * @typedef {object} position\n * @property {number} line   Source line in file.\n * @property {number} column Source column in file.\n */\n\n/**\n * @typedef {object} source\n * @property {Input} input    {@link Input} with input file\n * @property {position} start The starting position of the nodes source.\n * @property {position} end   The ending position of the nodes source.\n */\n",
    "import Parser from './parser'\nimport Input from './input'\n\nfunction parse (css, opts) {\n  let input = new Input(css, opts)\n  let parser = new Parser(input)\n  try {\n    parser.parse()\n  } catch (e) {\n    if (process.env.NODE_ENV !== 'production') {\n      if (e.name === 'CssSyntaxError' && opts && opts.from) {\n        if (/\\.scss$/i.test(opts.from)) {\n          e.message += '\\nYou tried to parse SCSS with ' +\n                       'the standard CSS parser; ' +\n                       'try again with the postcss-scss parser'\n        } else if (/\\.sass/i.test(opts.from)) {\n          e.message += '\\nYou tried to parse Sass with ' +\n                       'the standard CSS parser; ' +\n                       'try again with the postcss-sass parser'\n        } else if (/\\.less$/i.test(opts.from)) {\n          e.message += '\\nYou tried to parse Less with ' +\n                       'the standard CSS parser; ' +\n                       'try again with the postcss-less parser'\n        }\n      }\n    }\n    throw e\n  }\n\n  return parser.root\n}\n\nexport default parse\n",
    "import Declaration from './declaration'\nimport tokenizer from './tokenize'\nimport Comment from './comment'\nimport AtRule from './at-rule'\nimport Root from './root'\nimport Rule from './rule'\n\nexport default class Parser {\n  constructor (input) {\n    this.input = input\n\n    this.root = new Root()\n    this.current = this.root\n    this.spaces = ''\n    this.semicolon = false\n\n    this.createTokenizer()\n    this.root.source = { input, start: { line: 1, column: 1 } }\n  }\n\n  createTokenizer () {\n    this.tokenizer = tokenizer(this.input)\n  }\n\n  parse () {\n    let token\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n\n      switch (token[0]) {\n        case 'space':\n          this.spaces += token[1]\n          break\n\n        case ';':\n          this.freeSemicolon(token)\n          break\n\n        case '}':\n          this.end(token)\n          break\n\n        case 'comment':\n          this.comment(token)\n          break\n\n        case 'at-word':\n          this.atrule(token)\n          break\n\n        case '{':\n          this.emptyRule(token)\n          break\n\n        default:\n          this.other(token)\n          break\n      }\n    }\n    this.endFile()\n  }\n\n  comment (token) {\n    let node = new Comment()\n    this.init(node, token[2], token[3])\n    node.source.end = { line: token[4], column: token[5] }\n\n    let text = token[1].slice(2, -2)\n    if (/^\\s*$/.test(text)) {\n      node.text = ''\n      node.raws.left = text\n      node.raws.right = ''\n    } else {\n      let match = text.match(/^(\\s*)([^]*[^\\s])(\\s*)$/)\n      node.text = match[2]\n      node.raws.left = match[1]\n      node.raws.right = match[3]\n    }\n  }\n\n  emptyRule (token) {\n    let node = new Rule()\n    this.init(node, token[2], token[3])\n    node.selector = ''\n    node.raws.between = ''\n    this.current = node\n  }\n\n  other (start) {\n    let end = false\n    let type = null\n    let colon = false\n    let bracket = null\n    let brackets = []\n\n    let tokens = []\n    let token = start\n    while (token) {\n      type = token[0]\n      tokens.push(token)\n\n      if (type === '(' || type === '[') {\n        if (!bracket) bracket = token\n        brackets.push(type === '(' ? ')' : ']')\n      } else if (brackets.length === 0) {\n        if (type === ';') {\n          if (colon) {\n            this.decl(tokens)\n            return\n          } else {\n            break\n          }\n        } else if (type === '{') {\n          this.rule(tokens)\n          return\n        } else if (type === '}') {\n          this.tokenizer.back(tokens.pop())\n          end = true\n          break\n        } else if (type === ':') {\n          colon = true\n        }\n      } else if (type === brackets[brackets.length - 1]) {\n        brackets.pop()\n        if (brackets.length === 0) bracket = null\n      }\n\n      token = this.tokenizer.nextToken()\n    }\n\n    if (this.tokenizer.endOfFile()) end = true\n    if (brackets.length > 0) this.unclosedBracket(bracket)\n\n    if (end && colon) {\n      while (tokens.length) {\n        token = tokens[tokens.length - 1][0]\n        if (token !== 'space' && token !== 'comment') break\n        this.tokenizer.back(tokens.pop())\n      }\n      this.decl(tokens)\n    } else {\n      this.unknownWord(tokens)\n    }\n  }\n\n  rule (tokens) {\n    tokens.pop()\n\n    let node = new Rule()\n    this.init(node, tokens[0][2], tokens[0][3])\n\n    node.raws.between = this.spacesAndCommentsFromEnd(tokens)\n    this.raw(node, 'selector', tokens)\n    this.current = node\n  }\n\n  decl (tokens) {\n    let node = new Declaration()\n    this.init(node)\n\n    let last = tokens[tokens.length - 1]\n    if (last[0] === ';') {\n      this.semicolon = true\n      tokens.pop()\n    }\n    if (last[4]) {\n      node.source.end = { line: last[4], column: last[5] }\n    } else {\n      node.source.end = { line: last[2], column: last[3] }\n    }\n\n    while (tokens[0][0] !== 'word') {\n      if (tokens.length === 1) this.unknownWord(tokens)\n      node.raws.before += tokens.shift()[1]\n    }\n    node.source.start = { line: tokens[0][2], column: tokens[0][3] }\n\n    node.prop = ''\n    while (tokens.length) {\n      let type = tokens[0][0]\n      if (type === ':' || type === 'space' || type === 'comment') {\n        break\n      }\n      node.prop += tokens.shift()[1]\n    }\n\n    node.raws.between = ''\n\n    let token\n    while (tokens.length) {\n      token = tokens.shift()\n\n      if (token[0] === ':') {\n        node.raws.between += token[1]\n        break\n      } else {\n        if (token[0] === 'word' && /\\w/.test(token[1])) {\n          this.unknownWord([token])\n        }\n        node.raws.between += token[1]\n      }\n    }\n\n    if (node.prop[0] === '_' || node.prop[0] === '*') {\n      node.raws.before += node.prop[0]\n      node.prop = node.prop.slice(1)\n    }\n    node.raws.between += this.spacesAndCommentsFromStart(tokens)\n    this.precheckMissedSemicolon(tokens)\n\n    for (let i = tokens.length - 1; i > 0; i--) {\n      token = tokens[i]\n      if (token[1].toLowerCase() === '!important') {\n        node.important = true\n        let string = this.stringFrom(tokens, i)\n        string = this.spacesFromEnd(tokens) + string\n        if (string !== ' !important') node.raws.important = string\n        break\n      } else if (token[1].toLowerCase() === 'important') {\n        let cache = tokens.slice(0)\n        let str = ''\n        for (let j = i; j > 0; j--) {\n          let type = cache[j][0]\n          if (str.trim().indexOf('!') === 0 && type !== 'space') {\n            break\n          }\n          str = cache.pop()[1] + str\n        }\n        if (str.trim().indexOf('!') === 0) {\n          node.important = true\n          node.raws.important = str\n          tokens = cache\n        }\n      }\n\n      if (token[0] !== 'space' && token[0] !== 'comment') {\n        break\n      }\n    }\n\n    this.raw(node, 'value', tokens)\n\n    if (node.value.indexOf(':') !== -1) this.checkMissedSemicolon(tokens)\n  }\n\n  atrule (token) {\n    let node = new AtRule()\n    node.name = token[1].slice(1)\n    if (node.name === '') {\n      this.unnamedAtrule(node, token)\n    }\n    this.init(node, token[2], token[3])\n\n    let prev\n    let shift\n    let last = false\n    let open = false\n    let params = []\n\n    while (!this.tokenizer.endOfFile()) {\n      token = this.tokenizer.nextToken()\n\n      if (token[0] === ';') {\n        node.source.end = { line: token[2], column: token[3] }\n        this.semicolon = true\n        break\n      } else if (token[0] === '{') {\n        open = true\n        break\n      } else if (token[0] === '}') {\n        if (params.length > 0) {\n          shift = params.length - 1\n          prev = params[shift]\n          while (prev && prev[0] === 'space') {\n            prev = params[--shift]\n          }\n          if (prev) {\n            node.source.end = { line: prev[4], column: prev[5] }\n          }\n        }\n        this.end(token)\n        break\n      } else {\n        params.push(token)\n      }\n\n      if (this.tokenizer.endOfFile()) {\n        last = true\n        break\n      }\n    }\n\n    node.raws.between = this.spacesAndCommentsFromEnd(params)\n    if (params.length) {\n      node.raws.afterName = this.spacesAndCommentsFromStart(params)\n      this.raw(node, 'params', params)\n      if (last) {\n        token = params[params.length - 1]\n        node.source.end = { line: token[4], column: token[5] }\n        this.spaces = node.raws.between\n        node.raws.between = ''\n      }\n    } else {\n      node.raws.afterName = ''\n      node.params = ''\n    }\n\n    if (open) {\n      node.nodes = []\n      this.current = node\n    }\n  }\n\n  end (token) {\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.semicolon = false\n\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n    this.spaces = ''\n\n    if (this.current.parent) {\n      this.current.source.end = { line: token[2], column: token[3] }\n      this.current = this.current.parent\n    } else {\n      this.unexpectedClose(token)\n    }\n  }\n\n  endFile () {\n    if (this.current.parent) this.unclosedBlock()\n    if (this.current.nodes && this.current.nodes.length) {\n      this.current.raws.semicolon = this.semicolon\n    }\n    this.current.raws.after = (this.current.raws.after || '') + this.spaces\n  }\n\n  freeSemicolon (token) {\n    this.spaces += token[1]\n    if (this.current.nodes) {\n      let prev = this.current.nodes[this.current.nodes.length - 1]\n      if (prev && prev.type === 'rule' && !prev.raws.ownSemicolon) {\n        prev.raws.ownSemicolon = this.spaces\n        this.spaces = ''\n      }\n    }\n  }\n\n  // Helpers\n\n  init (node, line, column) {\n    this.current.push(node)\n\n    node.source = { start: { line, column }, input: this.input }\n    node.raws.before = this.spaces\n    this.spaces = ''\n    if (node.type !== 'comment') this.semicolon = false\n  }\n\n  raw (node, prop, tokens) {\n    let token, type\n    let length = tokens.length\n    let value = ''\n    let clean = true\n    let next, prev\n    let pattern = /^([.|#])?([\\w])+/i\n\n    for (let i = 0; i < length; i += 1) {\n      token = tokens[i]\n      type = token[0]\n\n      if (type === 'comment' && node.type === 'rule') {\n        prev = tokens[i - 1]\n        next = tokens[i + 1]\n\n        if (\n          prev[0] !== 'space' &&\n          next[0] !== 'space' &&\n          pattern.test(prev[1]) &&\n          pattern.test(next[1])\n        ) {\n          value += token[1]\n        } else {\n          clean = false\n        }\n\n        continue\n      }\n\n      if (type === 'comment' || (type === 'space' && i === length - 1)) {\n        clean = false\n      } else {\n        value += token[1]\n      }\n    }\n    if (!clean) {\n      let raw = tokens.reduce((all, i) => all + i[1], '')\n      node.raws[prop] = { value, raw }\n    }\n    node[prop] = value\n  }\n\n  spacesAndCommentsFromEnd (tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space' && lastTokenType !== 'comment') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  spacesAndCommentsFromStart (tokens) {\n    let next\n    let spaces = ''\n    while (tokens.length) {\n      next = tokens[0][0]\n      if (next !== 'space' && next !== 'comment') break\n      spaces += tokens.shift()[1]\n    }\n    return spaces\n  }\n\n  spacesFromEnd (tokens) {\n    let lastTokenType\n    let spaces = ''\n    while (tokens.length) {\n      lastTokenType = tokens[tokens.length - 1][0]\n      if (lastTokenType !== 'space') break\n      spaces = tokens.pop()[1] + spaces\n    }\n    return spaces\n  }\n\n  stringFrom (tokens, from) {\n    let result = ''\n    for (let i = from; i < tokens.length; i++) {\n      result += tokens[i][1]\n    }\n    tokens.splice(from, tokens.length - from)\n    return result\n  }\n\n  colon (tokens) {\n    let brackets = 0\n    let token, type, prev\n    for (let i = 0; i < tokens.length; i++) {\n      token = tokens[i]\n      type = token[0]\n\n      if (type === '(') {\n        brackets += 1\n      }\n      if (type === ')') {\n        brackets -= 1\n      }\n      if (brackets === 0 && type === ':') {\n        if (!prev) {\n          this.doubleColon(token)\n        } else if (prev[0] === 'word' && prev[1] === 'progid') {\n          continue\n        } else {\n          return i\n        }\n      }\n\n      prev = token\n    }\n    return false\n  }\n\n  // Errors\n\n  unclosedBracket (bracket) {\n    throw this.input.error('Unclosed bracket', bracket[2], bracket[3])\n  }\n\n  unknownWord (tokens) {\n    throw this.input.error('Unknown word', tokens[0][2], tokens[0][3])\n  }\n\n  unexpectedClose (token) {\n    throw this.input.error('Unexpected }', token[2], token[3])\n  }\n\n  unclosedBlock () {\n    let pos = this.current.source.start\n    throw this.input.error('Unclosed block', pos.line, pos.column)\n  }\n\n  doubleColon (token) {\n    throw this.input.error('Double colon', token[2], token[3])\n  }\n\n  unnamedAtrule (node, token) {\n    throw this.input.error('At-rule without name', token[2], token[3])\n  }\n\n  precheckMissedSemicolon (/* tokens */) {\n    // Hook for Safe Parser\n  }\n\n  checkMissedSemicolon (tokens) {\n    let colon = this.colon(tokens)\n    if (colon === false) return\n\n    let founded = 0\n    let token\n    for (let j = colon - 1; j >= 0; j--) {\n      token = tokens[j]\n      if (token[0] !== 'space') {\n        founded += 1\n        if (founded === 2) break\n      }\n    }\n    throw this.input.error('Missed semicolon', token[2], token[3])\n  }\n}\n",
    "import Declaration from './declaration'\nimport Processor from './processor'\nimport stringify from './stringify'\nimport Comment from './comment'\nimport AtRule from './at-rule'\nimport vendor from './vendor'\nimport parse from './parse'\nimport list from './list'\nimport Rule from './rule'\nimport Root from './root'\n\n/**\n * Create a new {@link Processor} instance that will apply `plugins`\n * as CSS processors.\n *\n * @param {Array.<Plugin|pluginFunction>|Processor} plugins PostCSS plugins.\n *        See {@link Processor#use} for plugin format.\n *\n * @return {Processor} Processor to process multiple CSS.\n *\n * @example\n * import postcss from 'postcss'\n *\n * postcss(plugins).process(css, { from, to }).then(result => {\n *   console.log(result.css)\n * })\n *\n * @namespace postcss\n */\nfunction postcss (...plugins) {\n  if (plugins.length === 1 && Array.isArray(plugins[0])) {\n    plugins = plugins[0]\n  }\n  return new Processor(plugins)\n}\n\n/**\n * Creates a PostCSS plugin with a standard API.\n *\n * The newly-wrapped function will provide both the name and PostCSS\n * version of the plugin.\n *\n * ```js\n * const processor = postcss([replace])\n * processor.plugins[0].postcssPlugin  //=> 'postcss-replace'\n * processor.plugins[0].postcssVersion //=> '6.0.0'\n * ```\n *\n * The plugin function receives 2 arguments: {@link Root}\n * and {@link Result} instance. The function should mutate the provided\n * `Root` node. Alternatively, you can create a new `Root` node\n * and override the `result.root` property.\n *\n * ```js\n * const cleaner = postcss.plugin('postcss-cleaner', () => {\n *   return (root, result) => {\n *     result.root = postcss.root()\n *   }\n * })\n * ```\n *\n * As a convenience, plugins also expose a `process` method so that you can use\n * them as standalone tools.\n *\n * ```js\n * cleaner.process(css, processOpts, pluginOpts)\n * // This is equivalent to:\n * postcss([ cleaner(pluginOpts) ]).process(css, processOpts)\n * ```\n *\n * Asynchronous plugins should return a `Promise` instance.\n *\n * ```js\n * postcss.plugin('postcss-import', () => {\n *   return (root, result) => {\n *     return new Promise( (resolve, reject) => {\n *       fs.readFile('base.css', (base) => {\n *         root.prepend(base)\n *         resolve()\n *       })\n *     })\n *   }\n * })\n * ```\n *\n * Add warnings using the {@link Node#warn} method.\n * Send data to other plugins using the {@link Result#messages} array.\n *\n * ```js\n * postcss.plugin('postcss-caniuse-test', () => {\n *   return (root, result) => {\n *     root.walkDecls(decl => {\n *       if (!caniuse.support(decl.prop)) {\n *         decl.warn(result, 'Some browsers do not support ' + decl.prop)\n *       }\n *     })\n *   }\n * })\n * ```\n *\n * @param {string} name          PostCSS plugin name. Same as in `name`\n *                               property in `package.json`. It will be saved\n *                               in `plugin.postcssPlugin` property.\n * @param {function} initializer Will receive plugin options\n *                               and should return {@link pluginFunction}\n *\n * @return {Plugin} PostCSS plugin.\n */\npostcss.plugin = function plugin (name, initializer) {\n  function creator (...args) {\n    let transformer = initializer(...args)\n    transformer.postcssPlugin = name\n    transformer.postcssVersion = (new Processor()).version\n    return transformer\n  }\n\n  let cache\n  Object.defineProperty(creator, 'postcss', {\n    get () {\n      if (!cache) cache = creator()\n      return cache\n    }\n  })\n\n  creator.process = function (css, processOpts, pluginOpts) {\n    return postcss([creator(pluginOpts)]).process(css, processOpts)\n  }\n\n  return creator\n}\n\n/**\n * Default function to convert a node tree into a CSS string.\n *\n * @param {Node} node       Start node for stringifing. Usually {@link Root}.\n * @param {builder} builder Function to concatenate CSS from nodes parts\n *                          or generate string and source map.\n *\n * @return {void}\n *\n * @function\n */\npostcss.stringify = stringify\n\n/**\n * Parses source css and returns a new {@link Root} node,\n * which contains the source CSS nodes.\n *\n * @param {string|toString} css   String with input CSS or any object\n *                                with toString() method, like a Buffer\n * @param {processOptions} [opts] Options with only `from` and `map` keys.\n *\n * @return {Root} PostCSS AST.\n *\n * @example\n * // Simple CSS concatenation with source map support\n * const root1 = postcss.parse(css1, { from: file1 })\n * const root2 = postcss.parse(css2, { from: file2 })\n * root1.append(root2).toResult().css\n *\n * @function\n */\npostcss.parse = parse\n\n/**\n * Contains the {@link vendor} module.\n *\n * @type {vendor}\n *\n * @example\n * postcss.vendor.unprefixed('-moz-tab') //=> ['tab']\n */\npostcss.vendor = vendor\n\n/**\n * Contains the {@link list} module.\n *\n * @member {list}\n *\n * @example\n * postcss.list.space('5px calc(10% + 5px)') //=> ['5px', 'calc(10% + 5px)']\n */\npostcss.list = list\n\n/**\n * Creates a new {@link Comment} node.\n *\n * @param {object} [defaults] Properties for the new node.\n *\n * @return {Comment} New comment node\n *\n * @example\n * postcss.comment({ text: 'test' })\n */\npostcss.comment = defaults => new Comment(defaults)\n\n/**\n * Creates a new {@link AtRule} node.\n *\n * @param {object} [defaults] Properties for the new node.\n *\n * @return {AtRule} new at-rule node\n *\n * @example\n * postcss.atRule({ name: 'charset' }).toString() //=> \"@charset\"\n */\npostcss.atRule = defaults => new AtRule(defaults)\n\n/**\n * Creates a new {@link Declaration} node.\n *\n * @param {object} [defaults] Properties for the new node.\n *\n * @return {Declaration} new declaration node\n *\n * @example\n * postcss.decl({ prop: 'color', value: 'red' }).toString() //=> \"color: red\"\n */\npostcss.decl = defaults => new Declaration(defaults)\n\n/**\n * Creates a new {@link Rule} node.\n *\n * @param {object} [defaults] Properties for the new node.\n *\n * @return {Rule} new rule node\n *\n * @example\n * postcss.rule({ selector: 'a' }).toString() //=> \"a {\\n}\"\n */\npostcss.rule = defaults => new Rule(defaults)\n\n/**\n * Creates a new {@link Root} node.\n *\n * @param {object} [defaults] Properties for the new node.\n *\n * @return {Root} new root node.\n *\n * @example\n * postcss.root({ after: '\\n' }).toString() //=> \"\\n\"\n */\npostcss.root = defaults => new Root(defaults)\n\nexport default postcss\n",
    "import mozilla from 'source-map'\nimport path from 'path'\nimport fs from 'fs'\n\nfunction fromBase64 (str) {\n  if (Buffer) {\n    return Buffer.from(str, 'base64').toString()\n  } else {\n    return window.atob(str)\n  }\n}\n\n/**\n * Source map information from input CSS.\n * For example, source map after Sass compiler.\n *\n * This class will automatically find source map in input CSS or in file system\n * near input file (according `from` option).\n *\n * @example\n * const root = postcss.parse(css, { from: 'a.sass.css' })\n * root.input.map //=> PreviousMap\n */\nclass PreviousMap {\n  /**\n   * @param {string}         css    Input CSS source.\n   * @param {processOptions} [opts] {@link Processor#process} options.\n   */\n  constructor (css, opts) {\n    this.loadAnnotation(css)\n    /**\n     * Was source map inlined by data-uri to input CSS.\n     *\n     * @type {boolean}\n     */\n    this.inline = this.startWith(this.annotation, 'data:')\n\n    let prev = opts.map ? opts.map.prev : undefined\n    let text = this.loadMap(opts.from, prev)\n    if (text) this.text = text\n  }\n\n  /**\n   * Create a instance of `SourceMapGenerator` class\n   * from the `source-map` library to work with source map information.\n   *\n   * It is lazy method, so it will create object only on first call\n   * and then it will use cache.\n   *\n   * @return {SourceMapGenerator} Object with source map information.\n   */\n  consumer () {\n    if (!this.consumerCache) {\n      this.consumerCache = new mozilla.SourceMapConsumer(this.text)\n    }\n    return this.consumerCache\n  }\n\n  /**\n   * Does source map contains `sourcesContent` with input source text.\n   *\n   * @return {boolean} Is `sourcesContent` present.\n   */\n  withContent () {\n    return !!(this.consumer().sourcesContent &&\n              this.consumer().sourcesContent.length > 0)\n  }\n\n  startWith (string, start) {\n    if (!string) return false\n    return string.substr(0, start.length) === start\n  }\n\n  getAnnotationURL (sourceMapString) {\n    return sourceMapString\n      .match(/\\/\\*\\s*# sourceMappingURL=((?:(?!sourceMappingURL=).)*)\\*\\//)[1]\n      .trim()\n  }\n\n  loadAnnotation (css) {\n    let annotations = css.match(\n      /\\/\\*\\s*# sourceMappingURL=(?:(?!sourceMappingURL=).)*\\*\\//gm\n    )\n\n    if (annotations && annotations.length > 0) {\n      // Locate the last sourceMappingURL to avoid picking up\n      // sourceMappingURLs from comments, strings, etc.\n      let lastAnnotation = annotations[annotations.length - 1]\n      if (lastAnnotation) {\n        this.annotation = this.getAnnotationURL(lastAnnotation)\n      }\n    }\n  }\n\n  decodeInline (text) {\n    let baseCharsetUri = /^data:application\\/json;charset=utf-?8;base64,/\n    let baseUri = /^data:application\\/json;base64,/\n    let uri = 'data:application/json,'\n\n    if (this.startWith(text, uri)) {\n      return decodeURIComponent(text.substr(uri.length))\n    }\n\n    if (baseCharsetUri.test(text) || baseUri.test(text)) {\n      return fromBase64(text.substr(RegExp.lastMatch.length))\n    }\n\n    let encoding = text.match(/data:application\\/json;([^,]+),/)[1]\n    throw new Error('Unsupported source map encoding ' + encoding)\n  }\n\n  loadMap (file, prev) {\n    if (prev === false) return false\n\n    if (prev) {\n      if (typeof prev === 'string') {\n        return prev\n      } else if (typeof prev === 'function') {\n        let prevPath = prev(file)\n        if (prevPath && fs.existsSync && fs.existsSync(prevPath)) {\n          return fs.readFileSync(prevPath, 'utf-8').toString().trim()\n        } else {\n          throw new Error(\n            'Unable to load previous source map: ' + prevPath.toString())\n        }\n      } else if (prev instanceof mozilla.SourceMapConsumer) {\n        return mozilla.SourceMapGenerator.fromSourceMap(prev).toString()\n      } else if (prev instanceof mozilla.SourceMapGenerator) {\n        return prev.toString()\n      } else if (this.isMap(prev)) {\n        return JSON.stringify(prev)\n      } else {\n        throw new Error(\n          'Unsupported previous source map format: ' + prev.toString())\n      }\n    } else if (this.inline) {\n      return this.decodeInline(this.annotation)\n    } else if (this.annotation) {\n      let map = this.annotation\n      if (file) map = path.join(path.dirname(file), map)\n\n      this.root = path.dirname(map)\n      if (fs.existsSync && fs.existsSync(map)) {\n        return fs.readFileSync(map, 'utf-8').toString().trim()\n      } else {\n        return false\n      }\n    }\n  }\n\n  isMap (map) {\n    if (typeof map !== 'object') return false\n    return typeof map.mappings === 'string' || typeof map._mappings === 'string'\n  }\n}\n\nexport default PreviousMap\n",
    "import LazyResult from './lazy-result'\n\n/**\n * Contains plugins to process CSS. Create one `Processor` instance,\n * initialize its plugins, and then use that instance on numerous CSS files.\n *\n * @example\n * const processor = postcss([autoprefixer, precss])\n * processor.process(css1).then(result => console.log(result.css))\n * processor.process(css2).then(result => console.log(result.css))\n */\nclass Processor {\n  /**\n   * @param {Array.<Plugin|pluginFunction>|Processor} plugins PostCSS plugins.\n   *        See {@link Processor#use} for plugin format.\n   */\n  constructor (plugins = []) {\n    /**\n     * Current PostCSS version.\n     *\n     * @type {string}\n     *\n     * @example\n     * if (result.processor.version.split('.')[0] !== '6') {\n     *   throw new Error('This plugin works only with PostCSS 6')\n     * }\n     */\n    this.version = '7.0.36'\n    /**\n     * Plugins added to this processor.\n     *\n     * @type {pluginFunction[]}\n     *\n     * @example\n     * const processor = postcss([autoprefixer, precss])\n     * processor.plugins.length //=> 2\n     */\n    this.plugins = this.normalize(plugins)\n  }\n\n  /**\n   * Adds a plugin to be used as a CSS processor.\n   *\n   * PostCSS plugin can be in 4 formats:\n   * * A plugin created by {@link postcss.plugin} method.\n   * * A function. PostCSS will pass the function a @{link Root}\n   *   as the first argument and current {@link Result} instance\n   *   as the second.\n   * * An object with a `postcss` method. PostCSS will use that method\n   *   as described in #2.\n   * * Another {@link Processor} instance. PostCSS will copy plugins\n   *   from that instance into this one.\n   *\n   * Plugins can also be added by passing them as arguments when creating\n   * a `postcss` instance (see [`postcss(plugins)`]).\n   *\n   * Asynchronous plugins should return a `Promise` instance.\n   *\n   * @param {Plugin|pluginFunction|Processor} plugin PostCSS plugin\n   *                                                 or {@link Processor}\n   *                                                 with plugins.\n   *\n   * @example\n   * const processor = postcss()\n   *   .use(autoprefixer)\n   *   .use(precss)\n   *\n   * @return {Processes} Current processor to make methods chain.\n   */\n  use (plugin) {\n    this.plugins = this.plugins.concat(this.normalize([plugin]))\n    return this\n  }\n\n  /**\n   * Parses source CSS and returns a {@link LazyResult} Promise proxy.\n   * Because some plugins can be asynchronous it doesnt make\n   * any transformations. Transformations will be applied\n   * in the {@link LazyResult} methods.\n   *\n   * @param {string|toString|Result} css String with input CSS or any object\n   *                                     with a `toString()` method,\n   *                                     like a Buffer. Optionally, send\n   *                                     a {@link Result} instance\n   *                                     and the processor will take\n   *                                     the {@link Root} from it.\n   * @param {processOptions} [opts]      Options.\n   *\n   * @return {LazyResult} Promise proxy.\n   *\n   * @example\n   * processor.process(css, { from: 'a.css', to: 'a.out.css' })\n   *   .then(result => {\n   *      console.log(result.css)\n   *   })\n   */\n  process (css, opts = { }) {\n    if (this.plugins.length === 0 && opts.parser === opts.stringifier) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (typeof console !== 'undefined' && console.warn) {\n          console.warn(\n            'You did not set any plugins, parser, or stringifier. ' +\n            'Right now, PostCSS does nothing. Pick plugins for your case ' +\n            'on https://www.postcss.parts/ and use them in postcss.config.js.'\n          )\n        }\n      }\n    }\n    return new LazyResult(this, css, opts)\n  }\n\n  normalize (plugins) {\n    let normalized = []\n    for (let i of plugins) {\n      if (i.postcss === true) {\n        let plugin = i()\n        throw new Error(\n          'PostCSS plugin ' + plugin.postcssPlugin + ' requires PostCSS 8.\\n' +\n          'Migration guide for end-users:\\n' +\n          'https://github.com/postcss/postcss/wiki/PostCSS-8-for-end-users'\n        )\n      }\n\n      if (i.postcss) i = i.postcss\n\n      if (typeof i === 'object' && Array.isArray(i.plugins)) {\n        normalized = normalized.concat(i.plugins)\n      } else if (typeof i === 'function') {\n        normalized.push(i)\n      } else if (typeof i === 'object' && (i.parse || i.stringify)) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            'PostCSS syntaxes cannot be used as plugins. Instead, please use ' +\n            'one of the syntax/parser/stringifier options as outlined ' +\n            'in your PostCSS runner documentation.'\n          )\n        }\n      } else if (typeof i === 'object' && i.postcssPlugin) {\n        throw new Error(\n          'PostCSS plugin ' + i.postcssPlugin + ' requires PostCSS 8.\\n' +\n          'Migration guide for end-users:\\n' +\n          'https://github.com/postcss/postcss/wiki/PostCSS-8-for-end-users'\n        )\n      } else {\n        throw new Error(i + ' is not a PostCSS plugin')\n      }\n    }\n    return normalized\n  }\n}\n\nexport default Processor\n\n/**\n * @callback builder\n * @param {string} part          Part of generated CSS connected to this node.\n * @param {Node}   node          AST node.\n * @param {\"start\"|\"end\"} [type] Nodes part type.\n */\n\n/**\n * @callback parser\n *\n * @param {string|toString} css   String with input CSS or any object\n *                                with toString() method, like a Buffer.\n * @param {processOptions} [opts] Options with only `from` and `map` keys.\n *\n * @return {Root} PostCSS AST\n */\n\n/**\n * @callback stringifier\n *\n * @param {Node} node       Start node for stringifing. Usually {@link Root}.\n * @param {builder} builder Function to concatenate CSS from nodes parts\n *                          or generate string and source map.\n *\n * @return {void}\n */\n\n/**\n * @typedef {object} syntax\n * @property {parser} parse          Function to generate AST by string.\n * @property {stringifier} stringify Function to generate string by AST.\n */\n\n/**\n * @typedef {object} toString\n * @property {function} toString\n */\n\n/**\n * @callback pluginFunction\n * @param {Root} root     Parsed input CSS.\n * @param {Result} result Result to set warnings or check other plugins.\n */\n\n/**\n * @typedef {object} Plugin\n * @property {function} postcss PostCSS plugin function.\n */\n\n/**\n * @typedef {object} processOptions\n * @property {string} from             The path of the CSS source file.\n *                                     You should always set `from`,\n *                                     because it is used in source map\n *                                     generation and syntax error messages.\n * @property {string} to               The path where youll put the output\n *                                     CSS file. You should always set `to`\n *                                     to generate correct source maps.\n * @property {parser} parser           Function to generate AST by string.\n * @property {stringifier} stringifier Class to generate string by AST.\n * @property {syntax} syntax           Object with `parse` and `stringify`.\n * @property {object} map              Source map options.\n * @property {boolean} map.inline                    Does source map should\n *                                                   be embedded in the output\n *                                                   CSS as a base64-encoded\n *                                                   comment.\n * @property {string|object|false|function} map.prev Source map content\n *                                                   from a previous\n *                                                   processing step\n *                                                   (for example, Sass).\n *                                                   PostCSS will try to find\n *                                                   previous map automatically,\n *                                                   so you could disable it by\n *                                                   `false` value.\n * @property {boolean} map.sourcesContent            Does PostCSS should set\n *                                                   the origin content to map.\n * @property {string|false} map.annotation           Does PostCSS should set\n *                                                   annotation comment to map.\n * @property {string} map.from                       Override `from` in maps\n *                                                   sources`.\n */\n",
    "import Warning from './warning'\n\n/**\n * Provides the result of the PostCSS transformations.\n *\n * A Result instance is returned by {@link LazyResult#then}\n * or {@link Root#toResult} methods.\n *\n * @example\n * postcss([autoprefixer]).process(css).then(result => {\n *  console.log(result.css)\n * })\n *\n * @example\n * const result2 = postcss.parse(css).toResult()\n */\nclass Result {\n  /**\n   * @param {Processor} processor Processor used for this transformation.\n   * @param {Root}      root      Root node after all transformations.\n   * @param {processOptions} opts Options from the {@link Processor#process}\n   *                              or {@link Root#toResult}.\n   */\n  constructor (processor, root, opts) {\n    /**\n     * The Processor instance used for this transformation.\n     *\n     * @type {Processor}\n     *\n     * @example\n     * for (const plugin of result.processor.plugins) {\n     *   if (plugin.postcssPlugin === 'postcss-bad') {\n     *     throw 'postcss-good is incompatible with postcss-bad'\n     *   }\n     * })\n     */\n    this.processor = processor\n    /**\n     * Contains messages from plugins (e.g., warnings or custom messages).\n     * Each message should have type and plugin properties.\n     *\n     * @type {Message[]}\n     *\n     * @example\n     * postcss.plugin('postcss-min-browser', () => {\n     *   return (root, result) => {\n     *     const browsers = detectMinBrowsersByCanIUse(root)\n     *     result.messages.push({\n     *       type: 'min-browser',\n     *       plugin: 'postcss-min-browser',\n     *       browsers\n     *     })\n     *   }\n     * })\n     */\n    this.messages = []\n    /**\n     * Root node after all transformations.\n     *\n     * @type {Root}\n     *\n     * @example\n     * root.toResult().root === root\n     */\n    this.root = root\n    /**\n     * Options from the {@link Processor#process} or {@link Root#toResult} call\n     * that produced this Result instance.\n     *\n     * @type {processOptions}\n     *\n     * @example\n     * root.toResult(opts).opts === opts\n     */\n    this.opts = opts\n    /**\n     * A CSS string representing of {@link Result#root}.\n     *\n     * @type {string}\n     *\n     * @example\n     * postcss.parse('a{}').toResult().css //=> \"a{}\"\n     */\n    this.css = undefined\n    /**\n     * An instance of `SourceMapGenerator` class from the `source-map` library,\n     * representing changes to the {@link Result#root} instance.\n     *\n     * @type {SourceMapGenerator}\n     *\n     * @example\n     * result.map.toJSON() //=> { version: 3, file: 'a.css',  }\n     *\n     * @example\n     * if (result.map) {\n     *   fs.writeFileSync(result.opts.to + '.map', result.map.toString())\n     * }\n     */\n    this.map = undefined\n  }\n\n  /**\n   * Returns for @{link Result#css} content.\n   *\n   * @example\n   * result + '' === result.css\n   *\n   * @return {string} String representing of {@link Result#root}.\n   */\n  toString () {\n    return this.css\n  }\n\n  /**\n   * Creates an instance of {@link Warning} and adds it\n   * to {@link Result#messages}.\n   *\n   * @param {string} text        Warning message.\n   * @param {Object} [opts]      Warning options.\n   * @param {Node}   opts.node   CSS node that caused the warning.\n   * @param {string} opts.word   Word in CSS source that caused the warning.\n   * @param {number} opts.index  Index in CSS node string that caused\n   *                             the warning.\n   * @param {string} opts.plugin Name of the plugin that created\n   *                             this warning. {@link Result#warn} fills\n   *                             this property automatically.\n   *\n   * @return {Warning} Created warning.\n   */\n  warn (text, opts = { }) {\n    if (!opts.plugin) {\n      if (this.lastPlugin && this.lastPlugin.postcssPlugin) {\n        opts.plugin = this.lastPlugin.postcssPlugin\n      }\n    }\n\n    let warning = new Warning(text, opts)\n    this.messages.push(warning)\n\n    return warning\n  }\n\n  /**\n     * Returns warnings from plugins. Filters {@link Warning} instances\n     * from {@link Result#messages}.\n     *\n     * @example\n     * result.warnings().forEach(warn => {\n     *   console.warn(warn.toString())\n     * })\n     *\n     * @return {Warning[]} Warnings from plugins.\n     */\n  warnings () {\n    return this.messages.filter(i => i.type === 'warning')\n  }\n\n  /**\n   * An alias for the {@link Result#css} property.\n   * Use it with syntaxes that generate non-CSS output.\n   *\n   * @type {string}\n   *\n   * @example\n   * result.css === result.content\n   */\n  get content () {\n    return this.css\n  }\n}\n\nexport default Result\n\n/**\n * @typedef  {object} Message\n * @property {string} type   Message type.\n * @property {string} plugin Source PostCSS plugin name.\n */\n",
    "import Container from './container'\n\n/**\n * Represents a CSS file and contains all its parsed nodes.\n *\n * @extends Container\n *\n * @example\n * const root = postcss.parse('a{color:black} b{z-index:2}')\n * root.type         //=> 'root'\n * root.nodes.length //=> 2\n */\nclass Root extends Container {\n  constructor (defaults) {\n    super(defaults)\n    this.type = 'root'\n    if (!this.nodes) this.nodes = []\n  }\n\n  removeChild (child, ignore) {\n    let index = this.index(child)\n\n    if (!ignore && index === 0 && this.nodes.length > 1) {\n      this.nodes[1].raws.before = this.nodes[index].raws.before\n    }\n\n    return super.removeChild(child)\n  }\n\n  normalize (child, sample, type) {\n    let nodes = super.normalize(child)\n\n    if (sample) {\n      if (type === 'prepend') {\n        if (this.nodes.length > 1) {\n          sample.raws.before = this.nodes[1].raws.before\n        } else {\n          delete sample.raws.before\n        }\n      } else if (this.first !== sample) {\n        for (let node of nodes) {\n          node.raws.before = sample.raws.before\n        }\n      }\n    }\n\n    return nodes\n  }\n\n  /**\n   * Returns a {@link Result} instance representing the roots CSS.\n   *\n   * @param {processOptions} [opts] Options with only `to` and `map` keys.\n   *\n   * @return {Result} Result with current roots CSS.\n   *\n   * @example\n   * const root1 = postcss.parse(css1, { from: 'a.css' })\n   * const root2 = postcss.parse(css2, { from: 'b.css' })\n   * root1.append(root2)\n   * const result = root1.toResult({ to: 'all.css', map: true })\n   */\n  toResult (opts = { }) {\n    let LazyResult = require('./lazy-result')\n    let Processor = require('./processor')\n\n    let lazy = new LazyResult(new Processor(), this, opts)\n    return lazy.stringify()\n  }\n\n  /**\n   * @memberof Root#\n   * @member {object} raws Information to generate byte-to-byte equal\n   *                       node string as it was in the origin input.\n   *\n   * Every parser saves its own properties,\n   * but the default CSS parser uses:\n   *\n   * * `after`: the space symbols after the last child to the end of file.\n   * * `semicolon`: is the last child has an (optional) semicolon.\n   *\n   * @example\n   * postcss.parse('a {}\\n').raws //=> { after: '\\n' }\n   * postcss.parse('a {}').raws   //=> { after: '' }\n   */\n}\n\nexport default Root\n",
    "import Container from './container'\nimport list from './list'\n\n/**\n * Represents a CSS rule: a selector followed by a declaration block.\n *\n * @extends Container\n *\n * @example\n * const root = postcss.parse('a{}')\n * const rule = root.first\n * rule.type       //=> 'rule'\n * rule.toString() //=> 'a{}'\n */\nclass Rule extends Container {\n  constructor (defaults) {\n    super(defaults)\n    this.type = 'rule'\n    if (!this.nodes) this.nodes = []\n  }\n\n  /**\n   * An array containing the rules individual selectors.\n   * Groups of selectors are split at commas.\n   *\n   * @type {string[]}\n   *\n   * @example\n   * const root = postcss.parse('a, b { }')\n   * const rule = root.first\n   *\n   * rule.selector  //=> 'a, b'\n   * rule.selectors //=> ['a', 'b']\n   *\n   * rule.selectors = ['a', 'strong']\n   * rule.selector //=> 'a, strong'\n   */\n  get selectors () {\n    return list.comma(this.selector)\n  }\n\n  set selectors (values) {\n    let match = this.selector ? this.selector.match(/,\\s*/) : null\n    let sep = match ? match[0] : ',' + this.raw('between', 'beforeOpen')\n    this.selector = values.join(sep)\n  }\n\n  /**\n   * @memberof Rule#\n   * @member {string} selector The rules full selector represented\n   *                           as a string.\n   *\n   * @example\n   * const root = postcss.parse('a, b { }')\n   * const rule = root.first\n   * rule.selector //=> 'a, b'\n   */\n\n  /**\n   * @memberof Rule#\n   * @member {object} raws Information to generate byte-to-byte equal\n   *                       node string as it was in the origin input.\n   *\n   * Every parser saves its own properties,\n   * but the default CSS parser uses:\n   *\n   * * `before`: the space symbols before the node. It also stores `*`\n   *   and `_` symbols before the declaration (IE hack).\n   * * `after`: the space symbols after the last child of the node\n   *   to the end of the node.\n   * * `between`: the symbols between the property and value\n   *   for declarations, selector and `{` for rules, or last parameter\n   *   and `{` for at-rules.\n   * * `semicolon`: contains `true` if the last child has\n   *   an (optional) semicolon.\n   * * `ownSemicolon`: contains `true` if there is semicolon after rule.\n   *\n   * PostCSS cleans selectors from comments and extra spaces,\n   * but it stores origin content in raws properties.\n   * As such, if you dont change a declarations value,\n   * PostCSS will use the raw value with comments.\n   *\n   * @example\n   * const root = postcss.parse('a {\\n  color:black\\n}')\n   * root.first.first.raws //=> { before: '', between: ' ', after: '\\n' }\n   */\n}\n\nexport default Rule\n",
    "const DEFAULT_RAW = {\n  colon: ': ',\n  indent: '    ',\n  beforeDecl: '\\n',\n  beforeRule: '\\n',\n  beforeOpen: ' ',\n  beforeClose: '\\n',\n  beforeComment: '\\n',\n  after: '\\n',\n  emptyBody: '',\n  commentLeft: ' ',\n  commentRight: ' ',\n  semicolon: false\n}\n\nfunction capitalize (str) {\n  return str[0].toUpperCase() + str.slice(1)\n}\n\nclass Stringifier {\n  constructor (builder) {\n    this.builder = builder\n  }\n\n  stringify (node, semicolon) {\n    this[node.type](node, semicolon)\n  }\n\n  root (node) {\n    this.body(node)\n    if (node.raws.after) this.builder(node.raws.after)\n  }\n\n  comment (node) {\n    let left = this.raw(node, 'left', 'commentLeft')\n    let right = this.raw(node, 'right', 'commentRight')\n    this.builder('/*' + left + node.text + right + '*/', node)\n  }\n\n  decl (node, semicolon) {\n    let between = this.raw(node, 'between', 'colon')\n    let string = node.prop + between + this.rawValue(node, 'value')\n\n    if (node.important) {\n      string += node.raws.important || ' !important'\n    }\n\n    if (semicolon) string += ';'\n    this.builder(string, node)\n  }\n\n  rule (node) {\n    this.block(node, this.rawValue(node, 'selector'))\n    if (node.raws.ownSemicolon) {\n      this.builder(node.raws.ownSemicolon, node, 'end')\n    }\n  }\n\n  atrule (node, semicolon) {\n    let name = '@' + node.name\n    let params = node.params ? this.rawValue(node, 'params') : ''\n\n    if (typeof node.raws.afterName !== 'undefined') {\n      name += node.raws.afterName\n    } else if (params) {\n      name += ' '\n    }\n\n    if (node.nodes) {\n      this.block(node, name + params)\n    } else {\n      let end = (node.raws.between || '') + (semicolon ? ';' : '')\n      this.builder(name + params + end, node)\n    }\n  }\n\n  body (node) {\n    let last = node.nodes.length - 1\n    while (last > 0) {\n      if (node.nodes[last].type !== 'comment') break\n      last -= 1\n    }\n\n    let semicolon = this.raw(node, 'semicolon')\n    for (let i = 0; i < node.nodes.length; i++) {\n      let child = node.nodes[i]\n      let before = this.raw(child, 'before')\n      if (before) this.builder(before)\n      this.stringify(child, last !== i || semicolon)\n    }\n  }\n\n  block (node, start) {\n    let between = this.raw(node, 'between', 'beforeOpen')\n    this.builder(start + between + '{', node, 'start')\n\n    let after\n    if (node.nodes && node.nodes.length) {\n      this.body(node)\n      after = this.raw(node, 'after')\n    } else {\n      after = this.raw(node, 'after', 'emptyBody')\n    }\n\n    if (after) this.builder(after)\n    this.builder('}', node, 'end')\n  }\n\n  raw (node, own, detect) {\n    let value\n    if (!detect) detect = own\n\n    // Already had\n    if (own) {\n      value = node.raws[own]\n      if (typeof value !== 'undefined') return value\n    }\n\n    let parent = node.parent\n\n    // Hack for first rule in CSS\n    if (detect === 'before') {\n      if (!parent || (parent.type === 'root' && parent.first === node)) {\n        return ''\n      }\n    }\n\n    // Floating child without parent\n    if (!parent) return DEFAULT_RAW[detect]\n\n    // Detect style by other nodes\n    let root = node.root()\n    if (!root.rawCache) root.rawCache = { }\n    if (typeof root.rawCache[detect] !== 'undefined') {\n      return root.rawCache[detect]\n    }\n\n    if (detect === 'before' || detect === 'after') {\n      return this.beforeAfter(node, detect)\n    } else {\n      let method = 'raw' + capitalize(detect)\n      if (this[method]) {\n        value = this[method](root, node)\n      } else {\n        root.walk(i => {\n          value = i.raws[own]\n          if (typeof value !== 'undefined') return false\n        })\n      }\n    }\n\n    if (typeof value === 'undefined') value = DEFAULT_RAW[detect]\n\n    root.rawCache[detect] = value\n    return value\n  }\n\n  rawSemicolon (root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length && i.last.type === 'decl') {\n        value = i.raws.semicolon\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawEmptyBody (root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length === 0) {\n        value = i.raws.after\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawIndent (root) {\n    if (root.raws.indent) return root.raws.indent\n    let value\n    root.walk(i => {\n      let p = i.parent\n      if (p && p !== root && p.parent && p.parent === root) {\n        if (typeof i.raws.before !== 'undefined') {\n          let parts = i.raws.before.split('\\n')\n          value = parts[parts.length - 1]\n          value = value.replace(/[^\\s]/g, '')\n          return false\n        }\n      }\n    })\n    return value\n  }\n\n  rawBeforeComment (root, node) {\n    let value\n    root.walkComments(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.indexOf('\\n') !== -1) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (value) {\n      value = value.replace(/[^\\s]/g, '')\n    }\n    return value\n  }\n\n  rawBeforeDecl (root, node) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.before !== 'undefined') {\n        value = i.raws.before\n        if (value.indexOf('\\n') !== -1) {\n          value = value.replace(/[^\\n]+$/, '')\n        }\n        return false\n      }\n    })\n    if (typeof value === 'undefined') {\n      value = this.raw(node, null, 'beforeRule')\n    } else if (value) {\n      value = value.replace(/[^\\s]/g, '')\n    }\n    return value\n  }\n\n  rawBeforeRule (root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && (i.parent !== root || root.first !== i)) {\n        if (typeof i.raws.before !== 'undefined') {\n          value = i.raws.before\n          if (value.indexOf('\\n') !== -1) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/[^\\s]/g, '')\n    return value\n  }\n\n  rawBeforeClose (root) {\n    let value\n    root.walk(i => {\n      if (i.nodes && i.nodes.length > 0) {\n        if (typeof i.raws.after !== 'undefined') {\n          value = i.raws.after\n          if (value.indexOf('\\n') !== -1) {\n            value = value.replace(/[^\\n]+$/, '')\n          }\n          return false\n        }\n      }\n    })\n    if (value) value = value.replace(/[^\\s]/g, '')\n    return value\n  }\n\n  rawBeforeOpen (root) {\n    let value\n    root.walk(i => {\n      if (i.type !== 'decl') {\n        value = i.raws.between\n        if (typeof value !== 'undefined') return false\n      }\n    })\n    return value\n  }\n\n  rawColon (root) {\n    let value\n    root.walkDecls(i => {\n      if (typeof i.raws.between !== 'undefined') {\n        value = i.raws.between.replace(/[^\\s:]/g, '')\n        return false\n      }\n    })\n    return value\n  }\n\n  beforeAfter (node, detect) {\n    let value\n    if (node.type === 'decl') {\n      value = this.raw(node, null, 'beforeDecl')\n    } else if (node.type === 'comment') {\n      value = this.raw(node, null, 'beforeComment')\n    } else if (detect === 'before') {\n      value = this.raw(node, null, 'beforeRule')\n    } else {\n      value = this.raw(node, null, 'beforeClose')\n    }\n\n    let buf = node.parent\n    let depth = 0\n    while (buf && buf.type !== 'root') {\n      depth += 1\n      buf = buf.parent\n    }\n\n    if (value.indexOf('\\n') !== -1) {\n      let indent = this.raw(node, null, 'indent')\n      if (indent.length) {\n        for (let step = 0; step < depth; step++) value += indent\n      }\n    }\n\n    return value\n  }\n\n  rawValue (node, prop) {\n    let value = node[prop]\n    let raw = node.raws[prop]\n    if (raw && raw.value === value) {\n      return raw.raw\n    }\n\n    return value\n  }\n}\n\nexport default Stringifier\n",
    "import Stringifier from './stringifier'\n\nfunction stringify (node, builder) {\n  let str = new Stringifier(builder)\n  str.stringify(node)\n}\n\nexport default stringify\n",
    "const SINGLE_QUOTE = '\\''.charCodeAt(0)\nconst DOUBLE_QUOTE = '\"'.charCodeAt(0)\nconst BACKSLASH = '\\\\'.charCodeAt(0)\nconst SLASH = '/'.charCodeAt(0)\nconst NEWLINE = '\\n'.charCodeAt(0)\nconst SPACE = ' '.charCodeAt(0)\nconst FEED = '\\f'.charCodeAt(0)\nconst TAB = '\\t'.charCodeAt(0)\nconst CR = '\\r'.charCodeAt(0)\nconst OPEN_SQUARE = '['.charCodeAt(0)\nconst CLOSE_SQUARE = ']'.charCodeAt(0)\nconst OPEN_PARENTHESES = '('.charCodeAt(0)\nconst CLOSE_PARENTHESES = ')'.charCodeAt(0)\nconst OPEN_CURLY = '{'.charCodeAt(0)\nconst CLOSE_CURLY = '}'.charCodeAt(0)\nconst SEMICOLON = ';'.charCodeAt(0)\nconst ASTERISK = '*'.charCodeAt(0)\nconst COLON = ':'.charCodeAt(0)\nconst AT = '@'.charCodeAt(0)\n\nconst RE_AT_END = /[ \\n\\t\\r\\f{}()'\"\\\\;/[\\]#]/g\nconst RE_WORD_END = /[ \\n\\t\\r\\f(){}:;@!'\"\\\\\\][#]|\\/(?=\\*)/g\nconst RE_BAD_BRACKET = /.[\\\\/(\"'\\n]/\nconst RE_HEX_ESCAPE = /[a-f0-9]/i\n\nexport default function tokenizer (input, options = {}) {\n  let css = input.css.valueOf()\n  let ignore = options.ignoreErrors\n\n  let code, next, quote, lines, last, content, escape\n  let nextLine, nextOffset, escaped, escapePos, prev, n, currentToken\n\n  let length = css.length\n  let offset = -1\n  let line = 1\n  let pos = 0\n  let buffer = []\n  let returned = []\n\n  function position () {\n    return pos\n  }\n\n  function unclosed (what) {\n    throw input.error('Unclosed ' + what, line, pos - offset)\n  }\n\n  function endOfFile () {\n    return returned.length === 0 && pos >= length\n  }\n\n  function nextToken (opts) {\n    if (returned.length) return returned.pop()\n    if (pos >= length) return\n\n    let ignoreUnclosed = opts ? opts.ignoreUnclosed : false\n\n    code = css.charCodeAt(pos)\n    if (\n      code === NEWLINE || code === FEED ||\n      (code === CR && css.charCodeAt(pos + 1) !== NEWLINE)\n    ) {\n      offset = pos\n      line += 1\n    }\n\n    switch (code) {\n      case NEWLINE:\n      case SPACE:\n      case TAB:\n      case CR:\n      case FEED:\n        next = pos\n        do {\n          next += 1\n          code = css.charCodeAt(next)\n          if (code === NEWLINE) {\n            offset = next\n            line += 1\n          }\n        } while (\n          code === SPACE ||\n          code === NEWLINE ||\n          code === TAB ||\n          code === CR ||\n          code === FEED\n        )\n\n        currentToken = ['space', css.slice(pos, next)]\n        pos = next - 1\n        break\n\n      case OPEN_SQUARE:\n      case CLOSE_SQUARE:\n      case OPEN_CURLY:\n      case CLOSE_CURLY:\n      case COLON:\n      case SEMICOLON:\n      case CLOSE_PARENTHESES:\n        let controlChar = String.fromCharCode(code)\n        currentToken = [controlChar, controlChar, line, pos - offset]\n        break\n\n      case OPEN_PARENTHESES:\n        prev = buffer.length ? buffer.pop()[1] : ''\n        n = css.charCodeAt(pos + 1)\n        if (\n          prev === 'url' &&\n          n !== SINGLE_QUOTE && n !== DOUBLE_QUOTE &&\n          n !== SPACE && n !== NEWLINE && n !== TAB &&\n          n !== FEED && n !== CR\n        ) {\n          next = pos\n          do {\n            escaped = false\n            next = css.indexOf(')', next + 1)\n            if (next === -1) {\n              if (ignore || ignoreUnclosed) {\n                next = pos\n                break\n              } else {\n                unclosed('bracket')\n              }\n            }\n            escapePos = next\n            while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n              escapePos -= 1\n              escaped = !escaped\n            }\n          } while (escaped)\n\n          currentToken = ['brackets', css.slice(pos, next + 1),\n            line, pos - offset,\n            line, next - offset\n          ]\n\n          pos = next\n        } else {\n          next = css.indexOf(')', pos + 1)\n          content = css.slice(pos, next + 1)\n\n          if (next === -1 || RE_BAD_BRACKET.test(content)) {\n            currentToken = ['(', '(', line, pos - offset]\n          } else {\n            currentToken = ['brackets', content,\n              line, pos - offset,\n              line, next - offset\n            ]\n            pos = next\n          }\n        }\n\n        break\n\n      case SINGLE_QUOTE:\n      case DOUBLE_QUOTE:\n        quote = code === SINGLE_QUOTE ? '\\'' : '\"'\n        next = pos\n        do {\n          escaped = false\n          next = css.indexOf(quote, next + 1)\n          if (next === -1) {\n            if (ignore || ignoreUnclosed) {\n              next = pos + 1\n              break\n            } else {\n              unclosed('string')\n            }\n          }\n          escapePos = next\n          while (css.charCodeAt(escapePos - 1) === BACKSLASH) {\n            escapePos -= 1\n            escaped = !escaped\n          }\n        } while (escaped)\n\n        content = css.slice(pos, next + 1)\n        lines = content.split('\\n')\n        last = lines.length - 1\n\n        if (last > 0) {\n          nextLine = line + last\n          nextOffset = next - lines[last].length\n        } else {\n          nextLine = line\n          nextOffset = offset\n        }\n\n        currentToken = ['string', css.slice(pos, next + 1),\n          line, pos - offset,\n          nextLine, next - nextOffset\n        ]\n\n        offset = nextOffset\n        line = nextLine\n        pos = next\n        break\n\n      case AT:\n        RE_AT_END.lastIndex = pos + 1\n        RE_AT_END.test(css)\n        if (RE_AT_END.lastIndex === 0) {\n          next = css.length - 1\n        } else {\n          next = RE_AT_END.lastIndex - 2\n        }\n\n        currentToken = ['at-word', css.slice(pos, next + 1),\n          line, pos - offset,\n          line, next - offset\n        ]\n\n        pos = next\n        break\n\n      case BACKSLASH:\n        next = pos\n        escape = true\n        while (css.charCodeAt(next + 1) === BACKSLASH) {\n          next += 1\n          escape = !escape\n        }\n        code = css.charCodeAt(next + 1)\n        if (\n          escape &&\n          code !== SLASH &&\n          code !== SPACE &&\n          code !== NEWLINE &&\n          code !== TAB &&\n          code !== CR &&\n          code !== FEED\n        ) {\n          next += 1\n          if (RE_HEX_ESCAPE.test(css.charAt(next))) {\n            while (RE_HEX_ESCAPE.test(css.charAt(next + 1))) {\n              next += 1\n            }\n            if (css.charCodeAt(next + 1) === SPACE) {\n              next += 1\n            }\n          }\n        }\n\n        currentToken = ['word', css.slice(pos, next + 1),\n          line, pos - offset,\n          line, next - offset\n        ]\n\n        pos = next\n        break\n\n      default:\n        if (code === SLASH && css.charCodeAt(pos + 1) === ASTERISK) {\n          next = css.indexOf('*/', pos + 2) + 1\n          if (next === 0) {\n            if (ignore || ignoreUnclosed) {\n              next = css.length\n            } else {\n              unclosed('comment')\n            }\n          }\n\n          content = css.slice(pos, next + 1)\n          lines = content.split('\\n')\n          last = lines.length - 1\n\n          if (last > 0) {\n            nextLine = line + last\n            nextOffset = next - lines[last].length\n          } else {\n            nextLine = line\n            nextOffset = offset\n          }\n\n          currentToken = ['comment', content,\n            line, pos - offset,\n            nextLine, next - nextOffset\n          ]\n\n          offset = nextOffset\n          line = nextLine\n          pos = next\n        } else {\n          RE_WORD_END.lastIndex = pos + 1\n          RE_WORD_END.test(css)\n          if (RE_WORD_END.lastIndex === 0) {\n            next = css.length - 1\n          } else {\n            next = RE_WORD_END.lastIndex - 2\n          }\n\n          currentToken = ['word', css.slice(pos, next + 1),\n            line, pos - offset,\n            line, next - offset\n          ]\n\n          buffer.push(currentToken)\n\n          pos = next\n        }\n\n        break\n    }\n\n    pos++\n    return currentToken\n  }\n\n  function back (token) {\n    returned.push(token)\n  }\n\n  return {\n    back,\n    nextToken,\n    endOfFile,\n    position\n  }\n}\n",
    "/**\n * Contains helpers for working with vendor prefixes.\n *\n * @example\n * const vendor = postcss.vendor\n *\n * @namespace vendor\n */\nlet vendor = {\n\n  /**\n   * Returns the vendor prefix extracted from an input string.\n   *\n   * @param {string} prop String with or without vendor prefix.\n   *\n   * @return {string} vendor prefix or empty string\n   *\n   * @example\n   * postcss.vendor.prefix('-moz-tab-size') //=> '-moz-'\n   * postcss.vendor.prefix('tab-size')      //=> ''\n   */\n  prefix (prop) {\n    let match = prop.match(/^(-\\w+-)/)\n    if (match) {\n      return match[0]\n    }\n\n    return ''\n  },\n\n  /**\n     * Returns the input string stripped of its vendor prefix.\n     *\n     * @param {string} prop String with or without vendor prefix.\n     *\n     * @return {string} String name without vendor prefixes.\n     *\n     * @example\n     * postcss.vendor.unprefixed('-moz-tab-size') //=> 'tab-size'\n     */\n  unprefixed (prop) {\n    return prop.replace(/^-\\w+-/, '')\n  }\n\n}\n\nexport default vendor\n",
    "let printed = { }\n\nexport default function warnOnce (message) {\n  if (printed[message]) return\n  printed[message] = true\n\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(message)\n  }\n}\n",
    "/**\n * Represents a plugins warning. It can be created using {@link Node#warn}.\n *\n * @example\n * if (decl.important) {\n *   decl.warn(result, 'Avoid !important', { word: '!important' })\n * }\n */\nclass Warning {\n  /**\n   * @param {string} text        Warning message.\n   * @param {Object} [opts]      Warning options.\n   * @param {Node}   opts.node   CSS node that caused the warning.\n   * @param {string} opts.word   Word in CSS source that caused the warning.\n   * @param {number} opts.index  Index in CSS node string that caused\n   *                             the warning.\n   * @param {string} opts.plugin Name of the plugin that created\n   *                             this warning. {@link Result#warn} fills\n   *                             this property automatically.\n   */\n  constructor (text, opts = { }) {\n    /**\n     * Type to filter warnings from {@link Result#messages}.\n     * Always equal to `\"warning\"`.\n     *\n     * @type {string}\n     *\n     * @example\n     * const nonWarning = result.messages.filter(i => i.type !== 'warning')\n     */\n    this.type = 'warning'\n    /**\n     * The warning message.\n     *\n     * @type {string}\n     *\n     * @example\n     * warning.text //=> 'Try to avoid !important'\n     */\n    this.text = text\n\n    if (opts.node && opts.node.source) {\n      let pos = opts.node.positionBy(opts)\n      /**\n       * Line in the input file with this warnings source.\n       * @type {number}\n       *\n       * @example\n       * warning.line //=> 5\n       */\n      this.line = pos.line\n      /**\n       * Column in the input file with this warnings source.\n       *\n       * @type {number}\n       *\n       * @example\n       * warning.column //=> 6\n       */\n      this.column = pos.column\n    }\n\n    for (let opt in opts) this[opt] = opts[opt]\n  }\n\n  /**\n   * Returns a warning position and message.\n   *\n   * @example\n   * warning.toString() //=> 'postcss-lint:a.css:10:14: Avoid !important'\n   *\n   * @return {string} Warning position and message.\n   */\n  toString () {\n    if (this.node) {\n      return this.node.error(this.text, {\n        plugin: this.plugin,\n        index: this.index,\n        word: this.word\n      }).message\n    }\n\n    if (this.plugin) {\n      return this.plugin + ': ' + this.text\n    }\n\n    return this.text\n  }\n\n  /**\n   * @memberof Warning#\n   * @member {string} plugin The name of the plugin that created\n   *                         it will fill this property automatically.\n   *                         this warning. When you call {@link Node#warn}\n   *\n   * @example\n   * warning.plugin //=> 'postcss-important'\n   */\n\n  /**\n   * @memberof Warning#\n   * @member {Node} node Contains the CSS node that caused the warning.\n   *\n   * @example\n   * warning.node.toString() //=> 'color: white !important'\n   */\n}\n\nexport default Warning\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar has = Object.prototype.hasOwnProperty;\nvar hasNativeMap = typeof Map !== \"undefined\";\n\n/**\n * A data structure which is a combination of an array and a set. Adding a new\n * member is O(1), testing for membership is O(1), and finding the index of an\n * element is O(1). Removing elements from the set is not supported. Only\n * strings are supported for membership.\n */\nfunction ArraySet() {\n  this._array = [];\n  this._set = hasNativeMap ? new Map() : Object.create(null);\n}\n\n/**\n * Static method for creating ArraySet instances from an existing array.\n */\nArraySet.fromArray = function ArraySet_fromArray(aArray, aAllowDuplicates) {\n  var set = new ArraySet();\n  for (var i = 0, len = aArray.length; i < len; i++) {\n    set.add(aArray[i], aAllowDuplicates);\n  }\n  return set;\n};\n\n/**\n * Return how many unique items are in this ArraySet. If duplicates have been\n * added, than those do not count towards the size.\n *\n * @returns Number\n */\nArraySet.prototype.size = function ArraySet_size() {\n  return hasNativeMap ? this._set.size : Object.getOwnPropertyNames(this._set).length;\n};\n\n/**\n * Add the given string to this set.\n *\n * @param String aStr\n */\nArraySet.prototype.add = function ArraySet_add(aStr, aAllowDuplicates) {\n  var sStr = hasNativeMap ? aStr : util.toSetString(aStr);\n  var isDuplicate = hasNativeMap ? this.has(aStr) : has.call(this._set, sStr);\n  var idx = this._array.length;\n  if (!isDuplicate || aAllowDuplicates) {\n    this._array.push(aStr);\n  }\n  if (!isDuplicate) {\n    if (hasNativeMap) {\n      this._set.set(aStr, idx);\n    } else {\n      this._set[sStr] = idx;\n    }\n  }\n};\n\n/**\n * Is the given string a member of this set?\n *\n * @param String aStr\n */\nArraySet.prototype.has = function ArraySet_has(aStr) {\n  if (hasNativeMap) {\n    return this._set.has(aStr);\n  } else {\n    var sStr = util.toSetString(aStr);\n    return has.call(this._set, sStr);\n  }\n};\n\n/**\n * What is the index of the given string in the array?\n *\n * @param String aStr\n */\nArraySet.prototype.indexOf = function ArraySet_indexOf(aStr) {\n  if (hasNativeMap) {\n    var idx = this._set.get(aStr);\n    if (idx >= 0) {\n        return idx;\n    }\n  } else {\n    var sStr = util.toSetString(aStr);\n    if (has.call(this._set, sStr)) {\n      return this._set[sStr];\n    }\n  }\n\n  throw new Error('\"' + aStr + '\" is not in the set.');\n};\n\n/**\n * What is the element at the given index?\n *\n * @param Number aIdx\n */\nArraySet.prototype.at = function ArraySet_at(aIdx) {\n  if (aIdx >= 0 && aIdx < this._array.length) {\n    return this._array[aIdx];\n  }\n  throw new Error('No element indexed by ' + aIdx);\n};\n\n/**\n * Returns the array representation of this set (which has the proper indices\n * indicated by indexOf). Note that this is a copy of the internal array used\n * for storing the members so that no one can mess with internal state.\n */\nArraySet.prototype.toArray = function ArraySet_toArray() {\n  return this._array.slice();\n};\n\nexports.ArraySet = ArraySet;\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n *\n * Based on the Base 64 VLQ implementation in Closure Compiler:\n * https://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/debugging/sourcemap/Base64VLQ.java\n *\n * Copyright 2011 The Closure Compiler Authors. All rights reserved.\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *  * Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n *  * Redistributions in binary form must reproduce the above\n *    copyright notice, this list of conditions and the following\n *    disclaimer in the documentation and/or other materials provided\n *    with the distribution.\n *  * Neither the name of Google Inc. nor the names of its\n *    contributors may be used to endorse or promote products derived\n *    from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar base64 = require('./base64');\n\n// A single base 64 digit can contain 6 bits of data. For the base 64 variable\n// length quantities we use in the source map spec, the first bit is the sign,\n// the next four bits are the actual value, and the 6th bit is the\n// continuation bit. The continuation bit tells us whether there are more\n// digits in this value following this digit.\n//\n//   Continuation\n//   |    Sign\n//   |    |\n//   V    V\n//   101011\n\nvar VLQ_BASE_SHIFT = 5;\n\n// binary: 100000\nvar VLQ_BASE = 1 << VLQ_BASE_SHIFT;\n\n// binary: 011111\nvar VLQ_BASE_MASK = VLQ_BASE - 1;\n\n// binary: 100000\nvar VLQ_CONTINUATION_BIT = VLQ_BASE;\n\n/**\n * Converts from a two-complement value to a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   1 becomes 2 (10 binary), -1 becomes 3 (11 binary)\n *   2 becomes 4 (100 binary), -2 becomes 5 (101 binary)\n */\nfunction toVLQSigned(aValue) {\n  return aValue < 0\n    ? ((-aValue) << 1) + 1\n    : (aValue << 1) + 0;\n}\n\n/**\n * Converts to a two-complement value from a value where the sign bit is\n * placed in the least significant bit.  For example, as decimals:\n *   2 (10 binary) becomes 1, 3 (11 binary) becomes -1\n *   4 (100 binary) becomes 2, 5 (101 binary) becomes -2\n */\nfunction fromVLQSigned(aValue) {\n  var isNegative = (aValue & 1) === 1;\n  var shifted = aValue >> 1;\n  return isNegative\n    ? -shifted\n    : shifted;\n}\n\n/**\n * Returns the base 64 VLQ encoded value.\n */\nexports.encode = function base64VLQ_encode(aValue) {\n  var encoded = \"\";\n  var digit;\n\n  var vlq = toVLQSigned(aValue);\n\n  do {\n    digit = vlq & VLQ_BASE_MASK;\n    vlq >>>= VLQ_BASE_SHIFT;\n    if (vlq > 0) {\n      // There are still more digits in this value, so we must make sure the\n      // continuation bit is marked.\n      digit |= VLQ_CONTINUATION_BIT;\n    }\n    encoded += base64.encode(digit);\n  } while (vlq > 0);\n\n  return encoded;\n};\n\n/**\n * Decodes the next base 64 VLQ value from the given string and returns the\n * value and the rest of the string via the out parameter.\n */\nexports.decode = function base64VLQ_decode(aStr, aIndex, aOutParam) {\n  var strLen = aStr.length;\n  var result = 0;\n  var shift = 0;\n  var continuation, digit;\n\n  do {\n    if (aIndex >= strLen) {\n      throw new Error(\"Expected more digits in base 64 VLQ value.\");\n    }\n\n    digit = base64.decode(aStr.charCodeAt(aIndex++));\n    if (digit === -1) {\n      throw new Error(\"Invalid base64 digit: \" + aStr.charAt(aIndex - 1));\n    }\n\n    continuation = !!(digit & VLQ_CONTINUATION_BIT);\n    digit &= VLQ_BASE_MASK;\n    result = result + (digit << shift);\n    shift += VLQ_BASE_SHIFT;\n  } while (continuation);\n\n  aOutParam.value = fromVLQSigned(result);\n  aOutParam.rest = aIndex;\n};\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar intToCharMap = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n\n/**\n * Encode an integer in the range of 0 to 63 to a single base 64 digit.\n */\nexports.encode = function (number) {\n  if (0 <= number && number < intToCharMap.length) {\n    return intToCharMap[number];\n  }\n  throw new TypeError(\"Must be between 0 and 63: \" + number);\n};\n\n/**\n * Decode a single base 64 character code digit to an integer. Returns -1 on\n * failure.\n */\nexports.decode = function (charCode) {\n  var bigA = 65;     // 'A'\n  var bigZ = 90;     // 'Z'\n\n  var littleA = 97;  // 'a'\n  var littleZ = 122; // 'z'\n\n  var zero = 48;     // '0'\n  var nine = 57;     // '9'\n\n  var plus = 43;     // '+'\n  var slash = 47;    // '/'\n\n  var littleOffset = 26;\n  var numberOffset = 52;\n\n  // 0 - 25: ABCDEFGHIJKLMNOPQRSTUVWXYZ\n  if (bigA <= charCode && charCode <= bigZ) {\n    return (charCode - bigA);\n  }\n\n  // 26 - 51: abcdefghijklmnopqrstuvwxyz\n  if (littleA <= charCode && charCode <= littleZ) {\n    return (charCode - littleA + littleOffset);\n  }\n\n  // 52 - 61: 0123456789\n  if (zero <= charCode && charCode <= nine) {\n    return (charCode - zero + numberOffset);\n  }\n\n  // 62: +\n  if (charCode == plus) {\n    return 62;\n  }\n\n  // 63: /\n  if (charCode == slash) {\n    return 63;\n  }\n\n  // Invalid base64 digit.\n  return -1;\n};\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nexports.GREATEST_LOWER_BOUND = 1;\nexports.LEAST_UPPER_BOUND = 2;\n\n/**\n * Recursive implementation of binary search.\n *\n * @param aLow Indices here and lower do not contain the needle.\n * @param aHigh Indices here and higher do not contain the needle.\n * @param aNeedle The element being searched for.\n * @param aHaystack The non-empty array being searched.\n * @param aCompare Function which takes two elements and returns -1, 0, or 1.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n */\nfunction recursiveSearch(aLow, aHigh, aNeedle, aHaystack, aCompare, aBias) {\n  // This function terminates when one of the following is true:\n  //\n  //   1. We find the exact element we are looking for.\n  //\n  //   2. We did not find the exact element, but we can return the index of\n  //      the next-closest element.\n  //\n  //   3. We did not find the exact element, and there is no next-closest\n  //      element than the one we are searching for, so we return -1.\n  var mid = Math.floor((aHigh - aLow) / 2) + aLow;\n  var cmp = aCompare(aNeedle, aHaystack[mid], true);\n  if (cmp === 0) {\n    // Found the element we are looking for.\n    return mid;\n  }\n  else if (cmp > 0) {\n    // Our needle is greater than aHaystack[mid].\n    if (aHigh - mid > 1) {\n      // The element is in the upper half.\n      return recursiveSearch(mid, aHigh, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // The exact needle element was not found in this haystack. Determine if\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return aHigh < aHaystack.length ? aHigh : -1;\n    } else {\n      return mid;\n    }\n  }\n  else {\n    // Our needle is less than aHaystack[mid].\n    if (mid - aLow > 1) {\n      // The element is in the lower half.\n      return recursiveSearch(aLow, mid, aNeedle, aHaystack, aCompare, aBias);\n    }\n\n    // we are in termination case (3) or (2) and return the appropriate thing.\n    if (aBias == exports.LEAST_UPPER_BOUND) {\n      return mid;\n    } else {\n      return aLow < 0 ? -1 : aLow;\n    }\n  }\n}\n\n/**\n * This is an implementation of binary search which will always try and return\n * the index of the closest element if there is no exact hit. This is because\n * mappings between original and generated line/col pairs are single points,\n * and there is an implicit region between each of them, so a miss just means\n * that you aren't on the very start of a region.\n *\n * @param aNeedle The element you are looking for.\n * @param aHaystack The array that is being searched.\n * @param aCompare A function which takes the needle and an element in the\n *     array and returns -1, 0, or 1 depending on whether the needle is less\n *     than, equal to, or greater than the element, respectively.\n * @param aBias Either 'binarySearch.GREATEST_LOWER_BOUND' or\n *     'binarySearch.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'binarySearch.GREATEST_LOWER_BOUND'.\n */\nexports.search = function search(aNeedle, aHaystack, aCompare, aBias) {\n  if (aHaystack.length === 0) {\n    return -1;\n  }\n\n  var index = recursiveSearch(-1, aHaystack.length, aNeedle, aHaystack,\n                              aCompare, aBias || exports.GREATEST_LOWER_BOUND);\n  if (index < 0) {\n    return -1;\n  }\n\n  // We have found either the exact element, or the next-closest element than\n  // the one we are searching for. However, there may be more than one such\n  // element. Make sure we always return the smallest of these.\n  while (index - 1 >= 0) {\n    if (aCompare(aHaystack[index], aHaystack[index - 1], true) !== 0) {\n      break;\n    }\n    --index;\n  }\n\n  return index;\n};\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2014 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\n\n/**\n * Determine whether mappingB is after mappingA with respect to generated\n * position.\n */\nfunction generatedPositionAfter(mappingA, mappingB) {\n  // Optimized for most common case\n  var lineA = mappingA.generatedLine;\n  var lineB = mappingB.generatedLine;\n  var columnA = mappingA.generatedColumn;\n  var columnB = mappingB.generatedColumn;\n  return lineB > lineA || lineB == lineA && columnB >= columnA ||\n         util.compareByGeneratedPositionsInflated(mappingA, mappingB) <= 0;\n}\n\n/**\n * A data structure to provide a sorted view of accumulated mappings in a\n * performance conscious manner. It trades a neglibable overhead in general\n * case for a large speedup in case of mappings being added in order.\n */\nfunction MappingList() {\n  this._array = [];\n  this._sorted = true;\n  // Serves as infimum\n  this._last = {generatedLine: -1, generatedColumn: 0};\n}\n\n/**\n * Iterate through internal items. This method takes the same arguments that\n * `Array.prototype.forEach` takes.\n *\n * NOTE: The order of the mappings is NOT guaranteed.\n */\nMappingList.prototype.unsortedForEach =\n  function MappingList_forEach(aCallback, aThisArg) {\n    this._array.forEach(aCallback, aThisArg);\n  };\n\n/**\n * Add the given source mapping.\n *\n * @param Object aMapping\n */\nMappingList.prototype.add = function MappingList_add(aMapping) {\n  if (generatedPositionAfter(this._last, aMapping)) {\n    this._last = aMapping;\n    this._array.push(aMapping);\n  } else {\n    this._sorted = false;\n    this._array.push(aMapping);\n  }\n};\n\n/**\n * Returns the flat, sorted array of mappings. The mappings are sorted by\n * generated position.\n *\n * WARNING: This method returns internal data without copying, for\n * performance. The return value must NOT be mutated, and should be treated as\n * an immutable borrow. If you want to take ownership, you must make your own\n * copy.\n */\nMappingList.prototype.toArray = function MappingList_toArray() {\n  if (!this._sorted) {\n    this._array.sort(util.compareByGeneratedPositionsInflated);\n    this._sorted = true;\n  }\n  return this._array;\n};\n\nexports.MappingList = MappingList;\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n// It turns out that some (most?) JavaScript engines don't self-host\n// `Array.prototype.sort`. This makes sense because C++ will likely remain\n// faster than JS when doing raw CPU-intensive sorting. However, when using a\n// custom comparator function, calling back and forth between the VM's C++ and\n// JIT'd JS is rather slow *and* loses JIT type information, resulting in\n// worse generated code for the comparator function than would be optimal. In\n// fact, when sorting with a comparator, these costs outweigh the benefits of\n// sorting in C++. By using our own JS-implemented Quick Sort (below), we get\n// a ~3500ms mean speed-up in `bench/bench.html`.\n\n/**\n * Swap the elements indexed by `x` and `y` in the array `ary`.\n *\n * @param {Array} ary\n *        The array.\n * @param {Number} x\n *        The index of the first item.\n * @param {Number} y\n *        The index of the second item.\n */\nfunction swap(ary, x, y) {\n  var temp = ary[x];\n  ary[x] = ary[y];\n  ary[y] = temp;\n}\n\n/**\n * Returns a random integer within the range `low .. high` inclusive.\n *\n * @param {Number} low\n *        The lower bound on the range.\n * @param {Number} high\n *        The upper bound on the range.\n */\nfunction randomIntInRange(low, high) {\n  return Math.round(low + (Math.random() * (high - low)));\n}\n\n/**\n * The Quick Sort algorithm.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n * @param {Number} p\n *        Start index of the array\n * @param {Number} r\n *        End index of the array\n */\nfunction doQuickSort(ary, comparator, p, r) {\n  // If our lower bound is less than our upper bound, we (1) partition the\n  // array into two pieces and (2) recurse on each half. If it is not, this is\n  // the empty array and our base case.\n\n  if (p < r) {\n    // (1) Partitioning.\n    //\n    // The partitioning chooses a pivot between `p` and `r` and moves all\n    // elements that are less than or equal to the pivot to the before it, and\n    // all the elements that are greater than it after it. The effect is that\n    // once partition is done, the pivot is in the exact place it will be when\n    // the array is put in sorted order, and it will not need to be moved\n    // again. This runs in O(n) time.\n\n    // Always choose a random pivot so that an input array which is reverse\n    // sorted does not cause O(n^2) running time.\n    var pivotIndex = randomIntInRange(p, r);\n    var i = p - 1;\n\n    swap(ary, pivotIndex, r);\n    var pivot = ary[r];\n\n    // Immediately after `j` is incremented in this loop, the following hold\n    // true:\n    //\n    //   * Every element in `ary[p .. i]` is less than or equal to the pivot.\n    //\n    //   * Every element in `ary[i+1 .. j-1]` is greater than the pivot.\n    for (var j = p; j < r; j++) {\n      if (comparator(ary[j], pivot) <= 0) {\n        i += 1;\n        swap(ary, i, j);\n      }\n    }\n\n    swap(ary, i + 1, j);\n    var q = i + 1;\n\n    // (2) Recurse on each half.\n\n    doQuickSort(ary, comparator, p, q - 1);\n    doQuickSort(ary, comparator, q + 1, r);\n  }\n}\n\n/**\n * Sort the given array in-place with the given comparator function.\n *\n * @param {Array} ary\n *        An array to sort.\n * @param {function} comparator\n *        Function to use to compare two items.\n */\nexports.quickSort = function (ary, comparator) {\n  doQuickSort(ary, comparator, 0, ary.length - 1);\n};\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar util = require('./util');\nvar binarySearch = require('./binary-search');\nvar ArraySet = require('./array-set').ArraySet;\nvar base64VLQ = require('./base64-vlq');\nvar quickSort = require('./quick-sort').quickSort;\n\nfunction SourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  return sourceMap.sections != null\n    ? new IndexedSourceMapConsumer(sourceMap, aSourceMapURL)\n    : new BasicSourceMapConsumer(sourceMap, aSourceMapURL);\n}\n\nSourceMapConsumer.fromSourceMap = function(aSourceMap, aSourceMapURL) {\n  return BasicSourceMapConsumer.fromSourceMap(aSourceMap, aSourceMapURL);\n}\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nSourceMapConsumer.prototype._version = 3;\n\n// `__generatedMappings` and `__originalMappings` are arrays that hold the\n// parsed mapping coordinates from the source map's \"mappings\" attribute. They\n// are lazily instantiated, accessed via the `_generatedMappings` and\n// `_originalMappings` getters respectively, and we only parse the mappings\n// and create these arrays once queried for a source location. We jump through\n// these hoops because there can be many thousands of mappings, and parsing\n// them is expensive, so we only want to do it if we must.\n//\n// Each object in the arrays is of the form:\n//\n//     {\n//       generatedLine: The line number in the generated code,\n//       generatedColumn: The column number in the generated code,\n//       source: The path to the original source file that generated this\n//               chunk of code,\n//       originalLine: The line number in the original source that\n//                     corresponds to this chunk of generated code,\n//       originalColumn: The column number in the original source that\n//                       corresponds to this chunk of generated code,\n//       name: The name of the original symbol which generated this chunk of\n//             code.\n//     }\n//\n// All properties except for `generatedLine` and `generatedColumn` can be\n// `null`.\n//\n// `_generatedMappings` is ordered by the generated positions.\n//\n// `_originalMappings` is ordered by the original positions.\n\nSourceMapConsumer.prototype.__generatedMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_generatedMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__generatedMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__generatedMappings;\n  }\n});\n\nSourceMapConsumer.prototype.__originalMappings = null;\nObject.defineProperty(SourceMapConsumer.prototype, '_originalMappings', {\n  configurable: true,\n  enumerable: true,\n  get: function () {\n    if (!this.__originalMappings) {\n      this._parseMappings(this._mappings, this.sourceRoot);\n    }\n\n    return this.__originalMappings;\n  }\n});\n\nSourceMapConsumer.prototype._charIsMappingSeparator =\n  function SourceMapConsumer_charIsMappingSeparator(aStr, index) {\n    var c = aStr.charAt(index);\n    return c === \";\" || c === \",\";\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    throw new Error(\"Subclasses must implement _parseMappings\");\n  };\n\nSourceMapConsumer.GENERATED_ORDER = 1;\nSourceMapConsumer.ORIGINAL_ORDER = 2;\n\nSourceMapConsumer.GREATEST_LOWER_BOUND = 1;\nSourceMapConsumer.LEAST_UPPER_BOUND = 2;\n\n/**\n * Iterate over each mapping between an original source/line/column and a\n * generated line/column in this source map.\n *\n * @param Function aCallback\n *        The function that is called with each mapping.\n * @param Object aContext\n *        Optional. If specified, this object will be the value of `this` every\n *        time that `aCallback` is called.\n * @param aOrder\n *        Either `SourceMapConsumer.GENERATED_ORDER` or\n *        `SourceMapConsumer.ORIGINAL_ORDER`. Specifies whether you want to\n *        iterate over the mappings sorted by the generated file's line/column\n *        order or the original's source/line/column order, respectively. Defaults to\n *        `SourceMapConsumer.GENERATED_ORDER`.\n */\nSourceMapConsumer.prototype.eachMapping =\n  function SourceMapConsumer_eachMapping(aCallback, aContext, aOrder) {\n    var context = aContext || null;\n    var order = aOrder || SourceMapConsumer.GENERATED_ORDER;\n\n    var mappings;\n    switch (order) {\n    case SourceMapConsumer.GENERATED_ORDER:\n      mappings = this._generatedMappings;\n      break;\n    case SourceMapConsumer.ORIGINAL_ORDER:\n      mappings = this._originalMappings;\n      break;\n    default:\n      throw new Error(\"Unknown order of iteration.\");\n    }\n\n    var sourceRoot = this.sourceRoot;\n    mappings.map(function (mapping) {\n      var source = mapping.source === null ? null : this._sources.at(mapping.source);\n      source = util.computeSourceURL(sourceRoot, source, this._sourceMapURL);\n      return {\n        source: source,\n        generatedLine: mapping.generatedLine,\n        generatedColumn: mapping.generatedColumn,\n        originalLine: mapping.originalLine,\n        originalColumn: mapping.originalColumn,\n        name: mapping.name === null ? null : this._names.at(mapping.name)\n      };\n    }, this).forEach(aCallback, context);\n  };\n\n/**\n * Returns all generated line and column information for the original source,\n * line, and column provided. If no column is provided, returns all mappings\n * corresponding to a either the line we are searching for or the next\n * closest line that has any mappings. Otherwise, returns all mappings\n * corresponding to the given line and either the column we are searching for\n * or the next closest column that has any offsets.\n *\n * The only argument is an object with the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number is 1-based.\n *   - column: Optional. the column number in the original source.\n *    The column number is 0-based.\n *\n * and an array of objects is returned, each with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *    line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *    The column number is 0-based.\n */\nSourceMapConsumer.prototype.allGeneratedPositionsFor =\n  function SourceMapConsumer_allGeneratedPositionsFor(aArgs) {\n    var line = util.getArg(aArgs, 'line');\n\n    // When there is no exact match, BasicSourceMapConsumer.prototype._findMapping\n    // returns the index of the closest mapping less than the needle. By\n    // setting needle.originalColumn to 0, we thus find the last mapping for\n    // the given line, provided such a mapping exists.\n    var needle = {\n      source: util.getArg(aArgs, 'source'),\n      originalLine: line,\n      originalColumn: util.getArg(aArgs, 'column', 0)\n    };\n\n    needle.source = this._findSourceIndex(needle.source);\n    if (needle.source < 0) {\n      return [];\n    }\n\n    var mappings = [];\n\n    var index = this._findMapping(needle,\n                                  this._originalMappings,\n                                  \"originalLine\",\n                                  \"originalColumn\",\n                                  util.compareByOriginalPositions,\n                                  binarySearch.LEAST_UPPER_BOUND);\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (aArgs.column === undefined) {\n        var originalLine = mapping.originalLine;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we found. Since\n        // mappings are sorted, this is guaranteed to find all mappings for\n        // the line we found.\n        while (mapping && mapping.originalLine === originalLine) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      } else {\n        var originalColumn = mapping.originalColumn;\n\n        // Iterate until either we run out of mappings, or we run into\n        // a mapping for a different line than the one we were searching for.\n        // Since mappings are sorted, this is guaranteed to find all mappings for\n        // the line we are searching for.\n        while (mapping &&\n               mapping.originalLine === line &&\n               mapping.originalColumn == originalColumn) {\n          mappings.push({\n            line: util.getArg(mapping, 'generatedLine', null),\n            column: util.getArg(mapping, 'generatedColumn', null),\n            lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n          });\n\n          mapping = this._originalMappings[++index];\n        }\n      }\n    }\n\n    return mappings;\n  };\n\nexports.SourceMapConsumer = SourceMapConsumer;\n\n/**\n * A BasicSourceMapConsumer instance represents a parsed source map which we can\n * query for information about the original file positions by giving it a file\n * position in the generated source.\n *\n * The first parameter is the raw source map (either as a JSON string, or\n * already parsed to an object). According to the spec, source maps have the\n * following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - sources: An array of URLs to the original source files.\n *   - names: An array of identifiers which can be referrenced by individual mappings.\n *   - sourceRoot: Optional. The URL root from which all sources are relative.\n *   - sourcesContent: Optional. An array of contents of the original source files.\n *   - mappings: A string of base64 VLQs which contain the actual mappings.\n *   - file: Optional. The generated file this source map is associated with.\n *\n * Here is an example source map, taken from the source map spec[0]:\n *\n *     {\n *       version : 3,\n *       file: \"out.js\",\n *       sourceRoot : \"\",\n *       sources: [\"foo.js\", \"bar.js\"],\n *       names: [\"src\", \"maps\", \"are\", \"fun\"],\n *       mappings: \"AA,AB;;ABCDE;\"\n *     }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit?pli=1#\n */\nfunction BasicSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sources = util.getArg(sourceMap, 'sources');\n  // Sass 3.3 leaves out the 'names' array, so we deviate from the spec (which\n  // requires the array) to play nice here.\n  var names = util.getArg(sourceMap, 'names', []);\n  var sourceRoot = util.getArg(sourceMap, 'sourceRoot', null);\n  var sourcesContent = util.getArg(sourceMap, 'sourcesContent', null);\n  var mappings = util.getArg(sourceMap, 'mappings');\n  var file = util.getArg(sourceMap, 'file', null);\n\n  // Once again, Sass deviates from the spec and supplies the version as a\n  // string rather than a number, so we use loose equality checking here.\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  if (sourceRoot) {\n    sourceRoot = util.normalize(sourceRoot);\n  }\n\n  sources = sources\n    .map(String)\n    // Some source maps produce relative source paths like \"./foo.js\" instead of\n    // \"foo.js\".  Normalize these first so that future comparisons will succeed.\n    // See bugzil.la/1090768.\n    .map(util.normalize)\n    // Always ensure that absolute sources are internally stored relative to\n    // the source root, if the source root is absolute. Not doing this would\n    // be particularly problematic when the source root is a prefix of the\n    // source (valid, but why??). See github issue #199 and bugzil.la/1188982.\n    .map(function (source) {\n      return sourceRoot && util.isAbsolute(sourceRoot) && util.isAbsolute(source)\n        ? util.relative(sourceRoot, source)\n        : source;\n    });\n\n  // Pass `true` below to allow duplicate names and sources. While source maps\n  // are intended to be compressed and deduplicated, the TypeScript compiler\n  // sometimes generates source maps with duplicates in them. See Github issue\n  // #72 and bugzil.la/889492.\n  this._names = ArraySet.fromArray(names.map(String), true);\n  this._sources = ArraySet.fromArray(sources, true);\n\n  this._absoluteSources = this._sources.toArray().map(function (s) {\n    return util.computeSourceURL(sourceRoot, s, aSourceMapURL);\n  });\n\n  this.sourceRoot = sourceRoot;\n  this.sourcesContent = sourcesContent;\n  this._mappings = mappings;\n  this._sourceMapURL = aSourceMapURL;\n  this.file = file;\n}\n\nBasicSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nBasicSourceMapConsumer.prototype.consumer = SourceMapConsumer;\n\n/**\n * Utility function to find the index of a source.  Returns -1 if not\n * found.\n */\nBasicSourceMapConsumer.prototype._findSourceIndex = function(aSource) {\n  var relativeSource = aSource;\n  if (this.sourceRoot != null) {\n    relativeSource = util.relative(this.sourceRoot, relativeSource);\n  }\n\n  if (this._sources.has(relativeSource)) {\n    return this._sources.indexOf(relativeSource);\n  }\n\n  // Maybe aSource is an absolute URL as returned by |sources|.  In\n  // this case we can't simply undo the transform.\n  var i;\n  for (i = 0; i < this._absoluteSources.length; ++i) {\n    if (this._absoluteSources[i] == aSource) {\n      return i;\n    }\n  }\n\n  return -1;\n};\n\n/**\n * Create a BasicSourceMapConsumer from a SourceMapGenerator.\n *\n * @param SourceMapGenerator aSourceMap\n *        The source map that will be consumed.\n * @param String aSourceMapURL\n *        The URL at which the source map can be found (optional)\n * @returns BasicSourceMapConsumer\n */\nBasicSourceMapConsumer.fromSourceMap =\n  function SourceMapConsumer_fromSourceMap(aSourceMap, aSourceMapURL) {\n    var smc = Object.create(BasicSourceMapConsumer.prototype);\n\n    var names = smc._names = ArraySet.fromArray(aSourceMap._names.toArray(), true);\n    var sources = smc._sources = ArraySet.fromArray(aSourceMap._sources.toArray(), true);\n    smc.sourceRoot = aSourceMap._sourceRoot;\n    smc.sourcesContent = aSourceMap._generateSourcesContent(smc._sources.toArray(),\n                                                            smc.sourceRoot);\n    smc.file = aSourceMap._file;\n    smc._sourceMapURL = aSourceMapURL;\n    smc._absoluteSources = smc._sources.toArray().map(function (s) {\n      return util.computeSourceURL(smc.sourceRoot, s, aSourceMapURL);\n    });\n\n    // Because we are modifying the entries (by converting string sources and\n    // names to indices into the sources and names ArraySets), we have to make\n    // a copy of the entry or else bad things happen. Shared mutable state\n    // strikes again! See github issue #191.\n\n    var generatedMappings = aSourceMap._mappings.toArray().slice();\n    var destGeneratedMappings = smc.__generatedMappings = [];\n    var destOriginalMappings = smc.__originalMappings = [];\n\n    for (var i = 0, length = generatedMappings.length; i < length; i++) {\n      var srcMapping = generatedMappings[i];\n      var destMapping = new Mapping;\n      destMapping.generatedLine = srcMapping.generatedLine;\n      destMapping.generatedColumn = srcMapping.generatedColumn;\n\n      if (srcMapping.source) {\n        destMapping.source = sources.indexOf(srcMapping.source);\n        destMapping.originalLine = srcMapping.originalLine;\n        destMapping.originalColumn = srcMapping.originalColumn;\n\n        if (srcMapping.name) {\n          destMapping.name = names.indexOf(srcMapping.name);\n        }\n\n        destOriginalMappings.push(destMapping);\n      }\n\n      destGeneratedMappings.push(destMapping);\n    }\n\n    quickSort(smc.__originalMappings, util.compareByOriginalPositions);\n\n    return smc;\n  };\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nBasicSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(BasicSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    return this._absoluteSources.slice();\n  }\n});\n\n/**\n * Provide the JIT with a nice shape / hidden class.\n */\nfunction Mapping() {\n  this.generatedLine = 0;\n  this.generatedColumn = 0;\n  this.source = null;\n  this.originalLine = null;\n  this.originalColumn = null;\n  this.name = null;\n}\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nBasicSourceMapConsumer.prototype._parseMappings =\n  function SourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    var generatedLine = 1;\n    var previousGeneratedColumn = 0;\n    var previousOriginalLine = 0;\n    var previousOriginalColumn = 0;\n    var previousSource = 0;\n    var previousName = 0;\n    var length = aStr.length;\n    var index = 0;\n    var cachedSegments = {};\n    var temp = {};\n    var originalMappings = [];\n    var generatedMappings = [];\n    var mapping, str, segment, end, value;\n\n    while (index < length) {\n      if (aStr.charAt(index) === ';') {\n        generatedLine++;\n        index++;\n        previousGeneratedColumn = 0;\n      }\n      else if (aStr.charAt(index) === ',') {\n        index++;\n      }\n      else {\n        mapping = new Mapping();\n        mapping.generatedLine = generatedLine;\n\n        // Because each offset is encoded relative to the previous one,\n        // many segments often have the same encoding. We can exploit this\n        // fact by caching the parsed variable length fields of each segment,\n        // allowing us to avoid a second parse if we encounter the same\n        // segment again.\n        for (end = index; end < length; end++) {\n          if (this._charIsMappingSeparator(aStr, end)) {\n            break;\n          }\n        }\n        str = aStr.slice(index, end);\n\n        segment = cachedSegments[str];\n        if (segment) {\n          index += str.length;\n        } else {\n          segment = [];\n          while (index < end) {\n            base64VLQ.decode(aStr, index, temp);\n            value = temp.value;\n            index = temp.rest;\n            segment.push(value);\n          }\n\n          if (segment.length === 2) {\n            throw new Error('Found a source, but no line and column');\n          }\n\n          if (segment.length === 3) {\n            throw new Error('Found a source and line, but no column');\n          }\n\n          cachedSegments[str] = segment;\n        }\n\n        // Generated column.\n        mapping.generatedColumn = previousGeneratedColumn + segment[0];\n        previousGeneratedColumn = mapping.generatedColumn;\n\n        if (segment.length > 1) {\n          // Original source.\n          mapping.source = previousSource + segment[1];\n          previousSource += segment[1];\n\n          // Original line.\n          mapping.originalLine = previousOriginalLine + segment[2];\n          previousOriginalLine = mapping.originalLine;\n          // Lines are stored 0-based\n          mapping.originalLine += 1;\n\n          // Original column.\n          mapping.originalColumn = previousOriginalColumn + segment[3];\n          previousOriginalColumn = mapping.originalColumn;\n\n          if (segment.length > 4) {\n            // Original name.\n            mapping.name = previousName + segment[4];\n            previousName += segment[4];\n          }\n        }\n\n        generatedMappings.push(mapping);\n        if (typeof mapping.originalLine === 'number') {\n          originalMappings.push(mapping);\n        }\n      }\n    }\n\n    quickSort(generatedMappings, util.compareByGeneratedPositionsDeflated);\n    this.__generatedMappings = generatedMappings;\n\n    quickSort(originalMappings, util.compareByOriginalPositions);\n    this.__originalMappings = originalMappings;\n  };\n\n/**\n * Find the mapping that best matches the hypothetical \"needle\" mapping that\n * we are searching for in the given \"haystack\" of mappings.\n */\nBasicSourceMapConsumer.prototype._findMapping =\n  function SourceMapConsumer_findMapping(aNeedle, aMappings, aLineName,\n                                         aColumnName, aComparator, aBias) {\n    // To return the position we are searching for, we must first find the\n    // mapping for the given position and then return the opposite position it\n    // points to. Because the mappings are sorted, we can use binary search to\n    // find the best mapping.\n\n    if (aNeedle[aLineName] <= 0) {\n      throw new TypeError('Line must be greater than or equal to 1, got '\n                          + aNeedle[aLineName]);\n    }\n    if (aNeedle[aColumnName] < 0) {\n      throw new TypeError('Column must be greater than or equal to 0, got '\n                          + aNeedle[aColumnName]);\n    }\n\n    return binarySearch.search(aNeedle, aMappings, aComparator, aBias);\n  };\n\n/**\n * Compute the last column for each generated mapping. The last column is\n * inclusive.\n */\nBasicSourceMapConsumer.prototype.computeColumnSpans =\n  function SourceMapConsumer_computeColumnSpans() {\n    for (var index = 0; index < this._generatedMappings.length; ++index) {\n      var mapping = this._generatedMappings[index];\n\n      // Mappings do not contain a field for the last generated columnt. We\n      // can come up with an optimistic estimate, however, by assuming that\n      // mappings are contiguous (i.e. given two consecutive mappings, the\n      // first mapping ends where the second one starts).\n      if (index + 1 < this._generatedMappings.length) {\n        var nextMapping = this._generatedMappings[index + 1];\n\n        if (mapping.generatedLine === nextMapping.generatedLine) {\n          mapping.lastGeneratedColumn = nextMapping.generatedColumn - 1;\n          continue;\n        }\n      }\n\n      // The last mapping for each line spans the entire line.\n      mapping.lastGeneratedColumn = Infinity;\n    }\n  };\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nBasicSourceMapConsumer.prototype.originalPositionFor =\n  function SourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._generatedMappings,\n      \"generatedLine\",\n      \"generatedColumn\",\n      util.compareByGeneratedPositionsDeflated,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._generatedMappings[index];\n\n      if (mapping.generatedLine === needle.generatedLine) {\n        var source = util.getArg(mapping, 'source', null);\n        if (source !== null) {\n          source = this._sources.at(source);\n          source = util.computeSourceURL(this.sourceRoot, source, this._sourceMapURL);\n        }\n        var name = util.getArg(mapping, 'name', null);\n        if (name !== null) {\n          name = this._names.at(name);\n        }\n        return {\n          source: source,\n          line: util.getArg(mapping, 'originalLine', null),\n          column: util.getArg(mapping, 'originalColumn', null),\n          name: name\n        };\n      }\n    }\n\n    return {\n      source: null,\n      line: null,\n      column: null,\n      name: null\n    };\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nBasicSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function BasicSourceMapConsumer_hasContentsOfAllSources() {\n    if (!this.sourcesContent) {\n      return false;\n    }\n    return this.sourcesContent.length >= this._sources.size() &&\n      !this.sourcesContent.some(function (sc) { return sc == null; });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nBasicSourceMapConsumer.prototype.sourceContentFor =\n  function SourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    if (!this.sourcesContent) {\n      return null;\n    }\n\n    var index = this._findSourceIndex(aSource);\n    if (index >= 0) {\n      return this.sourcesContent[index];\n    }\n\n    var relativeSource = aSource;\n    if (this.sourceRoot != null) {\n      relativeSource = util.relative(this.sourceRoot, relativeSource);\n    }\n\n    var url;\n    if (this.sourceRoot != null\n        && (url = util.urlParse(this.sourceRoot))) {\n      // XXX: file:// URIs and absolute paths lead to unexpected behavior for\n      // many users. We can help them out when they expect file:// URIs to\n      // behave like it would if they were running a local HTTP server. See\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=885597.\n      var fileUriAbsPath = relativeSource.replace(/^file:\\/\\//, \"\");\n      if (url.scheme == \"file\"\n          && this._sources.has(fileUriAbsPath)) {\n        return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]\n      }\n\n      if ((!url.path || url.path == \"/\")\n          && this._sources.has(\"/\" + relativeSource)) {\n        return this.sourcesContent[this._sources.indexOf(\"/\" + relativeSource)];\n      }\n    }\n\n    // This function is used recursively from\n    // IndexedSourceMapConsumer.prototype.sourceContentFor. In that case, we\n    // don't want to throw if we can't find the source - we just want to\n    // return null, so we provide a flag to exit gracefully.\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + relativeSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *   - bias: Either 'SourceMapConsumer.GREATEST_LOWER_BOUND' or\n *     'SourceMapConsumer.LEAST_UPPER_BOUND'. Specifies whether to return the\n *     closest element that is smaller than or greater than the one we are\n *     searching for, respectively, if the exact element cannot be found.\n *     Defaults to 'SourceMapConsumer.GREATEST_LOWER_BOUND'.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nBasicSourceMapConsumer.prototype.generatedPositionFor =\n  function SourceMapConsumer_generatedPositionFor(aArgs) {\n    var source = util.getArg(aArgs, 'source');\n    source = this._findSourceIndex(source);\n    if (source < 0) {\n      return {\n        line: null,\n        column: null,\n        lastColumn: null\n      };\n    }\n\n    var needle = {\n      source: source,\n      originalLine: util.getArg(aArgs, 'line'),\n      originalColumn: util.getArg(aArgs, 'column')\n    };\n\n    var index = this._findMapping(\n      needle,\n      this._originalMappings,\n      \"originalLine\",\n      \"originalColumn\",\n      util.compareByOriginalPositions,\n      util.getArg(aArgs, 'bias', SourceMapConsumer.GREATEST_LOWER_BOUND)\n    );\n\n    if (index >= 0) {\n      var mapping = this._originalMappings[index];\n\n      if (mapping.source === needle.source) {\n        return {\n          line: util.getArg(mapping, 'generatedLine', null),\n          column: util.getArg(mapping, 'generatedColumn', null),\n          lastColumn: util.getArg(mapping, 'lastGeneratedColumn', null)\n        };\n      }\n    }\n\n    return {\n      line: null,\n      column: null,\n      lastColumn: null\n    };\n  };\n\nexports.BasicSourceMapConsumer = BasicSourceMapConsumer;\n\n/**\n * An IndexedSourceMapConsumer instance represents a parsed source map which\n * we can query for information. It differs from BasicSourceMapConsumer in\n * that it takes \"indexed\" source maps (i.e. ones with a \"sections\" field) as\n * input.\n *\n * The first parameter is a raw source map (either as a JSON string, or already\n * parsed to an object). According to the spec for indexed source maps, they\n * have the following attributes:\n *\n *   - version: Which version of the source map spec this map is following.\n *   - file: Optional. The generated file this source map is associated with.\n *   - sections: A list of section definitions.\n *\n * Each value under the \"sections\" field has two fields:\n *   - offset: The offset into the original specified at which this section\n *       begins to apply, defined as an object with a \"line\" and \"column\"\n *       field.\n *   - map: A source map definition. This source map could also be indexed,\n *       but doesn't have to be.\n *\n * Instead of the \"map\" field, it's also possible to have a \"url\" field\n * specifying a URL to retrieve a source map from, but that's currently\n * unsupported.\n *\n * Here's an example source map, taken from the source map spec[0], but\n * modified to omit a section which uses the \"url\" field.\n *\n *  {\n *    version : 3,\n *    file: \"app.js\",\n *    sections: [{\n *      offset: {line:100, column:10},\n *      map: {\n *        version : 3,\n *        file: \"section.js\",\n *        sources: [\"foo.js\", \"bar.js\"],\n *        names: [\"src\", \"maps\", \"are\", \"fun\"],\n *        mappings: \"AAAA,E;;ABCDE;\"\n *      }\n *    }],\n *  }\n *\n * The second parameter, if given, is a string whose value is the URL\n * at which the source map was found.  This URL is used to compute the\n * sources array.\n *\n * [0]: https://docs.google.com/document/d/1U1RGAehQwRypUTovF1KRlpiOFze0b-_2gc6fAH0KY0k/edit#heading=h.535es3xeprgt\n */\nfunction IndexedSourceMapConsumer(aSourceMap, aSourceMapURL) {\n  var sourceMap = aSourceMap;\n  if (typeof aSourceMap === 'string') {\n    sourceMap = util.parseSourceMapInput(aSourceMap);\n  }\n\n  var version = util.getArg(sourceMap, 'version');\n  var sections = util.getArg(sourceMap, 'sections');\n\n  if (version != this._version) {\n    throw new Error('Unsupported version: ' + version);\n  }\n\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n\n  var lastOffset = {\n    line: -1,\n    column: 0\n  };\n  this._sections = sections.map(function (s) {\n    if (s.url) {\n      // The url field will require support for asynchronicity.\n      // See https://github.com/mozilla/source-map/issues/16\n      throw new Error('Support for url field in sections not implemented.');\n    }\n    var offset = util.getArg(s, 'offset');\n    var offsetLine = util.getArg(offset, 'line');\n    var offsetColumn = util.getArg(offset, 'column');\n\n    if (offsetLine < lastOffset.line ||\n        (offsetLine === lastOffset.line && offsetColumn < lastOffset.column)) {\n      throw new Error('Section offsets must be ordered and non-overlapping.');\n    }\n    lastOffset = offset;\n\n    return {\n      generatedOffset: {\n        // The offset fields are 0-based, but we use 1-based indices when\n        // encoding/decoding from VLQ.\n        generatedLine: offsetLine + 1,\n        generatedColumn: offsetColumn + 1\n      },\n      consumer: new SourceMapConsumer(util.getArg(s, 'map'), aSourceMapURL)\n    }\n  });\n}\n\nIndexedSourceMapConsumer.prototype = Object.create(SourceMapConsumer.prototype);\nIndexedSourceMapConsumer.prototype.constructor = SourceMapConsumer;\n\n/**\n * The version of the source mapping spec that we are consuming.\n */\nIndexedSourceMapConsumer.prototype._version = 3;\n\n/**\n * The list of original sources.\n */\nObject.defineProperty(IndexedSourceMapConsumer.prototype, 'sources', {\n  get: function () {\n    var sources = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      for (var j = 0; j < this._sections[i].consumer.sources.length; j++) {\n        sources.push(this._sections[i].consumer.sources[j]);\n      }\n    }\n    return sources;\n  }\n});\n\n/**\n * Returns the original source, line, and column information for the generated\n * source's line and column positions provided. The only argument is an object\n * with the following properties:\n *\n *   - line: The line number in the generated source.  The line number\n *     is 1-based.\n *   - column: The column number in the generated source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - source: The original source file, or null.\n *   - line: The line number in the original source, or null.  The\n *     line number is 1-based.\n *   - column: The column number in the original source, or null.  The\n *     column number is 0-based.\n *   - name: The original identifier, or null.\n */\nIndexedSourceMapConsumer.prototype.originalPositionFor =\n  function IndexedSourceMapConsumer_originalPositionFor(aArgs) {\n    var needle = {\n      generatedLine: util.getArg(aArgs, 'line'),\n      generatedColumn: util.getArg(aArgs, 'column')\n    };\n\n    // Find the section containing the generated position we're trying to map\n    // to an original position.\n    var sectionIndex = binarySearch.search(needle, this._sections,\n      function(needle, section) {\n        var cmp = needle.generatedLine - section.generatedOffset.generatedLine;\n        if (cmp) {\n          return cmp;\n        }\n\n        return (needle.generatedColumn -\n                section.generatedOffset.generatedColumn);\n      });\n    var section = this._sections[sectionIndex];\n\n    if (!section) {\n      return {\n        source: null,\n        line: null,\n        column: null,\n        name: null\n      };\n    }\n\n    return section.consumer.originalPositionFor({\n      line: needle.generatedLine -\n        (section.generatedOffset.generatedLine - 1),\n      column: needle.generatedColumn -\n        (section.generatedOffset.generatedLine === needle.generatedLine\n         ? section.generatedOffset.generatedColumn - 1\n         : 0),\n      bias: aArgs.bias\n    });\n  };\n\n/**\n * Return true if we have the source content for every source in the source\n * map, false otherwise.\n */\nIndexedSourceMapConsumer.prototype.hasContentsOfAllSources =\n  function IndexedSourceMapConsumer_hasContentsOfAllSources() {\n    return this._sections.every(function (s) {\n      return s.consumer.hasContentsOfAllSources();\n    });\n  };\n\n/**\n * Returns the original source content. The only argument is the url of the\n * original source file. Returns null if no original source content is\n * available.\n */\nIndexedSourceMapConsumer.prototype.sourceContentFor =\n  function IndexedSourceMapConsumer_sourceContentFor(aSource, nullOnMissing) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      var content = section.consumer.sourceContentFor(aSource, true);\n      if (content) {\n        return content;\n      }\n    }\n    if (nullOnMissing) {\n      return null;\n    }\n    else {\n      throw new Error('\"' + aSource + '\" is not in the SourceMap.');\n    }\n  };\n\n/**\n * Returns the generated line and column information for the original source,\n * line, and column positions provided. The only argument is an object with\n * the following properties:\n *\n *   - source: The filename of the original source.\n *   - line: The line number in the original source.  The line number\n *     is 1-based.\n *   - column: The column number in the original source.  The column\n *     number is 0-based.\n *\n * and an object is returned with the following properties:\n *\n *   - line: The line number in the generated source, or null.  The\n *     line number is 1-based. \n *   - column: The column number in the generated source, or null.\n *     The column number is 0-based.\n */\nIndexedSourceMapConsumer.prototype.generatedPositionFor =\n  function IndexedSourceMapConsumer_generatedPositionFor(aArgs) {\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n\n      // Only consider this section if the requested source is in the list of\n      // sources of the consumer.\n      if (section.consumer._findSourceIndex(util.getArg(aArgs, 'source')) === -1) {\n        continue;\n      }\n      var generatedPosition = section.consumer.generatedPositionFor(aArgs);\n      if (generatedPosition) {\n        var ret = {\n          line: generatedPosition.line +\n            (section.generatedOffset.generatedLine - 1),\n          column: generatedPosition.column +\n            (section.generatedOffset.generatedLine === generatedPosition.line\n             ? section.generatedOffset.generatedColumn - 1\n             : 0)\n        };\n        return ret;\n      }\n    }\n\n    return {\n      line: null,\n      column: null\n    };\n  };\n\n/**\n * Parse the mappings in a string in to a data structure which we can easily\n * query (the ordered arrays in the `this.__generatedMappings` and\n * `this.__originalMappings` properties).\n */\nIndexedSourceMapConsumer.prototype._parseMappings =\n  function IndexedSourceMapConsumer_parseMappings(aStr, aSourceRoot) {\n    this.__generatedMappings = [];\n    this.__originalMappings = [];\n    for (var i = 0; i < this._sections.length; i++) {\n      var section = this._sections[i];\n      var sectionMappings = section.consumer._generatedMappings;\n      for (var j = 0; j < sectionMappings.length; j++) {\n        var mapping = sectionMappings[j];\n\n        var source = section.consumer._sources.at(mapping.source);\n        source = util.computeSourceURL(section.consumer.sourceRoot, source, this._sourceMapURL);\n        this._sources.add(source);\n        source = this._sources.indexOf(source);\n\n        var name = null;\n        if (mapping.name) {\n          name = section.consumer._names.at(mapping.name);\n          this._names.add(name);\n          name = this._names.indexOf(name);\n        }\n\n        // The mappings coming from the consumer for the section have\n        // generated positions relative to the start of the section, so we\n        // need to offset them to be relative to the start of the concatenated\n        // generated file.\n        var adjustedMapping = {\n          source: source,\n          generatedLine: mapping.generatedLine +\n            (section.generatedOffset.generatedLine - 1),\n          generatedColumn: mapping.generatedColumn +\n            (section.generatedOffset.generatedLine === mapping.generatedLine\n            ? section.generatedOffset.generatedColumn - 1\n            : 0),\n          originalLine: mapping.originalLine,\n          originalColumn: mapping.originalColumn,\n          name: name\n        };\n\n        this.__generatedMappings.push(adjustedMapping);\n        if (typeof adjustedMapping.originalLine === 'number') {\n          this.__originalMappings.push(adjustedMapping);\n        }\n      }\n    }\n\n    quickSort(this.__generatedMappings, util.compareByGeneratedPositionsDeflated);\n    quickSort(this.__originalMappings, util.compareByOriginalPositions);\n  };\n\nexports.IndexedSourceMapConsumer = IndexedSourceMapConsumer;\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar base64VLQ = require('./base64-vlq');\nvar util = require('./util');\nvar ArraySet = require('./array-set').ArraySet;\nvar MappingList = require('./mapping-list').MappingList;\n\n/**\n * An instance of the SourceMapGenerator represents a source map which is\n * being built incrementally. You may pass an object with the following\n * properties:\n *\n *   - file: The filename of the generated source.\n *   - sourceRoot: A root for all relative URLs in this source map.\n */\nfunction SourceMapGenerator(aArgs) {\n  if (!aArgs) {\n    aArgs = {};\n  }\n  this._file = util.getArg(aArgs, 'file', null);\n  this._sourceRoot = util.getArg(aArgs, 'sourceRoot', null);\n  this._skipValidation = util.getArg(aArgs, 'skipValidation', false);\n  this._sources = new ArraySet();\n  this._names = new ArraySet();\n  this._mappings = new MappingList();\n  this._sourcesContents = null;\n}\n\nSourceMapGenerator.prototype._version = 3;\n\n/**\n * Creates a new SourceMapGenerator based on a SourceMapConsumer\n *\n * @param aSourceMapConsumer The SourceMap.\n */\nSourceMapGenerator.fromSourceMap =\n  function SourceMapGenerator_fromSourceMap(aSourceMapConsumer) {\n    var sourceRoot = aSourceMapConsumer.sourceRoot;\n    var generator = new SourceMapGenerator({\n      file: aSourceMapConsumer.file,\n      sourceRoot: sourceRoot\n    });\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      var newMapping = {\n        generated: {\n          line: mapping.generatedLine,\n          column: mapping.generatedColumn\n        }\n      };\n\n      if (mapping.source != null) {\n        newMapping.source = mapping.source;\n        if (sourceRoot != null) {\n          newMapping.source = util.relative(sourceRoot, newMapping.source);\n        }\n\n        newMapping.original = {\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        };\n\n        if (mapping.name != null) {\n          newMapping.name = mapping.name;\n        }\n      }\n\n      generator.addMapping(newMapping);\n    });\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var sourceRelative = sourceFile;\n      if (sourceRoot !== null) {\n        sourceRelative = util.relative(sourceRoot, sourceFile);\n      }\n\n      if (!generator._sources.has(sourceRelative)) {\n        generator._sources.add(sourceRelative);\n      }\n\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        generator.setSourceContent(sourceFile, content);\n      }\n    });\n    return generator;\n  };\n\n/**\n * Add a single mapping from original source line and column to the generated\n * source's line and column for this source map being created. The mapping\n * object should have the following properties:\n *\n *   - generated: An object with the generated line and column positions.\n *   - original: An object with the original line and column positions.\n *   - source: The original source file (relative to the sourceRoot).\n *   - name: An optional original token name for this mapping.\n */\nSourceMapGenerator.prototype.addMapping =\n  function SourceMapGenerator_addMapping(aArgs) {\n    var generated = util.getArg(aArgs, 'generated');\n    var original = util.getArg(aArgs, 'original', null);\n    var source = util.getArg(aArgs, 'source', null);\n    var name = util.getArg(aArgs, 'name', null);\n\n    if (!this._skipValidation) {\n      this._validateMapping(generated, original, source, name);\n    }\n\n    if (source != null) {\n      source = String(source);\n      if (!this._sources.has(source)) {\n        this._sources.add(source);\n      }\n    }\n\n    if (name != null) {\n      name = String(name);\n      if (!this._names.has(name)) {\n        this._names.add(name);\n      }\n    }\n\n    this._mappings.add({\n      generatedLine: generated.line,\n      generatedColumn: generated.column,\n      originalLine: original != null && original.line,\n      originalColumn: original != null && original.column,\n      source: source,\n      name: name\n    });\n  };\n\n/**\n * Set the source content for a source file.\n */\nSourceMapGenerator.prototype.setSourceContent =\n  function SourceMapGenerator_setSourceContent(aSourceFile, aSourceContent) {\n    var source = aSourceFile;\n    if (this._sourceRoot != null) {\n      source = util.relative(this._sourceRoot, source);\n    }\n\n    if (aSourceContent != null) {\n      // Add the source content to the _sourcesContents map.\n      // Create a new _sourcesContents map if the property is null.\n      if (!this._sourcesContents) {\n        this._sourcesContents = Object.create(null);\n      }\n      this._sourcesContents[util.toSetString(source)] = aSourceContent;\n    } else if (this._sourcesContents) {\n      // Remove the source file from the _sourcesContents map.\n      // If the _sourcesContents map is empty, set the property to null.\n      delete this._sourcesContents[util.toSetString(source)];\n      if (Object.keys(this._sourcesContents).length === 0) {\n        this._sourcesContents = null;\n      }\n    }\n  };\n\n/**\n * Applies the mappings of a sub-source-map for a specific source file to the\n * source map being generated. Each mapping to the supplied source file is\n * rewritten using the supplied source map. Note: The resolution for the\n * resulting mappings is the minimium of this map and the supplied map.\n *\n * @param aSourceMapConsumer The source map to be applied.\n * @param aSourceFile Optional. The filename of the source file.\n *        If omitted, SourceMapConsumer's file property will be used.\n * @param aSourceMapPath Optional. The dirname of the path to the source map\n *        to be applied. If relative, it is relative to the SourceMapConsumer.\n *        This parameter is needed when the two source maps aren't in the same\n *        directory, and the source map to be applied contains relative source\n *        paths. If so, those relative source paths need to be rewritten\n *        relative to the SourceMapGenerator.\n */\nSourceMapGenerator.prototype.applySourceMap =\n  function SourceMapGenerator_applySourceMap(aSourceMapConsumer, aSourceFile, aSourceMapPath) {\n    var sourceFile = aSourceFile;\n    // If aSourceFile is omitted, we will use the file property of the SourceMap\n    if (aSourceFile == null) {\n      if (aSourceMapConsumer.file == null) {\n        throw new Error(\n          'SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, ' +\n          'or the source map\\'s \"file\" property. Both were omitted.'\n        );\n      }\n      sourceFile = aSourceMapConsumer.file;\n    }\n    var sourceRoot = this._sourceRoot;\n    // Make \"sourceFile\" relative if an absolute Url is passed.\n    if (sourceRoot != null) {\n      sourceFile = util.relative(sourceRoot, sourceFile);\n    }\n    // Applying the SourceMap can add and remove items from the sources and\n    // the names array.\n    var newSources = new ArraySet();\n    var newNames = new ArraySet();\n\n    // Find mappings for the \"sourceFile\"\n    this._mappings.unsortedForEach(function (mapping) {\n      if (mapping.source === sourceFile && mapping.originalLine != null) {\n        // Check if it can be mapped by the source map, then update the mapping.\n        var original = aSourceMapConsumer.originalPositionFor({\n          line: mapping.originalLine,\n          column: mapping.originalColumn\n        });\n        if (original.source != null) {\n          // Copy mapping\n          mapping.source = original.source;\n          if (aSourceMapPath != null) {\n            mapping.source = util.join(aSourceMapPath, mapping.source)\n          }\n          if (sourceRoot != null) {\n            mapping.source = util.relative(sourceRoot, mapping.source);\n          }\n          mapping.originalLine = original.line;\n          mapping.originalColumn = original.column;\n          if (original.name != null) {\n            mapping.name = original.name;\n          }\n        }\n      }\n\n      var source = mapping.source;\n      if (source != null && !newSources.has(source)) {\n        newSources.add(source);\n      }\n\n      var name = mapping.name;\n      if (name != null && !newNames.has(name)) {\n        newNames.add(name);\n      }\n\n    }, this);\n    this._sources = newSources;\n    this._names = newNames;\n\n    // Copy sourcesContents of applied map.\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aSourceMapPath != null) {\n          sourceFile = util.join(aSourceMapPath, sourceFile);\n        }\n        if (sourceRoot != null) {\n          sourceFile = util.relative(sourceRoot, sourceFile);\n        }\n        this.setSourceContent(sourceFile, content);\n      }\n    }, this);\n  };\n\n/**\n * A mapping can have one of the three levels of data:\n *\n *   1. Just the generated position.\n *   2. The Generated position, original position, and original source.\n *   3. Generated and original position, original source, as well as a name\n *      token.\n *\n * To maintain consistency, we validate that any new mapping being added falls\n * in to one of these categories.\n */\nSourceMapGenerator.prototype._validateMapping =\n  function SourceMapGenerator_validateMapping(aGenerated, aOriginal, aSource,\n                                              aName) {\n    // When aOriginal is truthy but has empty values for .line and .column,\n    // it is most likely a programmer error. In this case we throw a very\n    // specific error message to try to guide them the right way.\n    // For example: https://github.com/Polymer/polymer-bundler/pull/519\n    if (aOriginal && typeof aOriginal.line !== 'number' && typeof aOriginal.column !== 'number') {\n        throw new Error(\n            'original.line and original.column are not numbers -- you probably meant to omit ' +\n            'the original mapping entirely and only map the generated position. If so, pass ' +\n            'null for the original mapping instead of an object with empty or null values.'\n        );\n    }\n\n    if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n        && aGenerated.line > 0 && aGenerated.column >= 0\n        && !aOriginal && !aSource && !aName) {\n      // Case 1.\n      return;\n    }\n    else if (aGenerated && 'line' in aGenerated && 'column' in aGenerated\n             && aOriginal && 'line' in aOriginal && 'column' in aOriginal\n             && aGenerated.line > 0 && aGenerated.column >= 0\n             && aOriginal.line > 0 && aOriginal.column >= 0\n             && aSource) {\n      // Cases 2 and 3.\n      return;\n    }\n    else {\n      throw new Error('Invalid mapping: ' + JSON.stringify({\n        generated: aGenerated,\n        source: aSource,\n        original: aOriginal,\n        name: aName\n      }));\n    }\n  };\n\n/**\n * Serialize the accumulated mappings in to the stream of base 64 VLQs\n * specified by the source map format.\n */\nSourceMapGenerator.prototype._serializeMappings =\n  function SourceMapGenerator_serializeMappings() {\n    var previousGeneratedColumn = 0;\n    var previousGeneratedLine = 1;\n    var previousOriginalColumn = 0;\n    var previousOriginalLine = 0;\n    var previousName = 0;\n    var previousSource = 0;\n    var result = '';\n    var next;\n    var mapping;\n    var nameIdx;\n    var sourceIdx;\n\n    var mappings = this._mappings.toArray();\n    for (var i = 0, len = mappings.length; i < len; i++) {\n      mapping = mappings[i];\n      next = ''\n\n      if (mapping.generatedLine !== previousGeneratedLine) {\n        previousGeneratedColumn = 0;\n        while (mapping.generatedLine !== previousGeneratedLine) {\n          next += ';';\n          previousGeneratedLine++;\n        }\n      }\n      else {\n        if (i > 0) {\n          if (!util.compareByGeneratedPositionsInflated(mapping, mappings[i - 1])) {\n            continue;\n          }\n          next += ',';\n        }\n      }\n\n      next += base64VLQ.encode(mapping.generatedColumn\n                                 - previousGeneratedColumn);\n      previousGeneratedColumn = mapping.generatedColumn;\n\n      if (mapping.source != null) {\n        sourceIdx = this._sources.indexOf(mapping.source);\n        next += base64VLQ.encode(sourceIdx - previousSource);\n        previousSource = sourceIdx;\n\n        // lines are stored 0-based in SourceMap spec version 3\n        next += base64VLQ.encode(mapping.originalLine - 1\n                                   - previousOriginalLine);\n        previousOriginalLine = mapping.originalLine - 1;\n\n        next += base64VLQ.encode(mapping.originalColumn\n                                   - previousOriginalColumn);\n        previousOriginalColumn = mapping.originalColumn;\n\n        if (mapping.name != null) {\n          nameIdx = this._names.indexOf(mapping.name);\n          next += base64VLQ.encode(nameIdx - previousName);\n          previousName = nameIdx;\n        }\n      }\n\n      result += next;\n    }\n\n    return result;\n  };\n\nSourceMapGenerator.prototype._generateSourcesContent =\n  function SourceMapGenerator_generateSourcesContent(aSources, aSourceRoot) {\n    return aSources.map(function (source) {\n      if (!this._sourcesContents) {\n        return null;\n      }\n      if (aSourceRoot != null) {\n        source = util.relative(aSourceRoot, source);\n      }\n      var key = util.toSetString(source);\n      return Object.prototype.hasOwnProperty.call(this._sourcesContents, key)\n        ? this._sourcesContents[key]\n        : null;\n    }, this);\n  };\n\n/**\n * Externalize the source map.\n */\nSourceMapGenerator.prototype.toJSON =\n  function SourceMapGenerator_toJSON() {\n    var map = {\n      version: this._version,\n      sources: this._sources.toArray(),\n      names: this._names.toArray(),\n      mappings: this._serializeMappings()\n    };\n    if (this._file != null) {\n      map.file = this._file;\n    }\n    if (this._sourceRoot != null) {\n      map.sourceRoot = this._sourceRoot;\n    }\n    if (this._sourcesContents) {\n      map.sourcesContent = this._generateSourcesContent(map.sources, map.sourceRoot);\n    }\n\n    return map;\n  };\n\n/**\n * Render the source map being generated to a string.\n */\nSourceMapGenerator.prototype.toString =\n  function SourceMapGenerator_toString() {\n    return JSON.stringify(this.toJSON());\n  };\n\nexports.SourceMapGenerator = SourceMapGenerator;\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\nvar SourceMapGenerator = require('./source-map-generator').SourceMapGenerator;\nvar util = require('./util');\n\n// Matches a Windows-style `\\r\\n` newline or a `\\n` newline used by all other\n// operating systems these days (capturing the result).\nvar REGEX_NEWLINE = /(\\r?\\n)/;\n\n// Newline character code for charCodeAt() comparisons\nvar NEWLINE_CODE = 10;\n\n// Private symbol for identifying `SourceNode`s when multiple versions of\n// the source-map library are loaded. This MUST NOT CHANGE across\n// versions!\nvar isSourceNode = \"$$$isSourceNode$$$\";\n\n/**\n * SourceNodes provide a way to abstract over interpolating/concatenating\n * snippets of generated JavaScript source code while maintaining the line and\n * column information associated with the original source code.\n *\n * @param aLine The original line number.\n * @param aColumn The original column number.\n * @param aSource The original source's filename.\n * @param aChunks Optional. An array of strings which are snippets of\n *        generated JS, or other SourceNodes.\n * @param aName The original identifier.\n */\nfunction SourceNode(aLine, aColumn, aSource, aChunks, aName) {\n  this.children = [];\n  this.sourceContents = {};\n  this.line = aLine == null ? null : aLine;\n  this.column = aColumn == null ? null : aColumn;\n  this.source = aSource == null ? null : aSource;\n  this.name = aName == null ? null : aName;\n  this[isSourceNode] = true;\n  if (aChunks != null) this.add(aChunks);\n}\n\n/**\n * Creates a SourceNode from generated code and a SourceMapConsumer.\n *\n * @param aGeneratedCode The generated code\n * @param aSourceMapConsumer The SourceMap for the generated code\n * @param aRelativePath Optional. The path that relative sources in the\n *        SourceMapConsumer should be relative to.\n */\nSourceNode.fromStringWithSourceMap =\n  function SourceNode_fromStringWithSourceMap(aGeneratedCode, aSourceMapConsumer, aRelativePath) {\n    // The SourceNode we want to fill with the generated code\n    // and the SourceMap\n    var node = new SourceNode();\n\n    // All even indices of this array are one line of the generated code,\n    // while all odd indices are the newlines between two adjacent lines\n    // (since `REGEX_NEWLINE` captures its match).\n    // Processed fragments are accessed by calling `shiftNextLine`.\n    var remainingLines = aGeneratedCode.split(REGEX_NEWLINE);\n    var remainingLinesIndex = 0;\n    var shiftNextLine = function() {\n      var lineContents = getNextLine();\n      // The last line of a file might not have a newline.\n      var newLine = getNextLine() || \"\";\n      return lineContents + newLine;\n\n      function getNextLine() {\n        return remainingLinesIndex < remainingLines.length ?\n            remainingLines[remainingLinesIndex++] : undefined;\n      }\n    };\n\n    // We need to remember the position of \"remainingLines\"\n    var lastGeneratedLine = 1, lastGeneratedColumn = 0;\n\n    // The generate SourceNodes we need a code range.\n    // To extract it current and last mapping is used.\n    // Here we store the last mapping.\n    var lastMapping = null;\n\n    aSourceMapConsumer.eachMapping(function (mapping) {\n      if (lastMapping !== null) {\n        // We add the code from \"lastMapping\" to \"mapping\":\n        // First check if there is a new line in between.\n        if (lastGeneratedLine < mapping.generatedLine) {\n          // Associate first line with \"lastMapping\"\n          addMappingWithCode(lastMapping, shiftNextLine());\n          lastGeneratedLine++;\n          lastGeneratedColumn = 0;\n          // The remaining code is added without mapping\n        } else {\n          // There is no new line in between.\n          // Associate the code between \"lastGeneratedColumn\" and\n          // \"mapping.generatedColumn\" with \"lastMapping\"\n          var nextLine = remainingLines[remainingLinesIndex] || '';\n          var code = nextLine.substr(0, mapping.generatedColumn -\n                                        lastGeneratedColumn);\n          remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn -\n                                              lastGeneratedColumn);\n          lastGeneratedColumn = mapping.generatedColumn;\n          addMappingWithCode(lastMapping, code);\n          // No more remaining code, continue\n          lastMapping = mapping;\n          return;\n        }\n      }\n      // We add the generated code until the first mapping\n      // to the SourceNode without any mapping.\n      // Each line is added as separate string.\n      while (lastGeneratedLine < mapping.generatedLine) {\n        node.add(shiftNextLine());\n        lastGeneratedLine++;\n      }\n      if (lastGeneratedColumn < mapping.generatedColumn) {\n        var nextLine = remainingLines[remainingLinesIndex] || '';\n        node.add(nextLine.substr(0, mapping.generatedColumn));\n        remainingLines[remainingLinesIndex] = nextLine.substr(mapping.generatedColumn);\n        lastGeneratedColumn = mapping.generatedColumn;\n      }\n      lastMapping = mapping;\n    }, this);\n    // We have processed all mappings.\n    if (remainingLinesIndex < remainingLines.length) {\n      if (lastMapping) {\n        // Associate the remaining code in the current line with \"lastMapping\"\n        addMappingWithCode(lastMapping, shiftNextLine());\n      }\n      // and add the remaining lines without any mapping\n      node.add(remainingLines.splice(remainingLinesIndex).join(\"\"));\n    }\n\n    // Copy sourcesContent into SourceNode\n    aSourceMapConsumer.sources.forEach(function (sourceFile) {\n      var content = aSourceMapConsumer.sourceContentFor(sourceFile);\n      if (content != null) {\n        if (aRelativePath != null) {\n          sourceFile = util.join(aRelativePath, sourceFile);\n        }\n        node.setSourceContent(sourceFile, content);\n      }\n    });\n\n    return node;\n\n    function addMappingWithCode(mapping, code) {\n      if (mapping === null || mapping.source === undefined) {\n        node.add(code);\n      } else {\n        var source = aRelativePath\n          ? util.join(aRelativePath, mapping.source)\n          : mapping.source;\n        node.add(new SourceNode(mapping.originalLine,\n                                mapping.originalColumn,\n                                source,\n                                code,\n                                mapping.name));\n      }\n    }\n  };\n\n/**\n * Add a chunk of generated JS to this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.add = function SourceNode_add(aChunk) {\n  if (Array.isArray(aChunk)) {\n    aChunk.forEach(function (chunk) {\n      this.add(chunk);\n    }, this);\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    if (aChunk) {\n      this.children.push(aChunk);\n    }\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Add a chunk of generated JS to the beginning of this source node.\n *\n * @param aChunk A string snippet of generated JS code, another instance of\n *        SourceNode, or an array where each member is one of those things.\n */\nSourceNode.prototype.prepend = function SourceNode_prepend(aChunk) {\n  if (Array.isArray(aChunk)) {\n    for (var i = aChunk.length-1; i >= 0; i--) {\n      this.prepend(aChunk[i]);\n    }\n  }\n  else if (aChunk[isSourceNode] || typeof aChunk === \"string\") {\n    this.children.unshift(aChunk);\n  }\n  else {\n    throw new TypeError(\n      \"Expected a SourceNode, string, or an array of SourceNodes and strings. Got \" + aChunk\n    );\n  }\n  return this;\n};\n\n/**\n * Walk over the tree of JS snippets in this node and its children. The\n * walking function is called once for each snippet of JS and is passed that\n * snippet and the its original associated source's line/column location.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walk = function SourceNode_walk(aFn) {\n  var chunk;\n  for (var i = 0, len = this.children.length; i < len; i++) {\n    chunk = this.children[i];\n    if (chunk[isSourceNode]) {\n      chunk.walk(aFn);\n    }\n    else {\n      if (chunk !== '') {\n        aFn(chunk, { source: this.source,\n                     line: this.line,\n                     column: this.column,\n                     name: this.name });\n      }\n    }\n  }\n};\n\n/**\n * Like `String.prototype.join` except for SourceNodes. Inserts `aStr` between\n * each of `this.children`.\n *\n * @param aSep The separator.\n */\nSourceNode.prototype.join = function SourceNode_join(aSep) {\n  var newChildren;\n  var i;\n  var len = this.children.length;\n  if (len > 0) {\n    newChildren = [];\n    for (i = 0; i < len-1; i++) {\n      newChildren.push(this.children[i]);\n      newChildren.push(aSep);\n    }\n    newChildren.push(this.children[i]);\n    this.children = newChildren;\n  }\n  return this;\n};\n\n/**\n * Call String.prototype.replace on the very right-most source snippet. Useful\n * for trimming whitespace from the end of a source node, etc.\n *\n * @param aPattern The pattern to replace.\n * @param aReplacement The thing to replace the pattern with.\n */\nSourceNode.prototype.replaceRight = function SourceNode_replaceRight(aPattern, aReplacement) {\n  var lastChild = this.children[this.children.length - 1];\n  if (lastChild[isSourceNode]) {\n    lastChild.replaceRight(aPattern, aReplacement);\n  }\n  else if (typeof lastChild === 'string') {\n    this.children[this.children.length - 1] = lastChild.replace(aPattern, aReplacement);\n  }\n  else {\n    this.children.push(''.replace(aPattern, aReplacement));\n  }\n  return this;\n};\n\n/**\n * Set the source content for a source file. This will be added to the SourceMapGenerator\n * in the sourcesContent field.\n *\n * @param aSourceFile The filename of the source file\n * @param aSourceContent The content of the source file\n */\nSourceNode.prototype.setSourceContent =\n  function SourceNode_setSourceContent(aSourceFile, aSourceContent) {\n    this.sourceContents[util.toSetString(aSourceFile)] = aSourceContent;\n  };\n\n/**\n * Walk over the tree of SourceNodes. The walking function is called for each\n * source file content and is passed the filename and source content.\n *\n * @param aFn The traversal function.\n */\nSourceNode.prototype.walkSourceContents =\n  function SourceNode_walkSourceContents(aFn) {\n    for (var i = 0, len = this.children.length; i < len; i++) {\n      if (this.children[i][isSourceNode]) {\n        this.children[i].walkSourceContents(aFn);\n      }\n    }\n\n    var sources = Object.keys(this.sourceContents);\n    for (var i = 0, len = sources.length; i < len; i++) {\n      aFn(util.fromSetString(sources[i]), this.sourceContents[sources[i]]);\n    }\n  };\n\n/**\n * Return the string representation of this source node. Walks over the tree\n * and concatenates all the various snippets together to one string.\n */\nSourceNode.prototype.toString = function SourceNode_toString() {\n  var str = \"\";\n  this.walk(function (chunk) {\n    str += chunk;\n  });\n  return str;\n};\n\n/**\n * Returns the string representation of this source node along with a source\n * map.\n */\nSourceNode.prototype.toStringWithSourceMap = function SourceNode_toStringWithSourceMap(aArgs) {\n  var generated = {\n    code: \"\",\n    line: 1,\n    column: 0\n  };\n  var map = new SourceMapGenerator(aArgs);\n  var sourceMappingActive = false;\n  var lastOriginalSource = null;\n  var lastOriginalLine = null;\n  var lastOriginalColumn = null;\n  var lastOriginalName = null;\n  this.walk(function (chunk, original) {\n    generated.code += chunk;\n    if (original.source !== null\n        && original.line !== null\n        && original.column !== null) {\n      if(lastOriginalSource !== original.source\n         || lastOriginalLine !== original.line\n         || lastOriginalColumn !== original.column\n         || lastOriginalName !== original.name) {\n        map.addMapping({\n          source: original.source,\n          original: {\n            line: original.line,\n            column: original.column\n          },\n          generated: {\n            line: generated.line,\n            column: generated.column\n          },\n          name: original.name\n        });\n      }\n      lastOriginalSource = original.source;\n      lastOriginalLine = original.line;\n      lastOriginalColumn = original.column;\n      lastOriginalName = original.name;\n      sourceMappingActive = true;\n    } else if (sourceMappingActive) {\n      map.addMapping({\n        generated: {\n          line: generated.line,\n          column: generated.column\n        }\n      });\n      lastOriginalSource = null;\n      sourceMappingActive = false;\n    }\n    for (var idx = 0, length = chunk.length; idx < length; idx++) {\n      if (chunk.charCodeAt(idx) === NEWLINE_CODE) {\n        generated.line++;\n        generated.column = 0;\n        // Mappings end at eol\n        if (idx + 1 === length) {\n          lastOriginalSource = null;\n          sourceMappingActive = false;\n        } else if (sourceMappingActive) {\n          map.addMapping({\n            source: original.source,\n            original: {\n              line: original.line,\n              column: original.column\n            },\n            generated: {\n              line: generated.line,\n              column: generated.column\n            },\n            name: original.name\n          });\n        }\n      } else {\n        generated.column++;\n      }\n    }\n  });\n  this.walkSourceContents(function (sourceFile, sourceContent) {\n    map.setSourceContent(sourceFile, sourceContent);\n  });\n\n  return { code: generated.code, map: map };\n};\n\nexports.SourceNode = SourceNode;\n",
    "/* -*- Mode: js; js-indent-level: 2; -*- */\n/*\n * Copyright 2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\n\n/**\n * This is a helper function for getting values from parameter/options\n * objects.\n *\n * @param args The object we are extracting values from\n * @param name The name of the property we are getting.\n * @param defaultValue An optional value to return if the property is missing\n * from the object. If this is not specified and the property is missing, an\n * error will be thrown.\n */\nfunction getArg(aArgs, aName, aDefaultValue) {\n  if (aName in aArgs) {\n    return aArgs[aName];\n  } else if (arguments.length === 3) {\n    return aDefaultValue;\n  } else {\n    throw new Error('\"' + aName + '\" is a required argument.');\n  }\n}\nexports.getArg = getArg;\n\nvar urlRegexp = /^(?:([\\w+\\-.]+):)?\\/\\/(?:(\\w+:\\w+)@)?([\\w.-]*)(?::(\\d+))?(.*)$/;\nvar dataUrlRegexp = /^data:.+\\,.+$/;\n\nfunction urlParse(aUrl) {\n  var match = aUrl.match(urlRegexp);\n  if (!match) {\n    return null;\n  }\n  return {\n    scheme: match[1],\n    auth: match[2],\n    host: match[3],\n    port: match[4],\n    path: match[5]\n  };\n}\nexports.urlParse = urlParse;\n\nfunction urlGenerate(aParsedUrl) {\n  var url = '';\n  if (aParsedUrl.scheme) {\n    url += aParsedUrl.scheme + ':';\n  }\n  url += '//';\n  if (aParsedUrl.auth) {\n    url += aParsedUrl.auth + '@';\n  }\n  if (aParsedUrl.host) {\n    url += aParsedUrl.host;\n  }\n  if (aParsedUrl.port) {\n    url += \":\" + aParsedUrl.port\n  }\n  if (aParsedUrl.path) {\n    url += aParsedUrl.path;\n  }\n  return url;\n}\nexports.urlGenerate = urlGenerate;\n\n/**\n * Normalizes a path, or the path portion of a URL:\n *\n * - Replaces consecutive slashes with one slash.\n * - Removes unnecessary '.' parts.\n * - Removes unnecessary '<dir>/..' parts.\n *\n * Based on code in the Node.js 'path' core module.\n *\n * @param aPath The path or url to normalize.\n */\nfunction normalize(aPath) {\n  var path = aPath;\n  var url = urlParse(aPath);\n  if (url) {\n    if (!url.path) {\n      return aPath;\n    }\n    path = url.path;\n  }\n  var isAbsolute = exports.isAbsolute(path);\n\n  var parts = path.split(/\\/+/);\n  for (var part, up = 0, i = parts.length - 1; i >= 0; i--) {\n    part = parts[i];\n    if (part === '.') {\n      parts.splice(i, 1);\n    } else if (part === '..') {\n      up++;\n    } else if (up > 0) {\n      if (part === '') {\n        // The first part is blank if the path is absolute. Trying to go\n        // above the root is a no-op. Therefore we can remove all '..' parts\n        // directly after the root.\n        parts.splice(i + 1, up);\n        up = 0;\n      } else {\n        parts.splice(i, 2);\n        up--;\n      }\n    }\n  }\n  path = parts.join('/');\n\n  if (path === '') {\n    path = isAbsolute ? '/' : '.';\n  }\n\n  if (url) {\n    url.path = path;\n    return urlGenerate(url);\n  }\n  return path;\n}\nexports.normalize = normalize;\n\n/**\n * Joins two paths/URLs.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be joined with the root.\n *\n * - If aPath is a URL or a data URI, aPath is returned, unless aPath is a\n *   scheme-relative URL: Then the scheme of aRoot, if any, is prepended\n *   first.\n * - Otherwise aPath is a path. If aRoot is a URL, then its path portion\n *   is updated with the result and aRoot is returned. Otherwise the result\n *   is returned.\n *   - If aPath is absolute, the result is aPath.\n *   - Otherwise the two paths are joined with a slash.\n * - Joining for example 'http://' and 'www.example.com' is also supported.\n */\nfunction join(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n  if (aPath === \"\") {\n    aPath = \".\";\n  }\n  var aPathUrl = urlParse(aPath);\n  var aRootUrl = urlParse(aRoot);\n  if (aRootUrl) {\n    aRoot = aRootUrl.path || '/';\n  }\n\n  // `join(foo, '//www.example.org')`\n  if (aPathUrl && !aPathUrl.scheme) {\n    if (aRootUrl) {\n      aPathUrl.scheme = aRootUrl.scheme;\n    }\n    return urlGenerate(aPathUrl);\n  }\n\n  if (aPathUrl || aPath.match(dataUrlRegexp)) {\n    return aPath;\n  }\n\n  // `join('http://', 'www.example.com')`\n  if (aRootUrl && !aRootUrl.host && !aRootUrl.path) {\n    aRootUrl.host = aPath;\n    return urlGenerate(aRootUrl);\n  }\n\n  var joined = aPath.charAt(0) === '/'\n    ? aPath\n    : normalize(aRoot.replace(/\\/+$/, '') + '/' + aPath);\n\n  if (aRootUrl) {\n    aRootUrl.path = joined;\n    return urlGenerate(aRootUrl);\n  }\n  return joined;\n}\nexports.join = join;\n\nexports.isAbsolute = function (aPath) {\n  return aPath.charAt(0) === '/' || urlRegexp.test(aPath);\n};\n\n/**\n * Make a path relative to a URL or another path.\n *\n * @param aRoot The root path or URL.\n * @param aPath The path or URL to be made relative to aRoot.\n */\nfunction relative(aRoot, aPath) {\n  if (aRoot === \"\") {\n    aRoot = \".\";\n  }\n\n  aRoot = aRoot.replace(/\\/$/, '');\n\n  // It is possible for the path to be above the root. In this case, simply\n  // checking whether the root is a prefix of the path won't work. Instead, we\n  // need to remove components from the root one by one, until either we find\n  // a prefix that fits, or we run out of components to remove.\n  var level = 0;\n  while (aPath.indexOf(aRoot + '/') !== 0) {\n    var index = aRoot.lastIndexOf(\"/\");\n    if (index < 0) {\n      return aPath;\n    }\n\n    // If the only part of the root that is left is the scheme (i.e. http://,\n    // file:///, etc.), one or more slashes (/), or simply nothing at all, we\n    // have exhausted all components, so the path is not relative to the root.\n    aRoot = aRoot.slice(0, index);\n    if (aRoot.match(/^([^\\/]+:\\/)?\\/*$/)) {\n      return aPath;\n    }\n\n    ++level;\n  }\n\n  // Make sure we add a \"../\" for each component we removed from the root.\n  return Array(level + 1).join(\"../\") + aPath.substr(aRoot.length + 1);\n}\nexports.relative = relative;\n\nvar supportsNullProto = (function () {\n  var obj = Object.create(null);\n  return !('__proto__' in obj);\n}());\n\nfunction identity (s) {\n  return s;\n}\n\n/**\n * Because behavior goes wacky when you set `__proto__` on objects, we\n * have to prefix all the strings in our set with an arbitrary character.\n *\n * See https://github.com/mozilla/source-map/pull/31 and\n * https://github.com/mozilla/source-map/issues/30\n *\n * @param String aStr\n */\nfunction toSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return '$' + aStr;\n  }\n\n  return aStr;\n}\nexports.toSetString = supportsNullProto ? identity : toSetString;\n\nfunction fromSetString(aStr) {\n  if (isProtoString(aStr)) {\n    return aStr.slice(1);\n  }\n\n  return aStr;\n}\nexports.fromSetString = supportsNullProto ? identity : fromSetString;\n\nfunction isProtoString(s) {\n  if (!s) {\n    return false;\n  }\n\n  var length = s.length;\n\n  if (length < 9 /* \"__proto__\".length */) {\n    return false;\n  }\n\n  if (s.charCodeAt(length - 1) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 2) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 3) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 4) !== 116 /* 't' */ ||\n      s.charCodeAt(length - 5) !== 111 /* 'o' */ ||\n      s.charCodeAt(length - 6) !== 114 /* 'r' */ ||\n      s.charCodeAt(length - 7) !== 112 /* 'p' */ ||\n      s.charCodeAt(length - 8) !== 95  /* '_' */ ||\n      s.charCodeAt(length - 9) !== 95  /* '_' */) {\n    return false;\n  }\n\n  for (var i = length - 10; i >= 0; i--) {\n    if (s.charCodeAt(i) !== 36 /* '$' */) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Comparator between two mappings where the original positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same original source/line/column, but different generated\n * line and column the same. Useful when searching for a mapping with a\n * stubbed out mapping.\n */\nfunction compareByOriginalPositions(mappingA, mappingB, onlyCompareOriginal) {\n  var cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0 || onlyCompareOriginal) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByOriginalPositions = compareByOriginalPositions;\n\n/**\n * Comparator between two mappings with deflated source and name indices where\n * the generated positions are compared.\n *\n * Optionally pass in `true` as `onlyCompareGenerated` to consider two\n * mappings with the same generated line and column, but different\n * source/name/original line and column the same. Useful when searching for a\n * mapping with a stubbed out mapping.\n */\nfunction compareByGeneratedPositionsDeflated(mappingA, mappingB, onlyCompareGenerated) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0 || onlyCompareGenerated) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsDeflated = compareByGeneratedPositionsDeflated;\n\nfunction strcmp(aStr1, aStr2) {\n  if (aStr1 === aStr2) {\n    return 0;\n  }\n\n  if (aStr1 === null) {\n    return 1; // aStr2 !== null\n  }\n\n  if (aStr2 === null) {\n    return -1; // aStr1 !== null\n  }\n\n  if (aStr1 > aStr2) {\n    return 1;\n  }\n\n  return -1;\n}\n\n/**\n * Comparator between two mappings with inflated source and name strings where\n * the generated positions are compared.\n */\nfunction compareByGeneratedPositionsInflated(mappingA, mappingB) {\n  var cmp = mappingA.generatedLine - mappingB.generatedLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.generatedColumn - mappingB.generatedColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = strcmp(mappingA.source, mappingB.source);\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalLine - mappingB.originalLine;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  cmp = mappingA.originalColumn - mappingB.originalColumn;\n  if (cmp !== 0) {\n    return cmp;\n  }\n\n  return strcmp(mappingA.name, mappingB.name);\n}\nexports.compareByGeneratedPositionsInflated = compareByGeneratedPositionsInflated;\n\n/**\n * Strip any JSON XSSI avoidance prefix from the string (as documented\n * in the source maps specification), and then parse the string as\n * JSON.\n */\nfunction parseSourceMapInput(str) {\n  return JSON.parse(str.replace(/^\\)]}'[^\\n]*\\n/, ''));\n}\nexports.parseSourceMapInput = parseSourceMapInput;\n\n/**\n * Compute the URL of a source given the the source root, the source's\n * URL, and the source map's URL.\n */\nfunction computeSourceURL(sourceRoot, sourceURL, sourceMapURL) {\n  sourceURL = sourceURL || '';\n\n  if (sourceRoot) {\n    // This follows what Chrome does.\n    if (sourceRoot[sourceRoot.length - 1] !== '/' && sourceURL[0] !== '/') {\n      sourceRoot += '/';\n    }\n    // The spec says:\n    //   Line 4: An optional source root, useful for relocating source\n    //   files on a server or removing repeated values in the\n    //   sources entry.  This value is prepended to the individual\n    //   entries in the source field.\n    sourceURL = sourceRoot + sourceURL;\n  }\n\n  // Historically, SourceMapConsumer did not take the sourceMapURL as\n  // a parameter.  This mode is still somewhat supported, which is why\n  // this code block is conditional.  However, it's preferable to pass\n  // the source map URL to SourceMapConsumer, so that this function\n  // can implement the source URL resolution algorithm as outlined in\n  // the spec.  This block is basically the equivalent of:\n  //    new URL(sourceURL, sourceMapURL).toString()\n  // ... except it avoids using URL, which wasn't available in the\n  // older releases of node still supported by this library.\n  //\n  // The spec says:\n  //   If the sources are not absolute URLs after prepending of the\n  //   sourceRoot, the sources are resolved relative to the\n  //   SourceMap (like resolving script src in a html document).\n  if (sourceMapURL) {\n    var parsed = urlParse(sourceMapURL);\n    if (!parsed) {\n      throw new Error(\"sourceMapURL could not be parsed\");\n    }\n    if (parsed.path) {\n      // Strip the last path component, but keep the \"/\".\n      var index = parsed.path.lastIndexOf('/');\n      if (index >= 0) {\n        parsed.path = parsed.path.substring(0, index + 1);\n      }\n    }\n    sourceURL = join(urlGenerate(parsed), sourceURL);\n  }\n\n  return normalize(sourceURL);\n}\nexports.computeSourceURL = computeSourceURL;\n",
    "/*\n * Copyright 2009-2011 Mozilla Foundation and contributors\n * Licensed under the New BSD license. See LICENSE.txt or:\n * http://opensource.org/licenses/BSD-3-Clause\n */\nexports.SourceMapGenerator = require('./lib/source-map-generator').SourceMapGenerator;\nexports.SourceMapConsumer = require('./lib/source-map-consumer').SourceMapConsumer;\nexports.SourceNode = require('./lib/source-node').SourceNode;\n",
    "// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"
  ]
}